function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1,_s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}define("tpl!mathEntryInteraction/creator/tpl/propertiesForm",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(){return"checked=\"checked\""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,self=this,stack1,helper,options;return buffer+="<div class=\"panel\">\n    <label for=\"\" class=\"has-icon\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Response identifier",options):helperMissing.call(depth0,"__","Response identifier",options)))+"</label>\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content:first\" data-tooltip-theme=\"info\"></span>\n    <div class=\"tooltip-content\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\"_\") and contain only Letters, underscores, hyphens (\"-\"), period (\".\", a.k.a. full-stop), Digits, CombiningChars and Extenders.",options):helperMissing.call(depth0,"__","The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\"_\") and contain only Letters, underscores, hyphens (\"-\"), period (\".\", a.k.a. full-stop), Digits, CombiningChars and Extenders.",options)))+"</div>\n\n    <input type=\"text\"\n           name=\"identifier\"\n           value=\"",(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"\n           placeholder=\"e.g. RESPONSE\"\n           data-validate=\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+");\">\n</div>\n\n<hr />\n\n<h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Options",options):helperMissing.call(depth0,"__","Options",options)))+"</h3>\n\n<div>\n    <label class=\"panel\">\n        <input name=\"authorizeWhiteSpace\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.authorizeWhiteSpace,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"authorize white space",options):helperMissing.call(depth0,"__","authorize white space",options)))+"\n    </label>\n    <label class=\"panel\">\n        <input name=\"useGapExpression\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.useGapExpression,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"use expression with gaps",options):helperMissing.call(depth0,"__","use expression with gaps",options)))+"\n    </label>\n    <div class=\"panel mathgap-style-box\" ",stack1=helpers.unless.call(depth0,depth0&&depth0.useGapExpression,{hash:{},inverse:self.noop,fn:self.program(3,function(){return"style=\"display:none\""},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">\n        <label for=\"gapStyle\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Gap size",options):helperMissing.call(depth0,"__","Gap size",options)))+"</label>\n        <select name=\"gapStyle\" data-mathgap-style>\n            <option value=\"math-gap-small\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Small",options):helperMissing.call(depth0,"__","Small",options)))+"</option>\n            <option value=\"math-gap-medium\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Medium",options):helperMissing.call(depth0,"__","Medium",options)))+"</option>\n            <option value=\"math-gap-large\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Large",options):helperMissing.call(depth0,"__","Large",options)))+"</option>\n        </select>\n    </div>\n</div>\n\n<hr />\n\n<h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Functions",options):helperMissing.call(depth0,"__","Functions",options)))+"</h3>\n\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_sqrt\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_sqrt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" width=\"1em\" viewBox=\"0 0 400 400\" version=\"1.0\">\n            <path d=\"m193.39062 4.859375-50.8125 317.375-79.093743-160.71876-58.781256 29.46875l6.6250007 12.5 38.687495-17.75 96.875003 199.40625 58.6875-366.28124h144.71876v-14h-142.46876-10.21874-4.21876z\"></path>\n            <text class=\"\">\u221A</text>\n        </svg>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"square root",options):helperMissing.call(depth0,"__","square root",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_frac\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_frac,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"fraction",options):helperMissing.call(depth0,"__","fraction",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_exp\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_exp,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        x&#8319; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"exponent",options):helperMissing.call(depth0,"__","exponent",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_subscript\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_subscript,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        x&#8336; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"subscript",options):helperMissing.call(depth0,"__","subscript",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_log\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_log,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"log",options):helperMissing.call(depth0,"__","log",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_ln\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_ln,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"ln",options):helperMissing.call(depth0,"__","ln",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_limit\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_limit,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"limit",options):helperMissing.call(depth0,"__","limit",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_sum\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_sum,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"sum",options):helperMissing.call(depth0,"__","sum",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_nthroot\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_nthroot,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"n-root",options):helperMissing.call(depth0,"__","n-root",options)))+"\n    </label>\n</div>\n<hr />\n<h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Symbols",options):helperMissing.call(depth0,"__","Symbols",options)))+"</h3>\n\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_e\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_e,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        e\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_infinity\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_infinity,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#8734;\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"roundbkts\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.roundbkts,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        ( ) "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"parentheses/round brackets",options):helperMissing.call(depth0,"__","parentheses/round brackets",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"curlybkts\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.curlybkts,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        { } "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"braces/curly brackets",options):helperMissing.call(depth0,"__","braces/curly brackets",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"squarebkts\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.squarebkts,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        [ ] "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"square brackets",options):helperMissing.call(depth0,"__","square brackets",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_integral\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_integral,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#x222b; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Indefinite integral",options):helperMissing.call(depth0,"__","Indefinite integral",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_colon\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_colon,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        : "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"colon",options):helperMissing.call(depth0,"__","colon",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_to\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_to,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#x2192; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"right arrow",options):helperMissing.call(depth0,"__","right arrow",options)))+"\n    </label>\n</div>\n\n<hr />\n<h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Geometry",options):helperMissing.call(depth0,"__","Geometry",options)))+"</h3>\n\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_angle\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_angle,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &ang; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"angle",options):helperMissing.call(depth0,"__","angle",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_integral\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_integral,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Indefinite integral",options):helperMissing.call(depth0,"__","Indefinite integral",options)))+"\n        </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_triangle\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_triangle,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#9651; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"triangle",options):helperMissing.call(depth0,"__","triangle",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_similar\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_similar,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &sim; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"similar",options):helperMissing.call(depth0,"__","similar",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_paral\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_paral,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#8741; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"is parallel with",options):helperMissing.call(depth0,"__","is parallel with",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_perp\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_perp,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#8869; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"is perpendicular to",options):helperMissing.call(depth0,"__","is perpendicular to",options)))+"\n    </label>\n</div>\n\n<hr />\n<h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Trigonometry",options):helperMissing.call(depth0,"__","Trigonometry",options)))+"</h3>\n\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_pi\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_pi,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &pi;\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_cos\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_cos,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"cosinus",options):helperMissing.call(depth0,"__","cosinus",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_sin\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_sin,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"sinus",options):helperMissing.call(depth0,"__","sinus",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_tan\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_tan,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"tangent",options):helperMissing.call(depth0,"__","tangent",options)))+"\n    </label>\n</div>\n<hr />\n<h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Comparison",options):helperMissing.call(depth0,"__","Comparison",options)))+"</h3>\n\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_lower\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_lower,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &lt; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"lower than",options):helperMissing.call(depth0,"__","lower than",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_greater\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_greater,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &gt; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"greater than",options):helperMissing.call(depth0,"__","greater than",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_lte\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_lte,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"\u2264",options):helperMissing.call(depth0,"__","\u2264",options)))+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"lower than or equal",options):helperMissing.call(depth0,"__","lower than or equal",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_gte\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_gte,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"\u2265",options):helperMissing.call(depth0,"__","\u2265",options)))+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"greater than or equal",options):helperMissing.call(depth0,"__","greater than or equal",options)))+"\n    </label>\n</div>\n\n<hr />\n<h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Operands",options):helperMissing.call(depth0,"__","Operands",options)))+"</h3>\n\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_equal\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_equal,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        = "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"equal",options):helperMissing.call(depth0,"__","equal",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_plus\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_plus,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        + "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"plus",options):helperMissing.call(depth0,"__","plus",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_minus\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_minus,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        \u2013 "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"minus",options):helperMissing.call(depth0,"__","minus",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_times\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_times,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &times; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"times",options):helperMissing.call(depth0,"__","times",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_timesdot\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_timesdot,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        \xB7 "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"times dot",options):helperMissing.call(depth0,"__","times dot",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_divide\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_divide,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &divide; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"divide",options):helperMissing.call(depth0,"__","divide",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_plusminus\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_plusminus,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#177; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Plus/minus",options):helperMissing.call(depth0,"__","Plus/minus",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_inmem\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_inmem,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"is a member of",options):helperMissing.call(depth0,"__","is a member of",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_ninmem\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_ninmem,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"is not a member of",options):helperMissing.call(depth0,"__","is not a member of",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_union\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_union,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"set union",options):helperMissing.call(depth0,"__","set union",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_intersec\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_intersec,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"set intersection",options):helperMissing.call(depth0,"__","set intersection",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_congruent\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_congruent,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#x2245; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"congruent",options):helperMissing.call(depth0,"__","congruent",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_subset\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_subset,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#x2282; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"subset",options):helperMissing.call(depth0,"__","subset",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_superset\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_superset,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#x2283; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"superset",options):helperMissing.call(depth0,"__","superset",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_contains\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_contains,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        &#x220B; "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"contains as member",options):helperMissing.call(depth0,"__","contains as member",options)))+"\n    </label>\n</div>\n<hr />\n\n<h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Matrix",options):helperMissing.call(depth0,"__","Matrix",options)))+"</h3>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_matrix_2row\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_matrix_2row,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"2 rows",options):helperMissing.call(depth0,"__","2 rows",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"tool_matrix_2row_2col\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.tool_matrix_2row_2col,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"2 rows & 2 columns",options):helperMissing.call(depth0,"__","2 rows & 2 columns",options)))+"\n    </label>\n</div>\n<hr />\n\n<h3 class=\"txt-error\"><strong><span class=\"icon-warning\"></span> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Experimental only",options):helperMissing.call(depth0,"__","Experimental only",options)))+"</strong></h3>\n\n<div>\n    <label class=\"panel\">\n        <input name=\"allowNewLine\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.allowNewLine,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"allow line break",options):helperMissing.call(depth0,"__","allow line break",options)))+"\n    </label>\n</div>\n<div>\n    <label class=\"panel\">\n        <input name=\"enableAutoWrap\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.enableAutoWrap,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"enable auto wrap",options):helperMissing.call(depth0,"__","enable auto wrap",options)))+"\n    </label>\n</div>",buffer})}),define("tpl!mathEntryInteraction/creator/tpl/addGapBtn",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,helper,options;return buffer+="<div class=\"add-option\">\n    <span class=\"icon-add\"></span> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Add gap",options):helperMissing.call(depth0,"__","Add gap",options)))+"\n</div>",buffer})}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("mathEntryInteraction/runtime/mathml-to-latex/mathml-to-latex",factory):(global="undefined"==typeof globalThis?global||self:globalThis,global.Mathml2latex=factory())}(this,function(){"use strict";function requireMathmlElementToLatexConverter(){if(hasRequiredMathmlElementToLatexConverter)return mathmlElementToLatexConverter;hasRequiredMathmlElementToLatexConverter=1,Object.defineProperty(mathmlElementToLatexConverter,"__esModule",{value:!0}),mathmlElementToLatexConverter.mathMLElementToLaTeXConverter=void 0;var mathml_element_to_latex_converter_adapter_1=requireMathmlElementToLatexConverterAdapter(),mathMLElementToLaTeXConverter=function mathMLElementToLaTeXConverter(mathMLElement){return new mathml_element_to_latex_converter_adapter_1.MathMLElementToLatexConverterAdapter(mathMLElement).toLatexConverter()};return mathmlElementToLatexConverter.mathMLElementToLaTeXConverter=mathMLElementToLaTeXConverter,mathmlElementToLatexConverter}function requireMath(){if(hasRequiredMath)return math;hasRequiredMath=1,Object.defineProperty(math,"__esModule",{value:!0}),math.Math=void 0;var mathml_element_to_latex_converter_1=requireMathmlElementToLatexConverter(),normalize_whitespace_1=normalizeWhitespace,Math=function(){function Math(mathElement){this._mathmlElement=mathElement}return Math.prototype.convert=function(){var unnormalizedLatex=this._mathmlElement.children.map(function(child){return(0,mathml_element_to_latex_converter_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join("");return(0,normalize_whitespace_1.normalizeWhiteSpaces)(unnormalizedLatex)},Math}();return math.Math=Math,math}function requireHelpers(){return hasRequiredHelpers?helpers:(hasRequiredHelpers=1,function(exports){var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))&&(desc={enumerable:!0,get:function get(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,exports){for(var p in m)"default"==p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(wrappers,exports),__exportStar(joinWithManySeparators,exports),__exportStar(requireMathmlElementToLatexConverter(),exports),__exportStar(normalizeWhitespace,exports)}(helpers),helpers)}function requireMi(){if(hasRequiredMi)return mi;hasRequiredMi=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.MI=void 0;var helpers_1=requireHelpers(),syntax_1=syntax,MI=function(){function MI(mathElement){this._mathmlElement=mathElement}return MI.prototype.convert=function(){var normalizedValue=(0,helpers_1.normalizeWhiteSpaces)(this._mathmlElement.value);if(" "===normalizedValue)return Character.apply(normalizedValue);var trimmedValue=normalizedValue.trim();return Character.apply(trimmedValue)},MI}();mi.MI=MI;var Character=function(){function Character(value){this._value=value}return Character.apply=function(value){return new Character(value)._apply()},Character.prototype._apply=function(){return this._findByCharacter()||this._findByGlyph()||this._value},Character.prototype._findByCharacter=function(){return syntax_1.allMathSymbolsByChar[this._value]},Character.prototype._findByGlyph=function(){return syntax_1.allMathSymbolsByGlyph[this._value]},Character}();return mi}function requireMo(){if(hasRequiredMo)return mo;hasRequiredMo=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.MO=void 0;var helpers_1=requireHelpers(),syntax_1=syntax,MO=function(){function MO(mathElement){this._mathmlElement=mathElement}return MO.prototype.convert=function(){var normalizedValue=(0,helpers_1.normalizeWhiteSpaces)(this._mathmlElement.value),trimmedValue=normalizedValue.trim();return Operator.operate(trimmedValue)},MO}();mo.MO=MO;var Operator=function(){function Operator(value){this._value=value}return Operator.operate=function(value){return new Operator(value)._operate()},Operator.prototype._operate=function(){return this._findByCharacter()||this._findByGlyph()||this._value},Operator.prototype._findByCharacter=function(){return syntax_1.allMathOperatorsByChar[this._value]},Operator.prototype._findByGlyph=function(){return syntax_1.allMathOperatorsByGlyph[this._value]},Operator}();return mo}function requireMn(){if(hasRequiredMn)return mn;hasRequiredMn=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.MN=void 0;var helpers_1=requireHelpers(),MN=function(){function MN(mathElement){this._mathmlElement=mathElement}return MN.prototype.convert=function(){var normalizedValue=(0,helpers_1.normalizeWhiteSpaces)(this._mathmlElement.value);return normalizedValue.trim()},MN}();return mn.MN=MN,mn}function requireMsqrt(){if(hasRequiredMsqrt)return msqrt;hasRequiredMsqrt=1,Object.defineProperty(msqrt,"__esModule",{value:!0}),msqrt.MSqrt=void 0;var helpers_1=requireHelpers(),MSqrt=function(){function MSqrt(mathElement){this._mathmlElement=mathElement}return MSqrt.prototype.convert=function(){var latexJoinedChildren=this._mathmlElement.children.map(function(child){return(0,helpers_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join(" ");return"\\sqrt{".concat(latexJoinedChildren,"}")},MSqrt}();return msqrt.MSqrt=MSqrt,msqrt}function requireMfenced(){if(hasRequiredMfenced)return mfenced;hasRequiredMfenced=1,Object.defineProperty(mfenced,"__esModule",{value:!0}),mfenced.MFenced=void 0;var mathml_element_to_latex_converter_1=requireMathmlElementToLatexConverter(),helpers_1=requireHelpers(),MFenced=function(){function MFenced(mathmlElement){this._mathmlElement=mathmlElement,this._open=this._mathmlElement.attributes.open||"",this._close=this._mathmlElement.attributes.close||"",this._separators=Array.from(this._mathmlElement.attributes.separators||"")}return MFenced.prototype.convert=function(){var latexChildren=this._mathmlElement.children.map(function(child){return(0,mathml_element_to_latex_converter_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()});return this._isThereRelativeOfName(this._mathmlElement.children,"mtable")?new Matrix(this._open,this._close).apply(latexChildren):new Vector(this._open,this._close,this._separators).apply(latexChildren)},MFenced.prototype._isThereRelativeOfName=function(mathmlElements,elementName){var _this=this;return mathmlElements.some(function(child){return child.name===elementName||_this._isThereRelativeOfName(child.children,elementName)})},MFenced}();mfenced.MFenced=MFenced;var Vector=function(){function Vector(open,close,separators){this._open=open||"(",this._close=close||")",this._separators=separators}return Vector.prototype.apply=function(latexContents){var contentWithoutWrapper=helpers_1.JoinWithManySeparators.join(latexContents,this._separators);return new helpers_1.GenericWrapper(this._open,this._close).wrap(contentWithoutWrapper)},Vector}(),Matrix=function(){function Matrix(open,close){this._genericCommand="matrix",this._separators=new Separators(open,close)}return Matrix.prototype.apply=function(latexContents){var command=this._command,matrix="\\begin{".concat(command,"}\n").concat(latexContents.join(""),"\n\\end{").concat(command,"}");return command===this._genericCommand?this._separators.wrap(matrix):matrix},Object.defineProperty(Matrix.prototype,"_command",{get:function get(){return this._separators.areParentheses()?"pmatrix":this._separators.areSquareBrackets()?"bmatrix":this._separators.areBrackets()?"Bmatrix":this._separators.areDivides()?"vmatrix":this._separators.areParallels()?"Vmatrix":this._separators.areNotEqual()?this._genericCommand:"bmatrix"},enumerable:!1,configurable:!0}),Matrix}(),Separators=function(){function Separators(open,close){this._open=open,this._close=close}return Separators.prototype.wrap=function(str){return new helpers_1.GenericWrapper(this._open,this._close).wrap(str)},Separators.prototype.areParentheses=function(){return this._compare("(",")")},Separators.prototype.areSquareBrackets=function(){return this._compare("[","]")},Separators.prototype.areBrackets=function(){return this._compare("{","}")},Separators.prototype.areDivides=function(){return this._compare("|","|")},Separators.prototype.areParallels=function(){return this._compare("||","||")},Separators.prototype.areNotEqual=function(){return this._open!==this._close},Separators.prototype._compare=function(openToCompare,closeToCompare){return this._open===openToCompare&&this._close===closeToCompare},Separators}();return mfenced}function requireMfrac(){if(hasRequiredMfrac)return mfrac;hasRequiredMfrac=1,Object.defineProperty(mfrac,"__esModule",{value:!0}),mfrac.MFrac=void 0;var errors_1=errors,helpers_1=requireHelpers(),MFrac=function(){function MFrac(mathElement){this._mathmlElement=mathElement}return MFrac.prototype.convert=function(){var _a=this._mathmlElement,children=_a.children,name=_a.name,childrenLength=children.length;if(2!==childrenLength)throw new errors_1.InvalidNumberOfChildrenError(name,2,childrenLength);var num=(0,helpers_1.mathMLElementToLaTeXConverter)(children[0]).convert(),den=(0,helpers_1.mathMLElementToLaTeXConverter)(children[1]).convert();return this._isBevelled()?"".concat(this._wrapIfMoreThanOneChar(num),"/").concat(this._wrapIfMoreThanOneChar(den)):"\\frac{".concat(num,"}{").concat(den,"}")},MFrac.prototype._wrapIfMoreThanOneChar=function(str){return new helpers_1.ParenthesisWrapper().wrapIfMoreThanOneChar(str)},MFrac.prototype._isBevelled=function(){return!!this._mathmlElement.attributes.bevelled},MFrac}();return mfrac.MFrac=MFrac,mfrac}function requireMroot(){if(hasRequiredMroot)return mroot;hasRequiredMroot=1,Object.defineProperty(mroot,"__esModule",{value:!0}),mroot.MRoot=void 0;var helpers_1=requireHelpers(),errors_1=errors,MRoot=function(){function MRoot(mathElement){this._mathmlElement=mathElement}return MRoot.prototype.convert=function(){var _a=this._mathmlElement,name=_a.name,children=_a.children,childrenLength=children.length;if(2!==childrenLength)throw new errors_1.InvalidNumberOfChildrenError(name,2,childrenLength);var content=(0,helpers_1.mathMLElementToLaTeXConverter)(children[0]).convert(),rootIndex=(0,helpers_1.mathMLElementToLaTeXConverter)(children[1]).convert();return"\\sqrt[".concat(rootIndex,"]{").concat(content,"}")},MRoot}();return mroot.MRoot=MRoot,mroot}function requireMaction(){if(hasRequiredMaction)return maction;hasRequiredMaction=1,Object.defineProperty(maction,"__esModule",{value:!0}),maction.MAction=void 0;var mathml_element_to_latex_converter_1=requireMathmlElementToLatexConverter(),MAction=function(){function MAction(mathElement){this._mathmlElement=mathElement}return MAction.prototype.convert=function(){var children=this._mathmlElement.children;return this._isToggle()?children.map(function(child){return(0,mathml_element_to_latex_converter_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join(" \\Longrightarrow "):(0,mathml_element_to_latex_converter_1.mathMLElementToLaTeXConverter)(children[0]).convert()},MAction.prototype._isToggle=function(){var actiontype=this._mathmlElement.attributes.actiontype;return"toggle"===actiontype||!actiontype},MAction}();return maction.MAction=MAction,maction}function requireMenclose(){if(hasRequiredMenclose)return menclose;hasRequiredMenclose=1,Object.defineProperty(menclose,"__esModule",{value:!0}),menclose.MEnclose=void 0;var mathml_element_to_latex_converter_1=requireMathmlElementToLatexConverter(),MEnclose=function(){function MEnclose(mathElement){this._mathmlElement=mathElement}return MEnclose.prototype.convert=function(){var latexJoinedChildren=this._mathmlElement.children.map(function(child){return(0,mathml_element_to_latex_converter_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join(" ");return"actuarial"===this._notation?"\\overline{\\left.".concat(latexJoinedChildren,"\\right|}"):"radical"===this._notation?"\\sqrt{".concat(latexJoinedChildren,"}"):["box","roundedbox","circle"].includes(this._notation)?"\\boxed{".concat(latexJoinedChildren,"}"):"left"===this._notation?"\\left|".concat(latexJoinedChildren):"right"===this._notation?"".concat(latexJoinedChildren,"\\right|"):"top"===this._notation?"\\overline{".concat(latexJoinedChildren,"}"):"bottom"===this._notation?"\\underline{".concat(latexJoinedChildren,"}"):"updiagonalstrike"===this._notation?"\\cancel{".concat(latexJoinedChildren,"}"):"downdiagonalstrike"===this._notation?"\\bcancel{".concat(latexJoinedChildren,"}"):"updiagonalarrow"===this._notation?"\\cancelto{}{".concat(latexJoinedChildren,"}"):["verticalstrike","horizontalstrike"].includes(this._notation)?"\\hcancel{".concat(latexJoinedChildren,"}"):"madruwb"===this._notation?"\\underline{".concat(latexJoinedChildren,"\\right|}"):"phasorangle"===this._notation?"{\\angle \\underline{".concat(latexJoinedChildren,"}}"):"\\overline{\\left.\\right)".concat(latexJoinedChildren,"}")},Object.defineProperty(MEnclose.prototype,"_notation",{get:function get(){return this._mathmlElement.attributes.notation||"longdiv"},enumerable:!1,configurable:!0}),MEnclose}();return menclose.MEnclose=MEnclose,menclose}function requireMerror(){if(hasRequiredMerror)return merror;hasRequiredMerror=1,Object.defineProperty(merror,"__esModule",{value:!0}),merror.MError=void 0;var mathml_element_to_latex_converter_1=requireMathmlElementToLatexConverter(),MError=function(){function MError(mathElement){this._mathmlElement=mathElement}return MError.prototype.convert=function(){var latexJoinedChildren=this._mathmlElement.children.map(function(child){return(0,mathml_element_to_latex_converter_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join(" ");return"\\color{red}{".concat(latexJoinedChildren,"}")},MError}();return merror.MError=MError,merror}function requireMsup(){if(hasRequiredMsup)return msup;hasRequiredMsup=1,Object.defineProperty(msup,"__esModule",{value:!0}),msup.MSup=void 0;var helpers_1=requireHelpers(),errors_1=errors,MSup=function(){function MSup(mathElement){this._mathmlElement=mathElement}return MSup.prototype.convert=function(){var _a=this._mathmlElement,name=_a.name,children=_a.children,childrenLength=children.length;if(2!==childrenLength)throw new errors_1.InvalidNumberOfChildrenError(name,2,childrenLength);var base=(0,helpers_1.mathMLElementToLaTeXConverter)(children[0]).convert(),exponent=(0,helpers_1.mathMLElementToLaTeXConverter)(children[1]).convert();return"".concat(base,"^").concat(new helpers_1.BracketWrapper().wrap(exponent))},MSup}();return msup.MSup=MSup,msup}function requireMsub(){if(hasRequiredMsub)return msub;hasRequiredMsub=1,Object.defineProperty(msub,"__esModule",{value:!0}),msub.MSub=void 0;var helpers_1=requireHelpers(),errors_1=errors,MSub=function(){function MSub(mathElement){this._mathmlElement=mathElement}return MSub.prototype.convert=function(){var _a=this._mathmlElement,name=_a.name,children=_a.children,childrenLength=children.length;if(2!==childrenLength)throw new errors_1.InvalidNumberOfChildrenError(name,2,childrenLength);var base=(0,helpers_1.mathMLElementToLaTeXConverter)(children[0]).convert(),subscript=(0,helpers_1.mathMLElementToLaTeXConverter)(children[1]).convert();return"".concat(base,"_").concat(new helpers_1.BracketWrapper().wrap(subscript))},MSub}();return msub.MSub=MSub,msub}function requireMsubsup(){if(hasRequiredMsubsup)return msubsup;hasRequiredMsubsup=1,Object.defineProperty(msubsup,"__esModule",{value:!0}),msubsup.MSubsup=void 0;var helpers_1=requireHelpers(),errors_1=errors,MSubsup=function(){function MSubsup(mathElement){this._mathmlElement=mathElement}return MSubsup.prototype.convert=function(){var _a=this._mathmlElement,name=_a.name,children=_a.children,childrenLength=children.length;if(3!==childrenLength)throw new errors_1.InvalidNumberOfChildrenError(name,3,childrenLength);var base=(0,helpers_1.mathMLElementToLaTeXConverter)(children[0]).convert(),sub=(0,helpers_1.mathMLElementToLaTeXConverter)(children[1]).convert(),sup=(0,helpers_1.mathMLElementToLaTeXConverter)(children[2]).convert(),wrappedSub=new helpers_1.BracketWrapper().wrap(sub),wrappedSup=new helpers_1.BracketWrapper().wrap(sup);return"".concat(this._wrapInParenthesisIfThereIsSpace(base),"_").concat(wrappedSub,"^").concat(wrappedSup)},MSubsup.prototype._wrapInParenthesisIfThereIsSpace=function(str){return str.match(/\s+/g)?new helpers_1.ParenthesisWrapper().wrap(str):str},MSubsup}();return msubsup.MSubsup=MSubsup,msubsup}function requireMmultiscripts(){if(hasRequiredMmultiscripts)return mmultiscripts;hasRequiredMmultiscripts=1,Object.defineProperty(mmultiscripts,"__esModule",{value:!0}),mmultiscripts.MMultiscripts=void 0;var helpers_1=requireHelpers(),errors_1=errors,MMultiscripts=function(){function MMultiscripts(mathElement){this._mathmlElement=mathElement}return MMultiscripts.prototype.convert=function(){var _a=this._mathmlElement,name=_a.name,children=_a.children,childrenLength=children.length;if(3>childrenLength)throw new errors_1.InvalidNumberOfChildrenError(name,3,childrenLength,"at least");var baseContent=(0,helpers_1.mathMLElementToLaTeXConverter)(children[0]).convert();return this._prescriptLatex()+this._wrapInParenthesisIfThereIsSpace(baseContent)+this._postscriptLatex()},MMultiscripts.prototype._prescriptLatex=function(){var children=this._mathmlElement.children,sub,sup;if(this._isPrescripts(children[1]))sub=children[2],sup=children[3];else if(this._isPrescripts(children[3]))sub=children[4],sup=children[5];else return"";var subLatex=(0,helpers_1.mathMLElementToLaTeXConverter)(sub).convert(),supLatex=(0,helpers_1.mathMLElementToLaTeXConverter)(sup).convert();return"\\_{".concat(subLatex,"}^{").concat(supLatex,"}")},MMultiscripts.prototype._postscriptLatex=function(){var children=this._mathmlElement.children;if(this._isPrescripts(children[1]))return"";var sub=children[1],sup=children[2],subLatex=(0,helpers_1.mathMLElementToLaTeXConverter)(sub).convert(),supLatex=(0,helpers_1.mathMLElementToLaTeXConverter)(sup).convert();return"_{".concat(subLatex,"}^{").concat(supLatex,"}")},MMultiscripts.prototype._wrapInParenthesisIfThereIsSpace=function(str){return str.match(/\s+/g)?new helpers_1.ParenthesisWrapper().wrap(str):str},MMultiscripts.prototype._isPrescripts=function(child){return"mprescripts"===(null===child||void 0===child?void 0:child.name)},MMultiscripts}();return mmultiscripts.MMultiscripts=MMultiscripts,mmultiscripts}function requireMunderover(){if(hasRequiredMunderover)return munderover;hasRequiredMunderover=1,Object.defineProperty(munderover,"__esModule",{value:!0}),munderover.MUnderover=void 0;var helpers_1=requireHelpers(),errors_1=errors,MUnderover=function(){function MUnderover(mathElement){this._mathmlElement=mathElement}return MUnderover.prototype.convert=function(){var _a=this._mathmlElement,name=_a.name,children=_a.children,childrenLength=children.length;if(3!==childrenLength)throw new errors_1.InvalidNumberOfChildrenError(name,3,childrenLength);var base=(0,helpers_1.mathMLElementToLaTeXConverter)(children[0]).convert(),underContent=(0,helpers_1.mathMLElementToLaTeXConverter)(children[1]).convert(),overContent=(0,helpers_1.mathMLElementToLaTeXConverter)(children[2]).convert();return"".concat(base,"_{").concat(underContent,"}^{").concat(overContent,"}")},MUnderover}();return munderover.MUnderover=MUnderover,munderover}function requireMtable(){if(hasRequiredMtable)return mtable;hasRequiredMtable=1,Object.defineProperty(mtable,"__esModule",{value:!0}),mtable.MTable=void 0;var helpers_1=requireHelpers(),MTable=function(){function MTable(mathElement){this._mathmlElement=mathElement,this._addFlagRecursiveIfName(this._mathmlElement.children,"mtable","innerTable")}return MTable.prototype.convert=function(){var tableContent=this._mathmlElement.children.map(function(child){return(0,helpers_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join(" \\\\\n");return this._hasFlag("innerTable")?this._wrap(tableContent):tableContent},MTable.prototype._wrap=function(latex){return"\\begin{matrix}".concat(latex,"\\end{matrix}")},MTable.prototype._addFlagRecursiveIfName=function(mathmlElements,name,flag){var _this=this;mathmlElements.forEach(function(mathmlElement){mathmlElement.name===name&&(mathmlElement.attributes[flag]=flag),_this._addFlagRecursiveIfName(mathmlElement.children,name,flag)})},MTable.prototype._hasFlag=function(flag){return!!this._mathmlElement.attributes[flag]},MTable}();return mtable.MTable=MTable,mtable}function requireMtr(){if(hasRequiredMtr)return mtr;hasRequiredMtr=1,Object.defineProperty(mtr,"__esModule",{value:!0}),mtr.MTr=void 0;var helpers_1=requireHelpers(),MTr=function(){function MTr(mathElement){this._mathmlElement=mathElement}return MTr.prototype.convert=function(){return this._mathmlElement.children.map(function(child){return(0,helpers_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join(" & ")},MTr}();return mtr.MTr=MTr,mtr}function requireMspace(){if(hasRequiredMspace)return mspace;hasRequiredMspace=1,Object.defineProperty(mspace,"__esModule",{value:!0}),mspace.MSpace=void 0;var helpers_1=requireHelpers(),MSpace=function(){function MSpace(mathElement){this._mathmlElement=mathElement}return MSpace.prototype.convert=function(){var latexJoinedChildren=this._mathmlElement.children.map(function(child){return(0,helpers_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join(" ");return"newline"===this._linebreak?"\\\\".concat(latexJoinedChildren):latexJoinedChildren},Object.defineProperty(MSpace.prototype,"_linebreak",{get:function get(){return this._mathmlElement.attributes.linebreak||"auto"},enumerable:!1,configurable:!0}),MSpace}();return mspace.MSpace=MSpace,mspace}function requireGenericSpacingWrapper(){if(hasRequiredGenericSpacingWrapper)return genericSpacingWrapper;hasRequiredGenericSpacingWrapper=1,Object.defineProperty(genericSpacingWrapper,"__esModule",{value:!0}),genericSpacingWrapper.GenericSpacingWrapper=void 0;var helpers_1=requireHelpers(),GenericSpacingWrapper=function(){function GenericSpacingWrapper(mathElement){this._mathmlElement=mathElement}return GenericSpacingWrapper.prototype.convert=function(){return this._mathmlElement.children.map(function(child){return(0,helpers_1.mathMLElementToLaTeXConverter)(child)}).map(function(converter){return converter.convert()}).join(" ")},GenericSpacingWrapper}();return genericSpacingWrapper.GenericSpacingWrapper=GenericSpacingWrapper,genericSpacingWrapper}function requireGenericUnderOver(){if(hasRequiredGenericUnderOver)return genericUnderOver;hasRequiredGenericUnderOver=1,Object.defineProperty(genericUnderOver,"__esModule",{value:!0}),genericUnderOver.GenericUnderOver=void 0;var mathml_element_to_latex_converter_1=requireMathmlElementToLatexConverter(),errors_1=errors,latex_accents_1=latexAccents,GenericUnderOver=function(){function GenericUnderOver(mathElement){this._mathmlElement=mathElement}return GenericUnderOver.prototype.convert=function(){var _a=this._mathmlElement,name=_a.name,children=_a.children,childrenLength=children.length;if(2!==childrenLength)throw new errors_1.InvalidNumberOfChildrenError(name,2,childrenLength);var content=(0,mathml_element_to_latex_converter_1.mathMLElementToLaTeXConverter)(children[0]).convert(),accent=(0,mathml_element_to_latex_converter_1.mathMLElementToLaTeXConverter)(children[1]).convert();return this._applyCommand(content,accent)},GenericUnderOver.prototype._applyCommand=function(content,accent){var type=this._mathmlElement.name.match(/under/)?TagTypes.Under:TagTypes.Over;return new UnderOverSetter(type).apply(content,accent)},GenericUnderOver}();genericUnderOver.GenericUnderOver=GenericUnderOver;var UnderOverSetter=function(){function UnderOverSetter(type){this._type=type}return UnderOverSetter.prototype.apply=function(content,accent){return latex_accents_1.latexAccents.includes(accent)?"".concat(accent,"{").concat(content,"}"):"".concat(this._defaultCommand,"{").concat(accent,"}{").concat(content,"}")},Object.defineProperty(UnderOverSetter.prototype,"_defaultCommand",{get:function get(){return this._type===TagTypes.Under?"\\underset":"\\overset"},enumerable:!1,configurable:!0}),UnderOverSetter}(),TagTypes;return function(TagTypes){TagTypes[TagTypes.Under=0]="Under",TagTypes[TagTypes.Over=1]="Over"}(TagTypes||(TagTypes={})),genericUnderOver}function requireConverters(){return hasRequiredConverters?converters:(hasRequiredConverters=1,function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericUnderOver=exports.GenericSpacingWrapper=exports.MSpace=exports.MTr=exports.MTable=exports.MUnderover=exports.MText=exports.MMultiscripts=exports.MSubsup=exports.MSub=exports.MSup=exports.MPhantom=exports.MError=exports.MEnclose=exports.MAction=exports.MRoot=exports.MFrac=exports.MFenced=exports.MSqrt=exports.MN=exports.MO=exports.MI=exports.Math=void 0;var math_1=requireMath();Object.defineProperty(exports,"Math",{enumerable:!0,get:function get(){return math_1.Math}});var mi_1=requireMi();Object.defineProperty(exports,"MI",{enumerable:!0,get:function get(){return mi_1.MI}});var mo_1=requireMo();Object.defineProperty(exports,"MO",{enumerable:!0,get:function get(){return mo_1.MO}});var mn_1=requireMn();Object.defineProperty(exports,"MN",{enumerable:!0,get:function get(){return mn_1.MN}});var msqrt_1=requireMsqrt();Object.defineProperty(exports,"MSqrt",{enumerable:!0,get:function get(){return msqrt_1.MSqrt}});var mfenced_1=requireMfenced();Object.defineProperty(exports,"MFenced",{enumerable:!0,get:function get(){return mfenced_1.MFenced}});var mfrac_1=requireMfrac();Object.defineProperty(exports,"MFrac",{enumerable:!0,get:function get(){return mfrac_1.MFrac}});var mroot_1=requireMroot();Object.defineProperty(exports,"MRoot",{enumerable:!0,get:function get(){return mroot_1.MRoot}});var maction_1=requireMaction();Object.defineProperty(exports,"MAction",{enumerable:!0,get:function get(){return maction_1.MAction}});var menclose_1=requireMenclose();Object.defineProperty(exports,"MEnclose",{enumerable:!0,get:function get(){return menclose_1.MEnclose}});var merror_1=requireMerror();Object.defineProperty(exports,"MError",{enumerable:!0,get:function get(){return merror_1.MError}});var mphantom_1=mphantom;Object.defineProperty(exports,"MPhantom",{enumerable:!0,get:function get(){return mphantom_1.MPhantom}});var msup_1=requireMsup();Object.defineProperty(exports,"MSup",{enumerable:!0,get:function get(){return msup_1.MSup}});var msub_1=requireMsub();Object.defineProperty(exports,"MSub",{enumerable:!0,get:function get(){return msub_1.MSub}});var msubsup_1=requireMsubsup();Object.defineProperty(exports,"MSubsup",{enumerable:!0,get:function get(){return msubsup_1.MSubsup}});var mmultiscripts_1=requireMmultiscripts();Object.defineProperty(exports,"MMultiscripts",{enumerable:!0,get:function get(){return mmultiscripts_1.MMultiscripts}});var mtext_1=mtext;Object.defineProperty(exports,"MText",{enumerable:!0,get:function get(){return mtext_1.MText}});var munderover_1=requireMunderover();Object.defineProperty(exports,"MUnderover",{enumerable:!0,get:function get(){return munderover_1.MUnderover}});var mtable_1=requireMtable();Object.defineProperty(exports,"MTable",{enumerable:!0,get:function get(){return mtable_1.MTable}});var mtr_1=requireMtr();Object.defineProperty(exports,"MTr",{enumerable:!0,get:function get(){return mtr_1.MTr}});var mspace_1=requireMspace();Object.defineProperty(exports,"MSpace",{enumerable:!0,get:function get(){return mspace_1.MSpace}});var generic_spacing_wrapper_1=requireGenericSpacingWrapper();Object.defineProperty(exports,"GenericSpacingWrapper",{enumerable:!0,get:function get(){return generic_spacing_wrapper_1.GenericSpacingWrapper}});var generic_under_over_1=requireGenericUnderOver();Object.defineProperty(exports,"GenericUnderOver",{enumerable:!0,get:function get(){return generic_under_over_1.GenericUnderOver}})}(converters),converters)}function requireMathmlElementToLatexConverterAdapter(){if(hasRequiredMathmlElementToLatexConverterAdapter)return mathmlElementToLatexConverterAdapter;hasRequiredMathmlElementToLatexConverterAdapter=1;var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,m,k,k2){k2===void 0&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))&&(desc={enumerable:!0,get:function get(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){k2===void 0&&(k2=k),o[k2]=m[k]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o["default"]=v}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!=k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(mathmlElementToLatexConverterAdapter,"__esModule",{value:!0}),mathmlElementToLatexConverterAdapter.MathMLElementToLatexConverterAdapter=void 0;var ToLatexConverters=__importStar(requireConverters()),MathMLElementToLatexConverterAdapter=function(){function MathMLElementToLatexConverterAdapter(mathMLElement){this._mathMLElement=mathMLElement}return MathMLElementToLatexConverterAdapter.prototype.toLatexConverter=function(){var name=this._mathMLElement.name,Converter=fromMathMLElementToLatexConverter[name]||ToLatexConverters.GenericSpacingWrapper;return new Converter(this._mathMLElement)},MathMLElementToLatexConverterAdapter}();mathmlElementToLatexConverterAdapter.MathMLElementToLatexConverterAdapter=MathMLElementToLatexConverterAdapter;var fromMathMLElementToLatexConverter={math:ToLatexConverters.Math,mi:ToLatexConverters.MI,mo:ToLatexConverters.MO,mn:ToLatexConverters.MN,msqrt:ToLatexConverters.MSqrt,mfenced:ToLatexConverters.MFenced,mfrac:ToLatexConverters.MFrac,mroot:ToLatexConverters.MRoot,maction:ToLatexConverters.MAction,menclose:ToLatexConverters.MEnclose,merror:ToLatexConverters.MError,mphantom:ToLatexConverters.MPhantom,msup:ToLatexConverters.MSup,msub:ToLatexConverters.MSub,msubsup:ToLatexConverters.MSubsup,mmultiscripts:ToLatexConverters.MMultiscripts,mtext:ToLatexConverters.MText,munderover:ToLatexConverters.MUnderover,mtable:ToLatexConverters.MTable,mtr:ToLatexConverters.MTr,mover:ToLatexConverters.GenericUnderOver,munder:ToLatexConverters.GenericUnderOver,mrow:ToLatexConverters.GenericSpacingWrapper,mpadded:ToLatexConverters.GenericSpacingWrapper,mspace:ToLatexConverters.MSpace};return mathmlElementToLatexConverterAdapter}function ParseError$1(message,locator){this.message=message,this.locator=locator,Error.captureStackTrace&&Error.captureStackTrace(this,ParseError$1)}function XMLReader$1(){}function _parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(65535<code){code-=65536;var surrogate1=55296+(code>>10),surrogate2=56320+(1023&code);return String.fromCharCode(surrogate1,surrogate2)}return String.fromCharCode(code)}function entityReplacer(a){var k=a.slice(1,-1);return k in entityMap?entityMap[k]:"#"===k.charAt(0)?fixedFromCharCode(parseInt(k.substr(1).replace("x","0x"))):(errorHandler.error("entity not found:"+a),a)}function appendText(end){if(end>start){var xt=source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);locator&&position(start),domBuilder.characters(xt,0,end-start),start=end}}function position(p,m){for(;p>=lineEnd&&(m=linePattern.exec(source));)lineStart=m.index,lineEnd=lineStart+m[0].length,locator.lineNumber++;locator.columnNumber=p-lineStart+1}for(var lineStart=0,lineEnd=0,linePattern=/.*(?:\r\n?|\n)|.*$/g,locator=domBuilder.locator,parseStack=[{currentNSMap:defaultNSMapCopy}],closeMap={},start=0;!0;){try{var tagStart=source.indexOf("<",start);if(0>tagStart){if(!source.substr(start).match(/^\s*$/)){var doc=domBuilder.doc,text=doc.createTextNode(source.substr(start));doc.appendChild(text),domBuilder.currentElement=text}return}switch(tagStart>start&&appendText(tagStart),source.charAt(tagStart+1)){case"/":var end=source.indexOf(">",tagStart+3),tagName=source.substring(tagStart+2,end),config=parseStack.pop();0>end?(tagName=source.substring(tagStart+2).replace(/[\s<].*/,""),errorHandler.error("end tag name: "+tagName+" is not complete:"+config.tagName),end=tagStart+1+tagName.length):tagName.match(/\s</)&&(tagName=tagName.replace(/[\s<].*/,""),errorHandler.error("end tag name: "+tagName+" maybe not complete"),end=tagStart+1+tagName.length);var localNSMap=config.localNSMap,endMatch=config.tagName==tagName,endIgnoreCaseMach=endMatch||config.tagName&&config.tagName.toLowerCase()==tagName.toLowerCase();if(endIgnoreCaseMach){if(domBuilder.endElement(config.uri,config.localName,tagName),localNSMap)for(var prefix in localNSMap)domBuilder.endPrefixMapping(prefix);endMatch||errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config.tagName)}else parseStack.push(config);end++;break;case"?":locator&&position(tagStart),end=parseInstruction(source,tagStart,domBuilder);break;case"!":locator&&position(tagStart),end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes,currentNSMap=parseStack[parseStack.length-1].currentNSMap,end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler),len=el.length;if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)&&(el.closed=!0,!entityMap.nbsp&&errorHandler.warning("unclosed xml attribute")),locator&&len){for(var locator2=copyLocator(locator,{}),i=0,a;i<len;i++)a=el[i],position(a.offset),a.locator=copyLocator(locator,{});domBuilder.locator=locator2,appendElement$1(el,domBuilder,currentNSMap)&&parseStack.push(el),domBuilder.locator=locator}else appendElement$1(el,domBuilder,currentNSMap)&&parseStack.push(el);"http://www.w3.org/1999/xhtml"!==el.uri||el.closed?end++:end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder);}}catch(e){if(e instanceof ParseError$1)throw e;errorHandler.error("element parse error: "+e),end=-1}end>start?start=end:appendText(Math.max(tagStart,start)+1)}}function copyLocator(f,t){return t.lineNumber=f.lineNumber,t.columnNumber=f.columnNumber,t}function parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){function addAttribute(qname,value,startIndex){qname in el.attributeNames&&errorHandler.fatalError("Attribute "+qname+" redefined"),el.addValue(qname,value,startIndex)}for(var p=++start,s=0,attrName,value;!0;){var c=source.charAt(p);switch(c){case"=":if(1===s)attrName=source.slice(start,p),s=3;else if(2===s)s=3;else throw new Error("attribute equal must after attrName");break;case"'":case"\"":if(3===s||1===s){if(1===s&&(errorHandler.warning("attribute value must after \"=\""),attrName=source.slice(start,p)),start=p+1,p=source.indexOf(c,start),0<p)value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer),addAttribute(attrName,value,start-1),s=5;else throw new Error("attribute value no end '"+c+"' match");}else if(4==s)value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer),addAttribute(attrName,value,start),errorHandler.warning("attribute \""+attrName+"\" missed start quot("+c+")!!"),start=p+1,s=5;else throw new Error("attribute value must after \"=\"");break;case"/":switch(s){case 0:el.setTagName(source.slice(start,p));case 5:case 6:case 7:s=7,el.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')");}break;case"":return errorHandler.error("unexpected end of input"),0==s&&el.setTagName(source.slice(start,p)),p;case">":switch(s){case 0:el.setTagName(source.slice(start,p));case 5:case 6:case 7:break;case 4:case 1:value=source.slice(start,p),"/"===value.slice(-1)&&(el.closed=!0,value=value.slice(0,-1));case 2:2===s&&(value=attrName),4==s?(errorHandler.warning("attribute \""+value+"\" missed quot(\")!"),addAttribute(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)):(("http://www.w3.org/1999/xhtml"!==currentNSMap[""]||!value.match(/^(?:disabled|checked|selected)$/i))&&errorHandler.warning("attribute \""+value+"\" missed value!! \""+value+"\" instead!!"),addAttribute(value,value,start));break;case 3:throw new Error("attribute value missed!!");}return p;case"\x80":c=" ";default:if(" ">=c)switch(s){case 0:el.setTagName(source.slice(start,p)),s=6;break;case 1:attrName=source.slice(start,p),s=2;break;case 4:var value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);errorHandler.warning("attribute \""+value+"\" missed quot(\")!!"),addAttribute(attrName,value,start);case 5:s=6;}else switch(s){case 2:el.tagName,"http://www.w3.org/1999/xhtml"===currentNSMap[""]&&attrName.match(/^(?:disabled|checked|selected)$/i)||errorHandler.warning("attribute \""+attrName+"\" missed value!! \""+attrName+"\" instead2!!"),addAttribute(attrName,attrName,start),start=p,s=1;break;case 5:errorHandler.warning("attribute space is required\""+attrName+"\"!!");case 6:s=1,start=p;break;case 3:s=4,start=p;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to");}}p++}}function appendElement$1(el,domBuilder,currentNSMap){for(var tagName=el.tagName,localNSMap=null,i=el.length;i--;){var a=el[i],qName=a.qName,value=a.value,nsp=qName.indexOf(":");if(0<nsp)var prefix=a.prefix=qName.slice(0,nsp),localName=qName.slice(nsp+1),nsPrefix="xmlns"===prefix&&localName;else localName=qName,prefix=null,nsPrefix="xmlns"===qName&&"";a.localName=localName,!1!==nsPrefix&&(null==localNSMap&&(localNSMap={},_copy(currentNSMap,currentNSMap={})),currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value,a.uri="http://www.w3.org/2000/xmlns/",domBuilder.startPrefixMapping(nsPrefix,value))}for(var i=el.length;i--;){a=el[i];var prefix=a.prefix;prefix&&("xml"===prefix&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==prefix&&(a.uri=currentNSMap[prefix||""]))}var nsp=tagName.indexOf(":");0<nsp?(prefix=el.prefix=tagName.slice(0,nsp),localName=el.localName=tagName.slice(nsp+1)):(prefix=null,localName=el.localName=tagName);var ns=el.uri=currentNSMap[prefix||""];if(domBuilder.startElement(ns,localName,tagName,el),!el.closed)return el.currentNSMap=currentNSMap,el.localNSMap=localNSMap,!0;if(domBuilder.endElement(ns,localName,tagName),localNSMap)for(prefix in localNSMap)domBuilder.endPrefixMapping(prefix)}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd),text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text))return /^script$/i.test(tagName)?(domBuilder.characters(text,0,text.length),elEndStart):(text=text.replace(/&#?\w+;/g,entityReplacer),domBuilder.characters(text,0,text.length),elEndStart)}return elStartEnd+1}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];return null==pos&&(pos=source.lastIndexOf("</"+tagName+">"),pos<elStartEnd&&(pos=source.lastIndexOf("</"+tagName)),closeMap[tagName]=pos),pos<elStartEnd}function _copy(source,target){for(var n in source)target[n]=source[n]}function parseDCC(source,start,domBuilder,errorHandler){var next=source.charAt(start+2);switch(next){case"-":if("-"===source.charAt(start+3)){var end=source.indexOf("-->",start+4);return end>start?(domBuilder.comment(source,start+4,end-start-4),end+3):(errorHandler.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==source.substr(start+3,6)){var end=source.indexOf("]]>",start+9);return domBuilder.startCDATA(),domBuilder.characters(source,start+9,end-start-9),domBuilder.endCDATA(),end+3}var matchs=split(source,start),len=matchs.length;if(1<len&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0],pubid=!1,sysid=!1;3<len&&(/^public$/i.test(matchs[2][0])?(pubid=matchs[3][0],sysid=4<len&&matchs[4][0]):/^system$/i.test(matchs[2][0])&&(sysid=matchs[3][0]));var lastMatch=matchs[len-1];return domBuilder.startDTD(name,pubid,sysid),domBuilder.endDTD(),lastMatch.index+lastMatch[0].length}}return-1}function parseInstruction(source,start,domBuilder){var end=source.indexOf("?>",start);if(end){var match=source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return match?(match[0].length,domBuilder.processingInstruction(match[1],match[2]),end+2):-1}return-1}function ElementAttributes(){this.attributeNames={}}function split(source,start){var buf=[],reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g,match;for(reg.lastIndex=start,reg.exec(source);match=reg.exec(source);)if(buf.push(match),match[1])return buf}function copy(src,dest){for(var p in src)dest[p]=src[p]}function _extends(Class,Super){var pt=Class.prototype;if(!(pt instanceof Super)){function t(){}t.prototype=Super.prototype,t=new t,copy(pt,t),Class.prototype=pt=t}pt.constructor!=Class&&("function"!=typeof Class&&console.error("unknow Class:"+Class),pt.constructor=Class)}function DOMException(code,message){if(message instanceof Error)var error=message;else error=this,Error.call(this,ExceptionMessage[code]),this.message=ExceptionMessage[code],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return error.code=code,message&&(this.message=this.message+": "+message),error}function NodeList(){}function LiveNodeList(node,refresh){this._node=node,this._refresh=refresh,_updateLiveList(this)}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length),copy(ls,list),list._inc=inc}}function NamedNodeMap(){}function _findNodeIndex(list,node){for(var i=list.length;i--;)if(list[i]===node)return i}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr?list[_findNodeIndex(list,oldAttr)]=newAttr:list[list.length++]=newAttr,el){newAttr.ownerElement=el;var doc=el.ownerDocument;doc&&(oldAttr&&_onRemoveAttribute(doc,el,oldAttr),_onAddAttribute(doc,el,newAttr))}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,attr);if(0<=i){for(var lastIndex=list.length-1;i<lastIndex;)list[i]=list[++i];if(list.length=lastIndex,el){var doc=el.ownerDocument;doc&&(_onRemoveAttribute(doc,el,attr),attr.ownerElement=null)}}else throw DOMException(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr))}function DOMImplementation$1(features){if(this._features={},features)for(var feature in features)this._features=features[feature]}function Node(){}function _xmlEncoder(c){return"<"==c&&"&lt;"||">"==c&&"&gt;"||"&"==c&&"&amp;"||"\""==c&&"&quot;"||"&#"+c.charCodeAt()+";"}function _visitNode(node,callback){if(callback(node))return!0;if(node=node.firstChild)do if(_visitNode(node,callback))return!0;while(node=node.nextSibling)}function Document(){}function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++;var ns=newAttr.namespaceURI;"http://www.w3.org/2000/xmlns/"==ns&&(el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value)}function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++;var ns=newAttr.namespaceURI;"http://www.w3.org/2000/xmlns/"==ns&&delete el._nsMap[newAttr.prefix?newAttr.localName:""]}function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild)cs[cs.length++]=newChild;else{for(var child=el.firstChild,i=0;child;)cs[i++]=child,child=child.nextSibling;cs.length=i}}}function _removeChild(parentNode,child){var previous=child.previousSibling,next=child.nextSibling;return previous?previous.nextSibling=next:parentNode.firstChild=next,next?next.previousSibling=previous:parentNode.lastChild=previous,_onUpdateChild(parentNode.ownerDocument,parentNode),child}function _insertBefore(parentNode,newChild,nextChild){var cp=newChild.parentNode;if(cp&&cp.removeChild(newChild),newChild.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=newChild.firstChild;if(null==newFirst)return newChild;var newLast=newChild.lastChild}else newFirst=newLast=newChild;var pre=nextChild?nextChild.previousSibling:parentNode.lastChild;newFirst.previousSibling=pre,newLast.nextSibling=nextChild,pre?pre.nextSibling=newFirst:parentNode.firstChild=newFirst,null==nextChild?parentNode.lastChild=newLast:nextChild.previousSibling=newLast;do newFirst.parentNode=parentNode;while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));return _onUpdateChild(parentNode.ownerDocument||parentNode,parentNode),newChild.nodeType==DOCUMENT_FRAGMENT_NODE&&(newChild.firstChild=newChild.lastChild=null),newChild}function _appendSingleChild(parentNode,newChild){var cp=newChild.parentNode;if(cp){var pre=parentNode.lastChild;cp.removeChild(newChild);var pre=parentNode.lastChild}var pre=parentNode.lastChild;return newChild.parentNode=parentNode,newChild.previousSibling=pre,newChild.nextSibling=null,pre?pre.nextSibling=newChild:parentNode.firstChild=newChild,parentNode.lastChild=newChild,_onUpdateChild(parentNode.ownerDocument,parentNode,newChild),newChild}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(isHtml,nodeFilter){var buf=[],refNode=9==this.nodeType&&this.documentElement||this,prefix=refNode.prefix,uri=refNode.namespaceURI;if(uri&&null==prefix){var prefix=refNode.lookupPrefix(uri);if(null==prefix)var visibleNamespaces=[{namespace:uri,prefix:null}]}return serializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces),buf.join("")}function needNamespaceDefine(node,isHTML,visibleNamespaces){var prefix=node.prefix||"",uri=node.namespaceURI;if(!prefix&&!uri)return!1;if("xml"===prefix&&"http://www.w3.org/XML/1998/namespace"===uri||"http://www.w3.org/2000/xmlns/"==uri)return!1;for(var i=visibleNamespaces.length;i--;){var ns=visibleNamespaces[i];if(ns.prefix==prefix)return ns.namespace!=uri}return!0}function serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){if(nodeFilter){if(node=nodeFilter(node),!node)return;if("string"==typeof node)return void buf.push(node)}switch(node.nodeType){case ELEMENT_NODE:visibleNamespaces||(visibleNamespaces=[]),visibleNamespaces.length;var attrs=node.attributes,len=attrs.length,child=node.firstChild,nodeName=node.tagName;isHTML="http://www.w3.org/1999/xhtml"===node.namespaceURI||isHTML,buf.push("<",nodeName);for(var i=0,attr;i<len;i++)attr=attrs.item(i),"xmlns"==attr.prefix?visibleNamespaces.push({prefix:attr.localName,namespace:attr.value}):"xmlns"==attr.nodeName&&visibleNamespaces.push({prefix:"",namespace:attr.value});for(var i=0,attr;i<len;i++){if(attr=attrs.item(i),needNamespaceDefine(attr,isHTML,visibleNamespaces)){var prefix=attr.prefix||"",uri=attr.namespaceURI,ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,"=\"",uri,"\""),visibleNamespaces.push({prefix:prefix,namespace:uri})}serializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces)}if(needNamespaceDefine(node,isHTML,visibleNamespaces)){var prefix=node.prefix||"",uri=node.namespaceURI;if(uri){var ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,"=\"",uri,"\""),visibleNamespaces.push({prefix:prefix,namespace:uri})}}if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){if(buf.push(">"),isHTML&&/^script$/i.test(nodeName))for(;child;)child.data?buf.push(child.data):serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;else for(;child;)serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;buf.push("</",nodeName,">")}else buf.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var child=node.firstChild;child;)serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;return;case ATTRIBUTE_NODE:return buf.push(" ",node.name,"=\"",node.value.replace(/[<&"]/g,_xmlEncoder),"\"");case TEXT_NODE:return buf.push(node.data.replace(/[<&]/g,_xmlEncoder).replace(/]]>/g,"]]&gt;"));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("<!--",node.data,"-->");case DOCUMENT_TYPE_NODE:var pubid=node.publicId,sysid=node.systemId;if(buf.push("<!DOCTYPE ",node.name),pubid)buf.push(" PUBLIC ",pubid),sysid&&"."!=sysid&&buf.push(" ",sysid),buf.push(">");else if(sysid&&"."!=sysid)buf.push(" SYSTEM ",sysid,">");else{var sub=node.internalSubset;sub&&buf.push(" [",sub,"]"),buf.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName);}}function _importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:node2=node.cloneNode(!1),node2.ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=!0;}if(node2||(node2=node.cloneNode(!1)),node2.ownerDocument=doc,node2.parentNode=null,deep)for(var child=node.firstChild;child;)node2.appendChild(_importNode(doc,child,deep)),child=child.nextSibling;return node2}function _cloneNode(doc,node,deep){var node2=new node.constructor;for(var n in node){var v=node[n];"object"!=_typeof(v)&&v!=node2[n]&&(node2[n]=v)}switch(node.childNodes&&(node2.childNodes=new NodeList),node2.ownerDocument=doc,node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes,attrs2=node2.attributes=new NamedNodeMap,len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++)node2.setAttributeNode(_cloneNode(doc,attrs.item(i),!0));break;case ATTRIBUTE_NODE:deep=!0;}if(deep)for(var child=node.firstChild;child;)node2.appendChild(_cloneNode(doc,child,deep)),child=child.nextSibling;return node2}function __set__(object,key,value){object[key]=value}function DOMParser(options){this.options=options||{locator:{}}}function buildErrorHandler(errorImpl,domBuilder,locator){function build(key){var fn=errorImpl[key];!fn&&isCallback&&(fn=2==errorImpl.length?function(msg){errorImpl(key,msg)}:errorImpl),errorHandler[key]=fn&&function(msg){fn("[xmldom "+key+"]\t"+msg+_locator(locator))}||function(){}}if(!errorImpl){if(domBuilder instanceof DOMHandler)return domBuilder;errorImpl=domBuilder}var errorHandler={},isCallback=errorImpl instanceof Function;return locator=locator||{},build("warning"),build("error"),build("fatalError"),errorHandler}function DOMHandler(){this.cdata=!1}function position(locator,node){node.lineNumber=locator.lineNumber,node.columnNumber=locator.columnNumber}function _locator(l){if(l)return"\n@"+(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]"}function _toString(chars,start,length){return"string"==typeof chars?chars.substr(start,length):chars.length>=start+length||start?new java.lang.String(chars,start,length)+"":chars}function appendElement(hander,node){hander.currentElement?hander.currentElement.appendChild(node):hander.doc.appendChild(node)}var commonjsGlobal="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,dist={exports:{}},main={},mathmlToLatex={},mathmlElementToLatexConverterAdapter={},converters={},math={},mathmlElementToLatexConverter={},normalizeWhitespace={},hasRequiredMathmlElementToLatexConverter;Object.defineProperty(normalizeWhitespace,"__esModule",{value:!0}),normalizeWhitespace.normalizeWhiteSpaces=void 0;normalizeWhitespace.normalizeWhiteSpaces=function normalizeWhiteSpaces(str){return str.replace(/\s+/g," ")};var mi={},helpers={},wrappers={},bracket={},wrapper={},hasRequiredMath;Object.defineProperty(wrapper,"__esModule",{value:!0}),wrapper.Wrapper=void 0;var Wrapper=function(){function Wrapper(open,close){this._open=open,this._close=close}return Wrapper.prototype.wrap=function(str){return this._open+str+this._close},Wrapper}();wrapper.Wrapper=Wrapper,Object.defineProperty(bracket,"__esModule",{value:!0}),bracket.BracketWrapper=void 0;var BracketWrapper=function(){function BracketWrapper(){this._open="{",this._close="}"}return BracketWrapper.prototype.wrap=function(str){return new wrapper.Wrapper(this._open,this._close).wrap(str)},BracketWrapper}();bracket.BracketWrapper=BracketWrapper;var parenthesis={};Object.defineProperty(parenthesis,"__esModule",{value:!0}),parenthesis.ParenthesisWrapper=void 0;var ParenthesisWrapper=function(){function ParenthesisWrapper(){this._open="\\left(",this._close="\\right)",this._closed=/^(\\left\(\\right.).*(\\left.\\right\))$/i}return ParenthesisWrapper.prototype.wrap=function(str){return new wrapper.Wrapper(this._open,this._close).wrap(str)},ParenthesisWrapper.prototype.wrapIfMoreThanOneChar=function(str){return 1>=str.length||!0==this._closed.test(str)?str:this.wrap(str)},ParenthesisWrapper}();parenthesis.ParenthesisWrapper=ParenthesisWrapper;var generic={};Object.defineProperty(generic,"__esModule",{value:!0}),generic.GenericWrapper=void 0;var GenericWrapper=function(){function GenericWrapper(open,close){this._open="\\left"+open,this._close="\\right"+close}return GenericWrapper.prototype.wrap=function(str){return new wrapper.Wrapper(this._open,this._close).wrap(str)},GenericWrapper}();generic.GenericWrapper=GenericWrapper,function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericWrapper=exports.ParenthesisWrapper=exports.BracketWrapper=void 0;var bracket_1=bracket;Object.defineProperty(exports,"BracketWrapper",{enumerable:!0,get:function get(){return bracket_1.BracketWrapper}});var parenthesis_1=parenthesis;Object.defineProperty(exports,"ParenthesisWrapper",{enumerable:!0,get:function get(){return parenthesis_1.ParenthesisWrapper}});var generic_1=generic;Object.defineProperty(exports,"GenericWrapper",{enumerable:!0,get:function get(){return generic_1.GenericWrapper}})}(wrappers);var joinWithManySeparators={};Object.defineProperty(joinWithManySeparators,"__esModule",{value:!0}),joinWithManySeparators.JoinWithManySeparators=void 0;var JoinWithManySeparators=function(){function JoinWithManySeparators(separators){this._separators=separators}return JoinWithManySeparators.join=function(arr,separators){return new JoinWithManySeparators(separators)._join(arr)},JoinWithManySeparators.prototype._join=function(arr){var _this=this;return arr.reduce(function(joinedStr,currentStr,currentIndex,strArr){var separator=currentIndex===strArr.length-1?"":_this._get(currentIndex);return joinedStr+currentStr+separator},"")},JoinWithManySeparators.prototype._get=function(index){return this._separators[index]?this._separators[index]:0<this._separators.length?this._separators[this._separators.length-1]:","},JoinWithManySeparators}();joinWithManySeparators.JoinWithManySeparators=JoinWithManySeparators;var syntax={},allMathOperatorsByChar={},hasRequiredHelpers;Object.defineProperty(allMathOperatorsByChar,"__esModule",{value:!0}),allMathOperatorsByChar.allMathOperatorsByChar=void 0,allMathOperatorsByChar.allMathOperatorsByChar={_:"\\underline","&#x23E1;":"\\underbrace","&#x23E0;":"\\overbrace","&#x23DF;":"\\underbrace","&#x23DE;":"\\overbrace","&#x23DD;":"\\underbrace","&#x23DC;":"\\overbrace","&#x23B5;":"\\underbrace","&#x23B4;":"\\overbrace","&#x20DC;":"\\square","&#x20DB;":"\\square","&#x2064;":"","&#x2057;":"''''","&#x203E;":"\\bar","&#x2037;":"```","&#x2036;":"``","&#x2035;":"`","&#x2034;":"'''","&#x2033;":"''","&#x201F;":"``","&#x201E;":",,","&#x201B;":"`","&#x201A;":",","&#x302;":"\\hat","&#x2F7;":"\\sim","&#x2DD;":"\\sim","&#x2DC;":"\\sim","&#x2DA;":"\\circ","&#x2D9;":"\\cdot","&#x2D8;":"","&#x2CD;":"\\_","&#x2CB;":"\u02CB","&#x2CA;":"\u02CA","&#x2C9;":"\u02C9","&#x2C7;":"","&#x2C6;":"\\hat","&#xBA;":"o","&#xB9;":"1","&#xB8;":"\xB8","&#xB4;":"\xB4","&#xB3;":"3","&#xB2;":"2","&#xB0;":"\\circ","&#xAF;":"\\bar","&#xAA;":"a","&#xA8;":"\\cdot\\cdot","~":"\\sim","`":"`","^":"\\hat","--":"--","++":"++","&amp;":"\\&","&#x2061;":"","&#x221C;":"\\sqrt[4]{}","&#x221B;":"\\sqrt[3]{}","&#x221A;":"\\sqrt{}","&#x2146;":"d","&#x2145;":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","&#x266F;":"\\#","&#x266E;":"","&#x266D;":"","&#x2032;":"'","&lt;>":"<>","**":"\\star\\star","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x2299;":"\\bigodot","&#xAC;":"\\neg","&#x2222;":"\\measuredangle","&#x2221;":"\\measuredangle","&#x2220;":"\\angle","&#xF7;":"\\div","/":"/","&#x2216;":"\\backslash","\\":"\\backslash","%":"\\%","&#x2297;":"\\bigotimes","&#xB7;":"\\cdot","&#x2A3F;":"\\coprod","&#x2A2F;":"\\times","&#x22C5;":"\\cdot","&#x22A1;":"\\boxdot","&#x22A0;":"\\boxtimes","&#x2062;":"","&#x2043;":"-","&#x2022;":"\\cdot","&#xD7;":"\\times",".":".","*":"\\star","&#x222A;":"\\cup","&#x2229;":"\\cap","&#x2210;":"\\coprod","&#x220F;":"\\prod","&#x2240;":"","&#x2AFF;":"","&#x2AFC;":"\\mid\\mid\\mid","&#x2A09;":"\\times","&#x2A08;":"","&#x2A07;":"","&#x2A06;":"\\sqcup","&#x2A05;":"\\sqcap","&#x2A02;":"\\otimes","&#x2A00;":"\\odot","&#x22C2;":"\\cap","&#x22C1;":"\\vee","&#x22C0;":"\\wedge","&#x2A04;":"\\uplus","&#x2A03;":"\\cup","&#x22C3;":"\\cup","&#x2A1C;":"\\underline{\\int}","&#x2A1B;":"\\overline{\\int}","&#x2A1A;":"\\int","&#x2A19;":"\\int","&#x2A18;":"\\int","&#x2A17;":"\\int","&#x2A16;":"\\oint","&#x2A15;":"\\oint","&#x2A14;":"\\int","&#x2A13;":"\\int","&#x2A12;":"\\int","&#x2A11;":"\\int","&#x2A10;":"\\int","&#x2A0F;":"\\bcancel{\\int}","&#x2A0E;":"","&#x2A0D;":"\\hcancel{\\int}","&#x2A0C;":"\\iiiint","&#x2233;":"\\oint","&#x2232;":"\\oint","&#x2231;":"\\int","&#x2230;":"\\oiint","&#x222F;":"\\oiint","&#x222E;":"\\oint","&#x222B;":"\\int","&#x2A01;":"\\oplus","&#x2298;":"\\oslash","&#x2296;":"\\ominus","&#x2295;":"\\oplus","&#x222D;":"\\iiint","&#x222C;":"\\iint","&#x2A0B;":"","&#x2A0A;":"","&#x2211;":"\\sum","&#x229F;":"\\boxminus","&#x229E;":"\\boxplus","&#x2214;":"\\dot{+}","&#x2213;":"+-","&#x2212;":"-","&#xB1;":"\\pm","-":"-","+":"+","&#x2B46;":"\\Rrightarrow","&#x2B45;":"\\Lleftarrow","&#x29F4;":":\\rightarrow","&#x29EF;":"","&#x29DF;":"\\bullet-\\bullet","&#x299F;":"\\angle","&#x299E;":"\\measuredangle","&#x299D;":"\\measuredangle","&#x299C;":"\\perp","&#x299B;":"\\measuredangle","&#x299A;":"","&#x2999;":"\\vdots","&#x297F;":"","&#x297E;":"","&#x297D;":"\\prec","&#x297C;":"\\succ","&#x297B;":"\\underset{\\rightarrow}{\\supset}","&#x297A;":"","&#x2979;":"\\underset{\\rightarrow}{\\subset}","&#x2978;":"\\underset{\\rightarrow}{>}","&#x2977;":"","&#x2976;":"\\underset{\\leftarrow}{<}","&#x2975;":"\\underset{\\approx}{\\rightarrow}","&#x2974;":"\\underset{\\sim}{\\rightarrow}","&#x2973;":"\\underset{\\sim}{\\leftarrow}","&#x2972;":"\\overset{\\sim}{\\rightarrow}","&#x2971;":"\\overset{=}{\\rightarrow}","&#x2970;":"","&#x296F;":"","&#x296E;":"","&#x296D;":"\\overline{\\rightharpoondown}","&#x296C;":"\\underline{\\rightharpoonup}","&#x296B;":"\\overline{\\leftharpoondown}","&#x296A;":"\\underline{\\leftharpoonup}","&#x2969;":"\\rightleftharpoons","&#x2968;":"\\rightleftharpoons","&#x2967;":"\\rightleftharpoons","&#x2966;":"\\rightleftharpoons","&#x2965;":"\\Downarrow","&#x2964;":"\\Rightarrow","&#x2963;":"\\Uparrow","&#x2962;":"\\Leftarrow","&#x2961;":"\\downarrow","&#x2960;":"\\uparrow","&#x295F;":"\\rightarrow","&#x295E;":"\\leftarrow","&#x295D;":"\\downarrow","&#x295C;":"\\uparrow","&#x295B;":"\\rightarrow","&#x295A;":"\\leftarrow","&#x2959;":"\\downarrow","&#x2958;":"\\uparrow","&#x2957;":"\\rightarrow","&#x2956;":"\\leftarrow","&#x2955;":"\\downarrow","&#x2954;":"\\uparrow","&#x2953;":"\\rightarrow","&#x2952;":"\\leftarrow","&#x2951;":"\\updownarrow","&#x2950;":"\\leftrightarrow","&#x294F;":"\\updownarrow","&#x294E;":"\\leftrightarrow","&#x294D;":"\\updownarrow","&#x294C;":"\\updownarrow","&#x294B;":"\\leftrightarrow","&#x294A;":"\\leftrightarrow","&#x2949;":"","&#x2948;":"\\leftrightarrow","&#x2947;":"\\nrightarrow","&#x2946;":"","&#x2945;":"","&#x2944;":"\\rightleftarrows","&#x2943;":"\\leftrightarrows","&#x2942;":"\\rightleftarrows","&#x2941;":"\\circlearrowright","&#x2940;":"\\circlearrowleft","&#x293F;":"\\rightarrow","&#x293E;":"\\leftarrow","&#x293D;":"","&#x293C;":"","&#x293B;":"","&#x293A;":"","&#x2939;":"","&#x2938;":"","&#x2937;":"\\Rsh","&#x2936;":"\\Lsh","&#x2935;":"\\downarrow","&#x2934;":"\\uparrow","&#x2933;":"\\leadsto","&#x2932;":"","&#x2931;":"","&#x2930;":"","&#x292F;":"","&#x292E;":"","&#x292D;":"","&#x292C;":"\\times","&#x292B;":"\\times","&#x292A;":"","&#x2929;":"","&#x2928;":"","&#x2927;":"","&#x2926;":"","&#x2925;":"","&#x2924;":"","&#x2923;":"","&#x2922;":"","&#x2921;":"","&#x2920;":"\\mapsto\\cdot","&#x291F;":"\\cdot\\leftarrow","&#x291E;":"\\rightarrow\\cdot","&#x291D;":"\\leftarrow","&#x291C;":"\\rightarrow","&#x291B;":"\\leftarrow","&#x291A;":"\\rightarrow","&#x2919;":"\\leftarrow","&#x2918;":"\\rightarrow","&#x2917;":"\\rightarrow","&#x2916;":"\\rightarrow","&#x2915;":"\\rightarrow","&#x2914;":"\\rightarrow","&#x2913;":"\\downarrow","&#x2912;":"\\uparrow","&#x2911;":"\\rightarrow","&#x2910;":"\\rightarrow","&#x290F;":"\\rightarrow","&#x290E;":"\\leftarrow","&#x290D;":"\\rightarrow","&#x290C;":"\\leftarrow","&#x290B;":"\\Downarrow","&#x290A;":"\\Uparrow","&#x2909;":"\\uparrow","&#x2908;":"\\downarrow","&#x2907;":"\\Rightarrow","&#x2906;":"\\Leftarrow","&#x2905;":"\\mapsto","&#x2904;":"\\nLeftrightarrow","&#x2903;":"\\nRightarrow","&#x2902;":"\\nLeftarrow","&#x2901;":"\\rightsquigarrow","&#x2900;":"\\rightsquigarrow","&#x27FF;":"\\rightsquigarrow","&#x27FE;":"\\Rightarrow","&#x27FD;":"\\Leftarrow","&#x27FC;":"\\mapsto","&#x27FB;":"\\leftarrow","&#x27FA;":"\\Longleftrightarrow","&#x27F9;":"\\Longrightarrow","&#x27F8;":"\\Longleftarrow","&#x27F7;":"\\leftrightarrow","&#x27F6;":"\\rightarrow","&#x27F5;":"\\leftarrow","&#x27F1;":"\\Downarrow","&#x27F0;":"\\Uparrow","&#x22B8;":"\\rightarrow","&#x21FF;":"\\leftrightarrow","&#x21FE;":"\\rightarrow","&#x21FD;":"\\leftarrow","&#x21FC;":"\\nleftrightarrow","&#x21FB;":"\\nrightarrow","&#x21FA;":"\\nleftarrow","&#x21F9;":"\\nleftrightarrow","&#x21F8;":"\\nrightarrow","&#x21F7;":"\\nleftarrow","&#x21F6;":"\\Rrightarrow","&#x21F5;":"","&#x21F4;":"\\rightarrow","&#x21F3;":"\\Updownarrow","&#x21F2;":"\\searrow","&#x21F1;":"\\nwarrow","&#x21F0;":"\\Leftarrow","&#x21EF;":"\\Uparrow","&#x21EE;":"\\Uparrow","&#x21ED;":"\\Uparrow","&#x21EC;":"\\Uparrow","&#x21EB;":"\\Uparrow","&#x21EA;":"\\Uparrow","&#x21E9;":"\\Downarrow","&#x21E8;":"\\Rightarrow","&#x21E7;":"\\Uparrow","&#x21E6;":"\\Leftarrow","&#x21E5;":"\\rightarrow","&#x21E4;":"\\leftarrow","&#x21E3;":"\\downarrow","&#x21E2;":"\\rightarrow","&#x21E1;":"\\uparrow","&#x21E0;":"\\leftarrow","&#x21DF;":"\\downarrow","&#x21DE;":"\\uparrow","&#x21DD;":"\\rightsquigarrow","&#x21DC;":"\\leftarrow","&#x21DB;":"\\Rrightarrow","&#x21DA;":"\\Lleftarrow","&#x21D9;":"\\swarrow","&#x21D8;":"\\searrow","&#x21D7;":"\\nearrow","&#x21D6;":"\\nwarrow","&#x21D5;":"\\Updownarrow","&#x21D4;":"\\Leftrightarrow","&#x21D3;":"\\Downarrow","&#x21D2;":"\\Rightarrow","&#x21D1;":"\\Uparrow","&#x21D0;":"\\Leftarrow","&#x21CF;":"\\nRightarrow","&#x21CE;":"\\nLeftrightarrow","&#x21CD;":"\\nLeftarrow","&#x21CC;":"\\rightleftharpoons","&#x21CB;":"\\leftrightharpoons","&#x21CA;":"\\downdownarrows","&#x21C9;":"\\rightrightarrows","&#x21C8;":"\\upuparrows","&#x21C7;":"\\leftleftarrows","&#x21C6;":"\\leftrightarrows","&#x21C5;":"","&#x21C4;":"\\rightleftarrows","&#x21C3;":"\\downharpoonleft","&#x21C2;":"\\downharpoonright","&#x21C1;":"\\rightharpoondown","&#x21C0;":"\\rightharpoonup","&#x21BF;":"\\upharpoonleft","&#x21BE;":"\\upharpoonright","&#x21BD;":"\\leftharpoondown","&#x21BC;":"\\leftharpoonup","&#x21BB;":"\\circlearrowright","&#x21BA;":"\\circlearrowleft","&#x21B9;":"\\leftrightarrows","&#x21B8;":"\\overline{\\nwarrow}","&#x21B7;":"\\curvearrowright","&#x21B6;":"\\curvearrowleft","&#x21B5;":"\\swarrow","&#x21B4;":"\\searrow","&#x21B3;":"\\Rsh","&#x21B2;":"\\Lsh","&#x21B1;":"\\Rsh","&#x21B0;":"\\Lsh","&#x21AF;":"\\swarrow","&#x21AE;":"","&#x21AD;":"\\leftrightsquigarrow","&#x21AC;":"\\looparrowright","&#x21AB;":"\\looparrowleft","&#x21AA;":"\\hookrightarrow","&#x21A9;":"\\hookleftarrow","&#x21A8;":"\\underline{\\updownarrow}","&#x21A7;":"\\downarrow","&#x21A6;":"\\rightarrowtail","&#x21A5;":"\\uparrow","&#x21A4;":"\\leftarrowtail","&#x21A3;":"\\rightarrowtail","&#x21A2;":"\\leftarrowtail","&#x21A1;":"\\downarrow","&#x21A0;":"\\twoheadrightarrow","&#x219F;":"\\uparrow","&#x219E;":"\\twoheadleftarrow","&#x219D;":"\\nearrow","&#x219C;":"\\nwarrow","&#x219B;":"","&#x219A;":"","&#x2199;":"\\swarrow","&#x2198;":"\\searrow","&#x2197;":"\\nearrow","&#x2196;":"\\nwarrow","&#x2195;":"\\updownarrow","&#x2194;":"\\leftrightarrow","&#x2193;":"\\downarrow","&#x2192;":"\\rightarrow","&#x2191;":"\\uparrow","&#x2190;":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\left|\\right.","&#x2AFE;":"","&#x2AFD;":"//","&#x2AFB;":"///","&#x2AFA;":"","&#x2AF9;":"","&#x2AF8;":"","&#x2AF7;":"","&#x2AF6;":"\\vdots","&#x2AF5;":"","&#x2AF4;":"","&#x2AF3;":"","&#x2AF2;":"\\nparallel","&#x2AF1;":"","&#x2AF0;":"","&#x2AEF;":"","&#x2AEE;":"\\bcancel{\\mid}","&#x2AED;":"","&#x2AEC;":"","&#x2AEB;":"","&#x2AEA;":"","&#x2AE9;":"","&#x2AE8;":"\\underline{\\perp}","&#x2AE7;":"\\overline{\\top}","&#x2AE6;":"","&#x2AE5;":"","&#x2AE4;":"","&#x2AE3;":"","&#x2AE2;":"","&#x2AE1;":"","&#x2AE0;":"\\perp","&#x2ADF;":"\\top","&#x2ADE;":"\\dashv","&#x2ADD;&#x338;":"","&#x2ADD;":"","&#x2ADB;":"\\pitchfork","&#x2ADA;":"","&#x2AD9;":"","&#x2AD8;":"","&#x2AD7;":"","&#x2AD6;":"","&#x2AD5;":"","&#x2AD4;":"","&#x2AD3;":"","&#x2AD2;":"","&#x2AD1;":"","&#x2AD0;":"","&#x2ACF;":"","&#x2ACE;":"","&#x2ACD;":"","&#x2ACC;":"\\underset{\\neq}{\\supset}","&#x2ACB;":"\\underset{\\neq}{\\subset}","&#x2ACA;":"\\underset{\\approx}{\\supset}","&#x2AC9;":"\\underset{\\approx}{\\subset}","&#x2AC8;":"\\underset{\\sim}{\\supset}","&#x2AC7;":"\\underset{\\sim}{\\subset}","&#x2AC6;":"\\supseteqq","&#x2AC5;":"\\subseteqq","&#x2AC4;":"\\dot{\\supseteq}","&#x2AC3;":"\\dot{\\subseteq}","&#x2AC2;":"\\underset{\\times}{\\supset}","&#x2AC1;":"\\underset{\\times}{\\subset}","&#x2AC0;":"\\underset{+}{\\supset}","&#x2ABF;":"\\underset{+}{\\subset}","&#x2ABE;":"","&#x2ABD;":"","&#x2ABC;":"\\gg ","&#x2ABB;":"\\ll","&#x2ABA;":"\\underset{\\cancel{\\approx}}{\\succ}","&#x2AB9;":"\\underset{\\cancel{\\approx}}{\\prec}","&#x2AB8;":"\\underset{\\approx}{\\succ}","&#x2AB7;":"\\underset{\\approx}{\\prec}","&#x2AB6;":"\\underset{\\cancel{=}}{\\succ}","&#x2AB5;":"\\underset{\\cancel{=}}{\\prec}","&#x2AB4;":"\\underset{=}{\\succ}","&#x2AB3;":"\\underset{=}{\\prec}","&#x2AB2;":"","&#x2AB1;":"","&#x2AAE;":"","&#x2AAD;":"\\underline{\\hcancel{>}}","&#x2AAC;":"\\underline{\\hcancel{>}}","&#x2AAB;":"\\hcancel{>}","&#x2AAA;":"\\hcancel{<}","&#x2AA9;":"","&#x2AA8;":"","&#x2AA7;":"\\vartriangleright","&#x2AA6;":"\\vartriangleleft","&#x2AA5;":"><","&#x2AA4;":"><","&#x2AA3;":"\\underline{\\ll}","&#x2AA2;&#x338;":"\\cancel{\\gg}","&#x2AA2;":"\\gg","&#x2AA1;&#x338;":"\\cancel{\\ll}","&#x2AA1;":"\\ll","&#x2AA0;":"\\overset{\\sim}{\\geqq}","&#x2A9F;":"\\overset{\\sim}{\\leqq}","&#x2A9E;":"\\overset{\\sim}{>}","&#x2A9D;":"\\overset{\\sim}{<}","&#x2A9C;":"","&#x2A9B;":"","&#x2A9A;":"\\overset{=}{>}","&#x2A99;":"\\overset{=}{<}","&#x2A98;":"","&#x2A97;":"","&#x2A96;":"","&#x2A95;":"","&#x2A94;":"","&#x2A93;":"","&#x2A92;":"\\underset{=}{\\gtrless}","&#x2A91;":"\\underset{=}{\\lessgtr}","&#x2A90;":"\\underset{<}{\\gtrsim}","&#x2A8F;":"\\underset{>}{\\lesssim}","&#x2A8E;":"\\underset{\\simeq}{>}","&#x2A8D;":"\\underset{\\simeq}{<}","&#x2A8C;":"\\gtreqqless","&#x2A8B;":"\\lesseqqgtr","&#x2A8A;":"\\underset{\\cancel{\\approx}}{>}","&#x2A89;":"\\underset{\\approx}{<}","&#x2A86;":"\\underset{\\approx}{>}","&#x2A85;":"\\underset{\\approx}{<}","&#x2A84;":"","&#x2A83;":"","&#x2A82;":"","&#x2A81;":"","&#x2A80;":"","&#x2A7F;":"","&#x2A7E;&#x338;":"\\bcancel{\\geq}","&#x2A7E;":"\\geq","&#x2A7D;&#x338;":"\\bcancel{\\leq}","&#x2A7D;":"\\leq","&#x2A7C;":"","&#x2A7B;":"","&#x2A7A;":"","&#x2A79;":"","&#x2A78;":"\\overset{\\dots}{\\equiv}","&#x2A77;":"","&#x2A76;":"===","&#x2A75;":"==","&#x2A74;":"::=","&#x2A73;":"","&#x2A72;":"\\underset{=}{+}","&#x2A71;":"\\overset{=}{+}","&#x2A70;":"\\overset{\\approx}{=}","&#x2A6F;":"\\overset{\\wedge}{=}","&#x2A6E;":"\\overset{*}{=}","&#x2A6D;":"\\dot{\\approx}","&#x2A6C;":"","&#x2A6B;":"","&#x2A6A;":"\\dot{\\sim}","&#x2A69;":"","&#x2A68;":"","&#x2A67;":"\\dot{\\equiv}","&#x2A66;":"\\underset{\\cdot}{=}","&#x2A65;":"","&#x2A64;":"","&#x2A63;":"\\underset{=}{\\vee}","&#x2A62;":"\\overset{=}{\\vee}","&#x2A61;":"ul(vv)","&#x2A60;":"\\underset{=}{\\wedge}","&#x2A5F;":"\\underline{\\wedge}","&#x2A5E;":"\\overset{=}{\\wedge}","&#x2A5D;":"\\hcancel{\\vee}","&#x2A5C;":"\\hcancel{\\wedge}","&#x2A5B;":"","&#x2A5A;":"","&#x2A59;":"","&#x2A58;":"\\vee","&#x2A57;":"\\wedge","&#x2A56;":"","&#x2A55;":"","&#x2A54;":"","&#x2A53;":"","&#x2A52;":"\\dot{\\vee}","&#x2A51;":"\\dot{\\wedge}","&#x2A50;":"","&#x2A4F;":"","&#x2A4E;":"","&#x2A4D;":"\\overline{\\cap}","&#x2A4C;":"\\overline{\\cup}","&#x2A4B;":"","&#x2A4A;":"","&#x2A49;":"","&#x2A48;":"","&#x2A47;":"","&#x2A46;":"","&#x2A45;":"","&#x2A44;":"","&#x2A43;":"\\overline{\\cap}","&#x2A42;":"\\overline{\\cup}","&#x2A41;":"","&#x2A40;":"","&#x2A3E;":"","&#x2A3D;":"\\llcorner","&#x2A3C;":"\\lrcorner","&#x2A3B;":"","&#x2A3A;":"","&#x2A39;":"","&#x2A38;":"","&#x2A37;":"","&#x2A36;":"\\hat{\\otimes}","&#x2A35;":"","&#x2A34;":"","&#x2A33;":"","&#x2A32;":"\\underline{\\times}","&#x2A31;":"\\underline{\\times}","&#x2A30;":"\\dot{\\times}","&#x2A2E;":"","&#x2A2D;":"","&#x2A2C;":"","&#x2A2B;":"","&#x2A2A;":"","&#x2A29;":"","&#x2A28;":"","&#x2A27;":"","&#x2A26;":"\\underset{\\sim}{+}","&#x2A25;":"\\underset{\\circ}{+}","&#x2A24;":"\\overset{\\sim}{+}","&#x2A23;":"\\hat{+}","&#x2A22;":"\\dot{+}","&#x2A21;":"\\upharpoonright","&#x2A20;":">>","&#x2A1F;":"","&#x2A1E;":"\\triangleleft","&#x2A1D;":"\\bowtie","&#x29FF;":"","&#x29FE;":"+","&#x29FB;":"\\hcancel{|||}","&#x29FA;":"\\hcancel{||}","&#x29F9;":"\\backslash","&#x29F8;":"/","&#x29F7;":"hcancel{\backslash}","&#x29F6;":"","&#x29F5;":"\\backslash","&#x29F2;":"\\Phi","&#x29F1;":"","&#x29F0;":"","&#x29EE;":"","&#x29ED;":"","&#x29EC;":"","&#x29EB;":"\\lozenge","&#x29EA;":"","&#x29E9;":"","&#x29E8;":"","&#x29E7;":"\\ddagger","&#x29E2;":"\\sqcup\\sqcup","&#x29E1;":"","&#x29E0;":"\\square","&#x29DE;":"","&#x29DD;":"","&#x29DC;":"","&#x29DB;":"\\{\\{","&#x29D9;":"\\{","&#x29D8;":"\\}","&#x29D7;":"","&#x29D6;":"","&#x29D5;":"\\bowtie","&#x29D4;":"\\bowtie","&#x29D3;":"\\bowtie","&#x29D2;":"\\bowtie","&#x29D1;":"\\bowtie","&#x29D0;&#x338;":"| \\not\\triangleright","&#x29D0;":"| \\triangleright","&#x29CF;&#x338;":"\\not\\triangleleft |","&#x29CF;":"\\triangleleft |","&#x29CE;":"","&#x29CD;":"\\triangle","&#x29CC;":"","&#x29CB;":"\\underline{\\triangle}","&#x29CA;":"\\dot{\\triangle}","&#x29C9;":"","&#x29C8;":"\\boxed{\\circ}","&#x29C7;":"\\boxed{\\circ}","&#x29C6;":"\\boxed{\\rightarrow}","&#x29C5;":"\\bcancel{\\square}","&#x29C4;":"\\cancel{\\square}","&#x29C3;":"\\odot","&#x29C2;":"\\odot","&#x29BF;":"\\odot","&#x29BE;":"\\odot","&#x29BD;":"\\varnothing","&#x29BC;":"\\oplus","&#x29BB;":"\\otimes","&#x29BA;":"","&#x29B9;":"\\varnothing","&#x29B8;":"\\varnothing","&#x29B7;":"\\ominus","&#x29B6;":"\\ominus","&#x29B5;":"\\ominus","&#x29B4;":"\\vec{\\varnothing}","&#x29B3;":"\\vec{\\varnothing}","&#x29B2;":"\\dot{\\varnothing}","&#x29B1;":"\\overline{\\varnothing}","&#x29B0;":"\\varnothing","&#x29AF;":"","&#x29AE;":"","&#x29AD;":"","&#x29AC;":"","&#x29AB;":"","&#x29AA;":"","&#x29A9;":"","&#x29A8;":"","&#x29A7;":"","&#x29A6;":"","&#x29A5;":"","&#x29A4;":"","&#x29A3;":"","&#x29A2;":"","&#x29A1;":"\\not\\lor","&#x29A0;":"\\bcancel{>}","&#x2982;":":","&#x2981;":"\\circ","&#x2758;":"|","&#x25B2;":"\\bigtriangleup","&#x22FF;":"\\Epsilon","&#x22FE;":"\\overline{\\ni}","&#x22FD;":"\\overline{\\ni}","&#x22FC;":"\\in","&#x22FB;":"\\in","&#x22FA;":"\\in","&#x22F9;":"\\underline{\\in}","&#x22F8;":"\\underline{\\in}","&#x22F7;":"\\overline{\\in}","&#x22F6;":"\\overline{\\in}","&#x22F5;":"\\dot{\\in}","&#x22F4;":"\\in","&#x22F3;":"\\in","&#x22F2;":"\\in","&#x22F0;":"\\ddots","&#x22E9;":"\\underset{\\sim}{\\succ}","&#x22E8;":"\\underset{\\sim}{\\prec}","&#x22E7;":"\\underset{\\not\\sim}{>}","&#x22E6;":"\\underset{\\not\\sim}{<}","&#x22E5;":"\\not\\sqsupseteq","&#x22E4;":"\\not\\sqsubseteq","&#x22E3;":"\\not\\sqsupseteq","&#x22E2;":"\\not\\sqsubseteq","&#x22E1;":"\\nsucc","&#x22E0;":"\\nprec","&#x22DF;":"\\succ","&#x22DE;":"\\prec","&#x22DD;":"\\overline{>}","&#x22DC;":"\\overline{<}","&#x22DB;":"\\underset{>}{\\leq}","&#x22DA;":"\\underset{<}{\\geq}","&#x22D5;":"\\#","&#x22D3;":"\\cup","&#x22D2;":"\\cap","&#x22D1;":"\\supset","&#x22D0;":"\\subset","&#x22CF;":"\\wedge","&#x22CE;":"\\vee","&#x22CD;":"\\simeq","&#x22C8;":"\\bowtie","&#x22C7;":"\\ast","&#x22C6;":"\\star","&#x22C4;":"\\diamond","&#x22BF;":"\\triangle","&#x22BE;":"\\measuredangle","&#x22BD;":"\\overline{\\lor}","&#x22BC;":"\\overline{\\land}","&#x22BB;":"\\underline{\\lor}","&#x22BA;":"\\top","&#x22B9;":"","&#x22B7;":"\\circ\\multimap","&#x22B6;":"\\circ\\multimap","&#x22B3;":"\\triangleright","&#x22B2;":"\\triangleleft","&#x22B1;":"\\succ","&#x22B0;":"\\prec","&#x22AB;":"|\\models","&#x22AA;":"|\\models","&#x22A7;":"\\models","&#x22A6;":"\\vdash","&#x229D;":"\\ominus","&#x229C;":"\\ominus","&#x229B;":"\\odot","&#x229A;":"\\odot","&#x2294;":"\\sqcup","&#x2293;":"\\sqcap","&#x2292;":"\\sqsupseteq","&#x2291;":"\\sqsubseteq","&#x2290;&#x338;":"\\not\\sqsupset","&#x2290;":"\\sqsupset","&#x228F;&#x338;":"\\not\\sqsubset","&#x228F;":"\\sqsubset","&#x228E;":"\\cup","&#x228D;":"\\cup","&#x228C;":"\\cup","&#x227F;&#x338;":"\\not\\succsim","&#x227F;":"\\succsim","&#x227E;":"\\precsim","&#x2279;":"\\not\\overset{>}{<}","&#x2278;":"\\not\\overset{>}{<}","&#x2277;":"\\overset{>}{<}","&#x2276;":"\\overset{<}{>}","&#x2275;":"\\not\\geg","&#x2274;":"\\not\\leq","&#x2273;":"\\geg","&#x2272;":"\\leq","&#x226C;":"","&#x2267;":"\\geg","&#x2266;&#x338;":"\\not\\leq","&#x2266;":"\\leq","&#x2263;":"\\overset{=}{=} ","&#x225E;":"\\overset{m}{=} ","&#x225D;":"\\overset{def}{=}","&#x2258;":"=","&#x2256;":"=","&#x2255;":"=:","&#x2253;":"\\doteq","&#x2252;":"\\doteq","&#x2251;":"\\doteq","&#x2250;":"\\doteq","&#x224F;&#x338;":"","&#x224F;":"","&#x224E;&#x338;":"","&#x224E;":"","&#x224C;":"\\approx","&#x224B;":"\\approx","&#x224A;":"\\approx","&#x2242;&#x338;":"\\neq","&#x2242;":"=","&#x223F;":"\\sim","&#x223E;":"\\infty","&#x223D;&#x331;":"\\sim","&#x223D;":"\\sim","&#x223B;":"\\sim","&#x223A;":":-:","&#x2239;":"-:","&#x2238;":"\\bot","&#x2237;":"::","&#x2236;":":","&#x2223;":"|","&#x221F;":"\\llcorner","&#x2219;":"\\cdot","&#x2218;":"\\circ","&#x2217;":"*","&#x2215;":"/","&#x220E;":"\\square","&#x220D;":"\\ni","&#x220A;":"\\in","&#x2206;":"\\Delta","&#x2044;":"/","&#x2AB0;&#x338;":"\\nsucceq","&#x2AB0;":"\\succeq","&#x2AAF;&#x338;":"\\npreceq","&#x2AAF;":"\\preceq","&#x2A88;":"\\ngeqslant","&#x2A87;":"\\nleqslant","&#x29F3;":"\\Phi","&#x29E6;":"\\models","&#x29E5;":"\\not\\equiv","&#x29E4;":"\\approx\\neq","&#x29E3;":"\\neq","&#x29C1;":"\\circle","&#x29C0;":"\\circle","&#x25E6;":"\\circle","&#x25D7;":"\\circle","&#x25D6;":"\\circle","&#x25CF;":"\\circle","&#x25CE;":"\\circledcirc","&#x25CD;":"\\circledcirc","&#x25CC;":"\\circledcirc","&#x25C9;":"\\circledcirc","&#x25C8;":"\\diamond","&#x25C7;":"\\diamond","&#x25C6;":"\\diamond","&#x25C5;":"\\triangleleft","&#x25C4;":"\\triangleleft","&#x25C3;":"\\triangleleft","&#x25C2;":"\\triangleleft","&#x25C1;":"\\triangleleft","&#x25C0;":"\\triangleleft","&#x25BF;":"\\triangledown","&#x25BE;":"\\triangledown","&#x25BD;":"\\triangledown","&#x25BC;":"\\triangledown","&#x25B9;":"\\triangleright","&#x25B8;":"\\triangleright","&#x25B7;":"\\triangleright","&#x25B6;":"\\triangleright","&#x25B5;":"\\triangle","&#x25B4;":"\\triangle","&#x25B3;":"\\triangle","&#x25B1;":"\\square","&#x25B0;":"\\square","&#x25AF;":"\\square","&#x25AE;":"\\square","&#x25AD;":"\\square","&#x25AB;":"\\square","&#x25AA;":"\\square","&#x25A1;":"\\square","&#x25A0;":"\\square","&#x22ED;":"\\not\\triangleright","&#x22EC;":"\\not\\triangleleft","&#x22EB;":"\\not\\triangleright","&#x22EA;":"\\not\\triangleleft","&#x22D9;":"\\ggg","&#x22D8;":"\\lll","&#x22D7;":"*>","&#x22D6;":"<*","&#x22D4;":"\\pitchfork","&#x22CC;":"","&#x22CB;":"","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#x22B5;":"\\triangleright","&#x22B4;":"","&#x22A5;":"\\bot","&#x2281;":"\\nsucc","&#x2280;":"\\preceq","&#x227D;":"\\succeq","&#x227C;":"\\preceq","&#x227B;":"\\succ","&#x227A;":"\\prec","&#x2271;":"\\geq/","&#x2270;":"\\leq/","&#x226D;":"\\neq","&#x226B;&#x338;":"\\not\\gg","&#x226B;":"\\gg","&#x226A;&#x338;":"\\not\\ll","&#x226A;":"\\ll","&#x2269;":"\\ngeqslant","&#x2268;":"\\nleqslant","&#x2261;":"\\equiv","&#x225F;":"\\doteq","&#x225C;":"\\triangleq","&#x225B;":"\\doteq","&#x225A;":"\\triangleq","&#x2259;":"\\triangleq","&#x2257;":"\\doteq","&#x2254;":":=","&#x224D;":"\\asymp","&#x2247;":"\\ncong","&#x2246;":"\\ncong","&#x2245;":"\\cong","&#x2244;":"\\not\\simeq","&#x2243;":"\\simeq","&#x2241;":"\\not\\sim","&#x2226;":"\\not\\parallel","&#x2225;":"\\parallel","&#x2224;":"\\not|","&#x221D;":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","&#x2260;":"\\neq","&#x2262;":"\\equiv /","&#x2249;":"\\approx /","&#x223C;":"sim","&#x2248;":"\\approx","&#x226E;":"</","&lt;":"<","&#x226F;":">/",">=":">=",">":">","&#x2265;":"\\geq","&#x2264;":"\\leq","&lt;=":"<=","&#x228B;":"\\supsetneq","&#x228A;":"\\subsetneq","&#x2289;":"\\nsupseteq","&#x2288;":"\\nsubseteq","&#x2287;":"\\supseteq","&#x2286;":"\\subseteq","&#x2285;":"\\not\\supset","&#x2284;":"\\not\\subset","&#x2283;&#x20D2;":"\\supset |","&#x2283;":"\\supset","&#x2282;&#x20D2;":"\\subset |","&#x2282;":"\\subset","&#x220C;":"\\not\\in","&#x2209;":"\\notin","&#x2208;":"\\in","&#x2201;":"C","&#x2204;":"\\nexists","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x2227;":"\\land","&amp;&amp;":"\\&\\&","&#x2228;":"\\lor","&#x22AF;":"\\cancel{\\vDash}","&#x22AE;":"\\cancel{\\Vdash}","&#x22AD;":"\\nvDash","&#x22AC;":"\\nvDash","&#x22A9;":"\\Vdash","&#x22A8;":"\\vDash","&#x22A4;":"\\top","&#x22A3;":"\\dashv","&#x22A2;":"\\vdash","&#x220B;":"\\ni","&#x22F1;":"\\ddots","&#x22EF;":"\\hdots","&#x22EE;":"\\vdots","&#x2026;":"\\hdots","&#x3F6;":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","&#x2235;":"\\because","&#x2234;":"\\therefore ","&#x2063;":"",",":",",";":";","&#x29FD;":"\\}","&#x29FC;":"\\{","&#x2998;":"\\]","&#x2997;":"\\[","&#x2996;":"\\ll","&#x2995;":"\\gg","&#x2994;":"\\gg","&#x2993;":"\\ll","&#x2992;":"\\gg","&#x2991;":"\\ll","&#x2990;":"\\]","&#x298F;":"\\]","&#x298E;":"\\]","&#x298D;":"\\[","&#x298C;":"\\[","&#x298B;":"\\]","&#x298A;":"\\triangleright","&#x2989;":"\\triangleleft","&#x2988;":"|\\)","&#x2987;":"\\(|","&#x2986;":"|\\)","&#x2985;":"\\(\\(","&#x2984;":"|\\}","&#x2983;":"\\{|","&#x2980;":"\\||","&#x27EF;":"\\left. \\right]","&#x27EE;":"\\left[ \\right.","&#x27ED;":"\\left. \\right]]","&#x27EC;":"\\left[[ \\right.","&#x27EB;":"\\gg","&#x27EA;":"\\ll","&#x27E9;":"\\rangle","&#x27E8;":"\\langle","&#x27E7;":"\\left. \\right]]","&#x27E6;":"\\left[[ \\right.","&#x2773;":"\\left.\\right)","&#x2772;":"\\left(\\right.","&#x232A;":"\\rangle","&#x2329;":"\\langle","&#x230B;":"\\rfloor","&#x230A;":"\\lfloor","&#x2309;":"\\rceil","&#x2308;":"\\lceil","&#x2016;":"\\parallel","}":"\\right\\}","{":"\\left\\{","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","&#x201D;":"\"","&#x201C;":"``","&#x2019;":"'","&#x2018;":"`","%CE%B1":"\\alpha","%CE%B2":"\\beta","%CE%B3":"\\gamma","%CE%93":"\\Gamma","%CE%B4":"\\delta","%CE%94":"\\Delta","%CF%B5":"\\epsilon","%CE%B6":"\\zeta","%CE%B7":"\\eta","%CE%B8":"\\theta","%CE%98":"\\Theta","%CE%B9":"\\iota","%CE%BA":"\\kappa","%CE%BB":"\\lambda","%CE%BC":"\\mu","%CE%BD":"\\nu","%CE%BF":"\\omicron","%CF%80":"\\pi","%CE%A0":"\\Pi","%CF%81":"\\pho","%CF%83":"\\sigma","%CE%A3":"\\Sigma","%CF%84":"\\tau","%CF%85":"\\upsilon","%CE%A5":"\\Upsilon","%CF%95":"\\phi","%CE%A6":"\\Phi","%CF%87":"\\chi","%CF%88":"\\psi","%CE%A8":"\\Psi","%CF%89":"\\omega","%CE%A9":"\\Omega"};var allMathOperatorsByGlyph={};Object.defineProperty(allMathOperatorsByGlyph,"__esModule",{value:!0}),allMathOperatorsByGlyph.allMathOperatorsByGlyph=void 0,allMathOperatorsByGlyph.allMathOperatorsByGlyph={_:"\\underline","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\square","":"\\square","":"","":"''''","":"\\bar","":"```","":"``","":"`","":"'''","":"''","":"``","":",,","":"`","":",","^":"\\hat","":"\\sim","":"\\sim","":"\\sim","":"\\circ","":"\\cdot","":"",:"\\_",:"\u02CB",:"\u02CA",:"\u02C9",:"",:"\\hat",:"o","":"1","":"\xB8","":"\xB4","":"3","":"2","":"\\circ","":"\\bar",:"a","":"\\cdot\\cdot","~":"\\sim","`":"`","--":"--","++":"++","&":"\\&","":"\\sqrt[4]{}","":"\\sqrt[3]{}","":"\\sqrt{}",:"d",:"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","":"\\#","":"","":"","":"'","<>":"<>","**":"\\star\\star","":"\\nabla","":"\\partial","":"\\bigodot","":"\\neg","":"\\measuredangle","":"\\measuredangle","":"\\angle","":"\\div","/":"/","":"\\backslash","\\":"\\backslash","%":"\\%","":"\\bigotimes","":"\\cdot","":"\\coprod","":"\\times","":"\\cdot","":"\\boxdot","":"\\boxtimes","":"","":"-","":"\\cdot","":"\\times",".":".","*":"\\star","":"\\cup","":"\\cap","":"\\coprod","":"\\prod","":"","":"","":"\\mid\\mid\\mid","":"\\times","":"","":"","":"\\sqcup","":"\\sqcap","":"\\otimes","":"\\odot","":"\\cap","":"\\vee","":"\\wedge","":"\\uplus","":"\\cup","":"\\cup","":"\\underline{\\int}","":"\\overline{\\int}","":"\\int","":"\\int","":"\\int","":"\\int","":"\\oint","":"\\oint","":"\\int","":"\\int","":"\\int","":"\\int","":"\\int","":"\\bcancel{\\int}","":"","":"\\hcancel{\\int}","":"\\iiiint","":"\\oint","":"\\oint","":"\\int","":"\\oiint","":"\\oiint","":"\\oint","":"\\int","":"\\oplus","":"\\oslash","":"\\ominus","":"\\oplus","":"\\iiint","":"\\iint","":"","":"","":"\\sum","":"\\boxminus","":"\\boxplus","":"\\dot{+}","":"+-","":"-","":"\\pm","-":"-","+":"+","":"\\Rrightarrow","":"\\Lleftarrow","":":\\rightarrow","":"","":"\\bullet-\\bullet","":"\\angle","":"\\measuredangle","":"\\measuredangle","":"\\perp","":"\\measuredangle","":"","":"\\vdots","":"","":"","":"\\prec","":"\\succ","":"\\underset{\\rightarrow}{\\supset}","":"","":"\\underset{\\rightarrow}{\\subset}","":"\\underset{\\rightarrow}{>}","":"","":"\\underset{\\leftarrow}{<}","":"\\underset{\\approx}{\\rightarrow}","":"\\underset{\\sim}{\\rightarrow}","":"\\underset{\\sim}{\\leftarrow}","":"\\overset{\\sim}{\\rightarrow}","":"\\overset{=}{\\rightarrow}","":"","":"","":"","":"\\overline{\\rightharpoondown}","":"\\underline{\\rightharpoonup}","":"\\overline{\\leftharpoondown}","":"\\underline{\\leftharpoonup}","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\leftrightarrow","":"","":"\\leftrightarrow","":"\\nrightarrow","":"","":"","":"\\rightleftarrows","":"\\leftrightarrows","":"\\rightleftarrows","":"\\circlearrowright","":"\\circlearrowleft","":"\\rightarrow","":"\\leftarrow","":"","":"","":"","":"","":"","":"","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\leadsto","":"","":"","":"","":"","":"","":"","":"\\times","":"\\times","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\\mapsto\\cdot","":"\\cdot\\leftarrow","":"\\rightarrow\\cdot","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\uparrow","":"\\downarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\nLeftrightarrow","":"\\nRightarrow","":"\\nLeftarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\leftarrow","":"\\Longleftrightarrow","":"\\Longrightarrow","":"\\Longleftarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\rightarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\Rrightarrow","":"","":"\\rightarrow","":"\\Updownarrow","":"\\searrow","":"\\nwarrow","":"\\Leftarrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightsquigarrow","":"\\leftarrow","":"\\Rrightarrow","":"\\Lleftarrow","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\Updownarrow","":"\\Leftrightarrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\nRightarrow","":"\\nLeftrightarrow","":"\\nLeftarrow","":"\\rightleftharpoons","":"\\leftrightharpoons","":"\\downdownarrows","":"\\rightrightarrows","":"\\upuparrows","":"\\leftleftarrows","":"\\leftrightarrows","":"","":"\\rightleftarrows","":"\\downharpoonleft","":"\\downharpoonright","":"\\rightharpoondown","":"\\rightharpoonup","":"\\upharpoonleft","":"\\upharpoonright","":"\\leftharpoondown","":"\\leftharpoonup","":"\\circlearrowright","":"\\circlearrowleft","":"\\leftrightarrows","":"\\overline{\\nwarrow}","":"\\curvearrowright","":"\\curvearrowleft","":"\\swarrow","":"\\searrow","":"\\Rsh","":"\\Lsh","":"\\Rsh","":"\\Lsh","":"\\swarrow","":"","":"\\leftrightsquigarrow","":"\\looparrowright","":"\\looparrowleft","":"\\hookrightarrow","":"\\hookleftarrow","":"\\underline{\\updownarrow}","":"\\downarrow","":"\\rightarrowtail","":"\\uparrow","":"\\leftarrowtail","":"\\rightarrowtail","":"\\leftarrowtail","":"\\downarrow","":"\\twoheadrightarrow","":"\\uparrow","":"\\twoheadleftarrow","":"\\nearrow","":"\\nwarrow","":"","":"","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\left|\\right.","":"","":"//","":"///","":"","":"","":"","":"","":"\\vdots","":"","":"","":"","":"\\nparallel","":"","":"","":"","":"\\bcancel{\\mid}","":"","":"","":"","":"","":"","":"\\underline{\\perp}","":"\\overline{\\top}","":"","":"","":"","":"","":"","":"","":"\\perp","":"\\top","":"\\dashv","":"","":"","":"\\pitchfork","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\\underset{\\neq}{\\supset}","":"\\underset{\\neq}{\\subset}","":"\\underset{\\approx}{\\supset}","":"\\underset{\\approx}{\\subset}","":"\\underset{\\sim}{\\supset}","":"\\underset{\\sim}{\\subset}","":"\\supseteqq","":"\\subseteqq","":"\\dot{\\supseteq}","":"\\dot{\\subseteq}","":"\\underset{\\times}{\\supset}","":"\\underset{\\times}{\\subset}","":"\\underset{+}{\\supset}","":"\\underset{+}{\\subset}","":"","":"","":"\\gg ","":"\\ll","":"\\underset{\\cancel{\\approx}}{\\succ}","":"\\underset{\\cancel{\\approx}}{\\prec}","":"\\underset{\\approx}{\\succ}","":"\\underset{\\approx}{\\prec}","":"\\underset{\\cancel{=}}{\\succ}","":"\\underset{\\cancel{=}}{\\prec}","":"\\underset{=}{\\succ}","":"\\underset{=}{\\prec}","":"","":"","":"","":"\\underline{\\hcancel{>}}","":"\\underline{\\hcancel{>}}","":"\\hcancel{>}","":"\\hcancel{<}","":"","":"","":"\\vartriangleright","":"\\vartriangleleft","":"><","":"><","":"\\underline{\\ll}","":"\\cancel{\\gg}","":"\\gg","":"\\cancel{\\ll}","":"\\ll","":"\\overset{\\sim}{\\geqq}","":"\\overset{\\sim}{\\leqq}","":"\\overset{\\sim}{>}","":"\\overset{\\sim}{<}","":"","":"","":"\\overset{=}{>}","":"\\overset{=}{<}","":"","":"","":"","":"","":"","":"","":"\\underset{=}{\\gtrless}","":"\\underset{=}{\\lessgtr}","":"\\underset{<}{\\gtrsim}","":"\\underset{>}{\\lesssim}","":"\\underset{\\simeq}{>}","":"\\underset{\\simeq}{<}","":"\\gtreqqless","":"\\lesseqqgtr","":"\\underset{\\cancel{\\approx}}{>}","":"\\underset{\\approx}{<}","":"\\underset{\\approx}{>}","":"\\underset{\\approx}{<}","":"","":"","":"","":"","":"","":"","":"\\bcancel{\\geq}","":"\\geq","":"\\bcancel{\\leq}","":"\\leq","":"","":"","":"","":"","":"\\overset{\\dots}{\\equiv}","":"","":"===","":"==","":"::=","":"","":"\\underset{=}{+}","":"\\overset{=}{+}","":"\\overset{\\approx}{=}","":"\\overset{\\wedge}{=}","":"\\overset{*}{=}","":"\\dot{\\approx}","":"","":"","":"\\dot{\\sim}","":"","":"","":"\\dot{\\equiv}","":"\\underset{\\cdot}{=}","":"","":"","":"\\underset{=}{\\vee}","":"\\overset{=}{\\vee}","":"ul(vv)","":"\\underset{=}{\\wedge}","":"\\underline{\\wedge}","":"\\overset{=}{\\wedge}","":"\\hcancel{\\vee}","":"\\hcancel{\\wedge}","":"","":"","":"","":"\\vee","":"\\wedge","":"","":"","":"","":"","":"\\dot{\\vee}","":"\\dot{\\wedge}","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"","":"","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"\\llcorner","":"\\lrcorner","":"","":"","":"","":"","":"","":"\\hat{\\otimes}","":"","":"","":"","":"\\underline{\\times}","":"\\underline{\\times}","":"\\dot{\\times}","":"","":"","":"","":"","":"","":"","":"","":"","":"\\underset{\\sim}{+}","":"\\underset{\\circ}{+}","":"\\overset{\\sim}{+}","":"\\hat{+}","":"\\dot{+}","":"\\upharpoonright","":">>","":"","":"\\triangleleft","":"\\bowtie","":"","":"+","":"\\hcancel{|||}","":"\\hcancel{||}","":"\\backslash","":"/","":"hcancel{\backslash}","":"","":"\\backslash","":"\\Phi","":"","":"","":"","":"","":"","":"\\lozenge","":"","":"","":"","":"\\ddagger","":"\\sqcup\\sqcup","":"","":"\\square","":"","":"","":"","":"\\{\\{","":"\\{","":"\\}","":"","":"","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"| \\not\\triangleright","":"| \\triangleright","":"\\not\\triangleleft |","":"\\triangleleft |","":"","":"\\triangle","":"","":"\\underline{\\triangle}","":"\\dot{\\triangle}","":"","":"\\boxed{\\circ}","":"\\boxed{\\circ}","":"\\boxed{\\rightarrow}","":"\\bcancel{\\square}","":"\\cancel{\\square}","":"\\odot","":"\\odot","":"\\odot","":"\\odot","":"\\varnothing","":"\\oplus","":"\\otimes","":"","":"\\varnothing","":"\\varnothing","":"\\ominus","":"\\ominus","":"\\ominus","":"\\vec{\\varnothing}","":"\\vec{\\varnothing}","":"\\dot{\\varnothing}","":"\\overline{\\varnothing}","":"\\varnothing","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\\not\\lor","":"\\bcancel{>}","":":","":"\\circ","":"|","":"\\bigtriangleup","":"\\Epsilon","":"\\overline{\\ni}","":"\\overline{\\ni}","":"\\in","":"\\in","":"\\in","":"\\underline{\\in}","":"\\underline{\\in}","":"\\overline{\\in}","":"\\overline{\\in}","":"\\dot{\\in}","":"\\in","":"\\in","":"\\in","":"\\ddots","":"\\underset{\\sim}{\\succ}","":"\\underset{\\sim}{\\prec}","":"\\underset{\\not\\sim}{>}","":"\\underset{\\not\\sim}{<}","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\nsucc","":"\\nprec","":"\\succ","":"\\prec","":"\\overline{>}","":"\\overline{<}","":"\\underset{>}{\\leq}","":"\\underset{<}{\\geq}","":"\\#","":"\\cup","":"\\cap","":"\\supset","":"\\subset","":"\\wedge","":"\\vee","":"\\simeq","":"\\bowtie","":"\\ast","":"\\star","":"\\diamond","":"\\triangle","":"\\measuredangle","":"\\overline{\\lor}","":"\\overline{\\land}","":"\\underline{\\lor}","":"\\top","":"","":"\\circ\\multimap","":"\\circ\\multimap","":"\\triangleright","":"\\triangleleft","":"\\succ","":"\\prec","":"|\\models","":"|\\models","":"\\models","":"\\vdash","":"\\ominus","":"\\ominus","":"\\odot","":"\\odot","":"\\sqcup","":"\\sqcap","":"\\sqsupseteq","":"\\sqsubseteq","":"\\not\\sqsupset","":"\\sqsupset","":"\\not\\sqsubset","":"\\sqsubset","":"\\cup","":"\\cup","":"\\cup","":"\\not\\succsim","":"\\succsim","":"\\precsim","":"\\not\\overset{>}{<}","":"\\not\\overset{>}{<}","":"\\overset{>}{<}","":"\\overset{<}{>}","":"\\not\\geg","":"\\not\\leq","":"\\geg","":"\\leq","":"","":"\\geg","":"\\not\\leq","":"\\leq","":"\\overset{=}{=} ","":"\\overset{m}{=} ","":"\\overset{def}{=}","":"=","":"=","":"=:","":"\\doteq","":"\\doteq","":"\\doteq","":"\\doteq","":"","":"","":"","":"","":"\\approx","":"\\approx","":"\\approx","":"\\neq","":"=","":"\\sim","":"\\infty","":"\\sim","":"\\sim","":"\\sim","":":-:","":"-:","":"\\bot","":"::","":":","":"|","":"\\llcorner","":"\\cdot","":"\\circ","":"*","":"/","":"\\square","":"\\ni","":"\\in","":"\\Delta","":"/","":"\\nsucceq","":"\\succeq","":"\\npreceq","":"\\preceq","":"\\ngeqslant","":"\\nleqslant","":"\\Phi","":"\\models","":"\\not\\equiv","":"\\approx\\neq","":"\\neq","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\diamond","":"\\diamond","":"\\diamond","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangle","":"\\triangle","":"\\triangle","":"\\square","":"\\square","":"\\square","":"\\square","":"\\square","":"\\square","":"\\square","":"\\square","":"\\square","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\ggg","":"\\lll","":"*>","":"<*","":"\\pitchfork","":"","":"","":"\\rtimes","":"\\ltimes","":"\\triangleright","\\triangleleft":"","":"\\bot","":"\\nsucc","":"\\preceq","":"\\succeq","":"\\preceq","":"\\succ","":"\\prec","":"\\geq/","":"\\leq/","":"\\neq","":"\\not\\gg","":"\\gg","":"\\not\\ll","":"\\ll","":"\\ngeqslant","":"\\nleqslant","":"\\equiv","":"\\doteq","":"\\triangleq","":"\\doteq","":"\\triangleq","":"\\triangleq","":"\\doteq","":":=","":"\\asymp","":"\\ncong","":"\\ncong","":"\\cong","":"\\not\\simeq","":"\\simeq","":"\\not\\sim","":"\\not\\parallel","":"\\parallel","":"\\not|","":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","":"\\neq","":"\\equiv /","":"\\approx /","":"sim","":"\\approx","":"</","<":"<","":">/",">=":">=",">":">","":"\\geq","":"\\leq","<=":"<=","":"\\supsetneq","":"\\subsetneq","":"\\nsupseteq","":"\\nsubseteq","":"\\supseteq","":"\\subseteq","":"\\not\\supset","":"\\not\\subset","":"\\supset |","":"\\supset","":"\\subset |","":"\\subset","":"\\not\\in","":"\\notin","":"\\in","":"C","":"\\nexists","":"\\exists","":"\\forall","":"\\land","&&":"\\&\\&","":"\\lor","":"\\cancel{\\vDash}","":"\\cancel{\\Vdash}","":"\\nvDash","":"\\nvDash","":"\\Vdash","":"\\vDash","":"\\top","":"\\dashv","":"\\vdash","":"\\ni","":"\\ddots","":"\\hdots","":"\\vdots","":"\\hdots","":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","":"\\because","":"\\therefore ","":"",",":",",";":";","":"\\}","":"\\{","":"\\]","":"\\[","":"\\ll","":"\\gg","":"\\gg","":"\\ll","":"\\gg","":"\\ll","":"\\]","":"\\]","":"\\]","":"\\[","":"\\[","":"\\]","":"\\triangleright","":"\\triangleleft","":"|\\)","":"\\(|","":"|\\)","":"\\(\\(","":"|\\}","":"\\{|","":"\\||","":"\\left. \\right]","":"\\left[ \\right.","":"\\left. \\right]]","":"\\left[[ \\right.","":"\\gg","":"\\ll","":"\\rangle","":"\\langle","":"\\left. \\right]]","":"\\left[[ \\right.","":"\\left.\\right)","":"\\left(\\right.","":"\\rangle","":"\\langle","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil","":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","":"\"","":"``","":"'","":"`",:"\\alpha",:"\\beta",:"\\gamma",:"\\Gamma",:"\\delta",:"\\Delta",:"\\epsilon",:"\\zeta",:"\\eta",:"\\theta",:"\\Theta",:"\\iota",:"\\kappa",:"\\lambda",:"\\mu",:"\\nu",:"\\omicron",:"\\pi",:"\\Pi",:"\\pho",:"\\sigma",:"\\Sigma",:"\\tau",:"\\upsilon",:"\\Upsilon",:"\\phi",:"\\Phi",:"\\chi",:"\\psi",:"\\Psi",:"\\omega",:"\\Omega"};var allMathSymbolsByChar={};Object.defineProperty(allMathSymbolsByChar,"__esModule",{value:!0}),allMathSymbolsByChar.allMathSymbolsByChar=void 0,allMathSymbolsByChar.allMathSymbolsByChar={"&#xA0;":"\\textrm{ }","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x21D4;":"\\iff","&#x21D2;":"=>","&#xAC;":"\\neg","&#x2124;":"\\mathbb{Z}","&#x211D;":"\\mathbb{R}","&#x211A;":"\\mathbb{Q}","&#x2115;":"\\mathbb{N}","&#x2102;":"CC","&#x25A1;":"\\square","&#x22C4;":"\\diamond","&#x25B3;":"\\triangle","&#x2322;":"\\frown","&#x2220;":"\\angle","&#x22F1;":"\\ddots","&#x22EE;":"\\vdots","&#x2235;":"\\because","&#x2234;":"\\therefore","&#x2135;":"\\aleph","&#x2205;":"\\oslash","&#xB1;":"\\pm","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x222E;":"\\oint","&#x222B;":"\\int","&#x22C3;":"\\cup","&#x222A;":"\\cup","&#x22C2;":"\\cap","&#x2229;":"\\cap","&#x22C1;":"\\vee","&#x2228;":"\\vee","&#x22C0;":"\\wedge","&#x2227;":"\\wedge","&#x220F;":"\\prod","&#x2211;":"\\sum","&#x2299;":"\\bigodot","&#x2297;":"\\bigoplus","&#x2295;":"o+","&#x2218;":"@","&#x22C8;":"\\bowtie","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#xF7;":"\\div","&#xD7;":"\\times","\\":"\\backslash","&#x22C6;":"\\star","&#x2217;":"\\star","&#x22C5;":"\\cdot","&#x3A9;":"\\Omega","&#x3C9;":"\\omega","&#x3A8;":"\\Psi","&#x3C8;":"\\psi","&#x3C7;":"\\chi","&#x3C6;":"\\varphi","&#x3A6;":"\\Phi","&#x3D5;":"\\phi","&#x3C5;":"\\upsilon","&#x3C4;":"\\tau","&#x3A3;":"\\Sigma","&#x3C3;":"\\sigma","&#x3C1;":"\\rho","&#x3A0;":"\\Pi","&#x3C0;":"\\pi","&#x39E;":"\\Xi","&#x3BE;":"\\xi","&#x3BD;":"\\nu","&#x3BC;":"\\mu","&#x39B;":"\\Lambda","&#x3BB;":"\\lambda","&#x3BA;":"\\kappa","&#x3B9;":"\\iota","&#x3D1;":"\\vartheta","&#x398;":"\\Theta","&#x3B8;":"\\theta","&#x3B7;":"\\eta","&#x3B6;":"\\zeta","&#x25B;":"\\varepsilon","&#x3B5;":"\\epsilon","&#x394;":"\\Delta","&#x3B4;":"\\delta","&#x393;":"\\Gamma","&#x3B3;":"\\gamma","&#x3B2;":"\\beta","&#x3B1;":"\\alpha","&#x221E;":"\\infty"};var allMathSymbolsByGlyph={};Object.defineProperty(allMathSymbolsByGlyph,"__esModule",{value:!0}),allMathSymbolsByGlyph.allMathSymbolsByGlyph=void 0,allMathSymbolsByGlyph.allMathSymbolsByGlyph={" ":"\\textrm{ }","":"\\exists","":"\\forall","":"\\iff","":"=>","":"\\neg","":"\\square","":"\\diamond","":"\\triangle","":"\\frown","":"\\angle","":"\\ddots","":"\\vdots","":"\\because","":"\\therefore",:"\\aleph","":"\\oslash","":"\\pm","":"\\nabla","":"\\partial","":"\\oint","":"\\int","":"\\cup","":"\\cup","":"\\cap","":"\\cap","":"\\vee","":"\\vee","":"\\wedge","":"\\wedge","":"\\prod","":"\\sum","":"\\bigodot","":"\\bigoplus","":"o+","":"@","":"\\bowtie","":"\\rtimes","":"\\ltimes","":"\\div","":"\\times","\\":"\\backslash","":"\\star","":"\\star","":"\\cdot",:"\\Omega",:"\\omega",:"\\Psi",:"\\psi",:"\\chi",:"\\varphi",:"\\Phi",:"\\phi",:"\\upsilon",:"\\tau",:"\\Sigma",:"\\sigma",:"\\rho",:"\\Pi",:"\\pi",:"\\Xi",:"\\xi",:"\\nu",:"\\mu",:"\\Lambda",:"\\lambda",:"\\kappa",:"\\iota",:"\\vartheta",:"\\Theta",:"\\theta",:"\\eta",:"\\zeta",:"\\varepsilon",:"\\epsilon",:"\\Delta",:"\\delta",:"\\Gamma",:"\\gamma",:"\\beta",:"\\alpha","":"\\infty"};var latexAccents={};Object.defineProperty(latexAccents,"__esModule",{value:!0}),latexAccents.latexAccents=void 0,latexAccents.latexAccents=["\\hat","\\bar","\\underbrace","\\overbrace"],function(exports){var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,m,k,k2){k2===void 0&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))&&(desc={enumerable:!0,get:function get(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){k2===void 0&&(k2=k),o[k2]=m[k]}),__exportStar=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,exports){for(var p in m)"default"==p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(allMathOperatorsByChar,exports),__exportStar(allMathOperatorsByGlyph,exports),__exportStar(allMathSymbolsByChar,exports),__exportStar(allMathSymbolsByGlyph,exports),__exportStar(latexAccents,exports)}(syntax);var mo={},mn={},msqrt={},mfenced={},mfrac={},errors={},invalidNumberOfChildren={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var _extendStatics=function extendStatics(d,b){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},_extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+(b+"")+" is not a constructor or null");_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),hasRequiredMi,hasRequiredMo,hasRequiredMn,hasRequiredMsqrt,hasRequiredMfenced;Object.defineProperty(invalidNumberOfChildren,"__esModule",{value:!0}),invalidNumberOfChildren.InvalidNumberOfChildrenError=void 0;var InvalidNumberOfChildrenError=function(_super){function InvalidNumberOfChildrenError(tagName,expectedNumberOfChild,currentNumberOfChild,comparison){void 0===comparison&&(comparison="exactly");var _this=_super.call(this,"".concat(tagName," tag must have ").concat(comparison," ").concat(expectedNumberOfChild," children. It's actually ").concat(currentNumberOfChild))||this;return _this.name="InvalidNumberOfChildrenError",_this}return __extends(InvalidNumberOfChildrenError,_super),InvalidNumberOfChildrenError}(Error);invalidNumberOfChildren.InvalidNumberOfChildrenError=InvalidNumberOfChildrenError,function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.InvalidNumberOfChildrenError=void 0;var invalid_number_of_children_1=invalidNumberOfChildren;Object.defineProperty(exports,"InvalidNumberOfChildrenError",{enumerable:!0,get:function get(){return invalid_number_of_children_1.InvalidNumberOfChildrenError}})}(errors);var mroot={},maction={},menclose={},merror={},mphantom={},hasRequiredMfrac,hasRequiredMroot,hasRequiredMaction,hasRequiredMenclose,hasRequiredMerror;Object.defineProperty(mphantom,"__esModule",{value:!0}),mphantom.MPhantom=void 0;var MPhantom=function(){function MPhantom(mathElement){this._mathmlElement=mathElement}return MPhantom.prototype.convert=function(){return""},MPhantom}();mphantom.MPhantom=MPhantom;var msup={},msub={},msubsup={},mmultiscripts={},mtext={},normalizeCategoryCode={},hasRequiredMsup,hasRequiredMsub,hasRequiredMsubsup,hasRequiredMmultiscripts;(function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeCategoryCode=exports.allCategoryCode=void 0,exports.allCategoryCode={"{":!0,"}":!0,$:!0,"&":!0,"#":!0,"^":!0,_:!0,"%":!0};var normalizeCategoryCode=function normalizeCategoryCode(str){return exports.allCategoryCode[str]?"\\".concat(str):str};exports.normalizeCategoryCode=normalizeCategoryCode})(normalizeCategoryCode),Object.defineProperty(mtext,"__esModule",{value:!0}),mtext.MText=void 0;var MText=function(){function MText(mathElement){this._mathmlElement=mathElement}return MText.prototype.convert=function(){var _a=this._mathmlElement,attributes=_a.attributes,value=_a.value;return new TextCommand(attributes.mathvariant).apply((0,normalizeCategoryCode.normalizeCategoryCode)(value))},MText}();mtext.MText=MText;var TextCommand=function(){function TextCommand(mathvariant){this._mathvariant=mathvariant||"normal"}return TextCommand.prototype.apply=function(value){return this._commands.reduce(function(acc,command,index){return 0===index?"".concat(command,"{").concat(value,"}"):"".concat(command,"{").concat(acc,"}")},"")},Object.defineProperty(TextCommand.prototype,"_commands",{get:function get(){switch(this._mathvariant){case"bold":return["\\textbf"];case"italic":return["\\textit"];case"bold-italic":return["\\textit","\\textbf"];case"double-struck":return["\\mathbb"];case"monospace":return["\\mathtt"];case"bold-fraktur":case"fraktur":return["\\mathfrak"];default:return["\\text"];}},enumerable:!1,configurable:!0}),TextCommand}(),munderover={},mtable={},mtr={},mspace={},genericSpacingWrapper={},genericUnderOver={},factories={},makeToMathElementsConverter$1={},xmldomToMathmlElements={},xmldomToMathmlElementAdapter={},domParser={},entities={},hasRequiredMunderover,hasRequiredMtable,hasRequiredMtr,hasRequiredMspace,hasRequiredGenericSpacingWrapper,hasRequiredGenericUnderOver,hasRequiredConverters,hasRequiredMathmlElementToLatexConverterAdapter;entities.entityMap={lt:"<",gt:">",amp:"&",quot:"\"",apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"};var sax$1={},nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$");ParseError$1.prototype=new Error,ParseError$1.prototype.name=ParseError$1.name,XMLReader$1.prototype={parse:function parse(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument(),_copy(defaultNSMap,defaultNSMap={}),_parse(source,defaultNSMap,entityMap,domBuilder,this.errorHandler),domBuilder.endDocument()}},ElementAttributes.prototype={setTagName:function setTagName(tagName){if(!tagNamePattern.test(tagName))throw new Error("invalid tagName:"+tagName);this.tagName=tagName},addValue:function addValue(qName,value,offset){if(!tagNamePattern.test(qName))throw new Error("invalid attribute:"+qName);this.attributeNames[qName]=this.length,this[this.length++]={qName:qName,value:value,offset:offset}},length:0,getLocalName:function getLocalName(i){return this[i].localName},getLocator:function getLocator(i){return this[i].locator},getQName:function getQName(i){return this[i].qName},getURI:function getURI(i){return this[i].uri},getValue:function getValue(i){return this[i].value}},sax$1.XMLReader=XMLReader$1,sax$1.ParseError=ParseError$1;var dom={},NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={};ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15),DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function item(index){return this[index]||null},toString:function toString(isHTML,nodeFilter){for(var buf=[],i=0;i<this.length;i++)serializeToString(this[i],buf,isHTML,nodeFilter);return buf.join("")}},LiveNodeList.prototype.item=function(i){return _updateLiveList(this),this[i]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function getNamedItem(key){for(var i=this.length;i--;){var attr=this[i];if(attr.nodeName==key)return attr}},setNamedItem:function setNamedItem(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var oldAttr=this.getNamedItem(attr.nodeName);return _addNamedNode(this._ownerElement,this,attr,oldAttr),oldAttr},setNamedItemNS:function setNamedItemNS(attr){var el=attr.ownerElement,oldAttr;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName),_addNamedNode(this._ownerElement,this,attr,oldAttr),oldAttr},removeNamedItem:function removeNamedItem(key){var attr=this.getNamedItem(key);return _removeNamedNode(this._ownerElement,this,attr),attr},removeNamedItemNS:function removeNamedItemNS(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);return _removeNamedNode(this._ownerElement,this,attr),attr},getNamedItemNS:function getNamedItemNS(namespaceURI,localName){for(var i=this.length;i--;){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI)return node}return null}},DOMImplementation$1.prototype={hasFeature:function hasFeature(feature,version){var versions=this._features[feature.toLowerCase()];return!!(versions&&(!version||version in versions))},createDocument:function createDocument(namespaceURI,qualifiedName,doctype){var doc=new Document;if(doc.implementation=this,doc.childNodes=new NodeList,doc.doctype=doctype,doctype&&doc.appendChild(doctype),qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root)}return doc},createDocumentType:function createDocumentType(qualifiedName,publicId,systemId){var node=new DocumentType;return node.name=qualifiedName,node.nodeName=qualifiedName,node.publicId=publicId,node.systemId=systemId,node}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function insertBefore(newChild,refChild){return _insertBefore(this,newChild,refChild)},replaceChild:function replaceChild(newChild,oldChild){this.insertBefore(newChild,oldChild),oldChild&&this.removeChild(oldChild)},removeChild:function removeChild(oldChild){return _removeChild(this,oldChild)},appendChild:function appendChild(newChild){return this.insertBefore(newChild,null)},hasChildNodes:function hasChildNodes(){return null!=this.firstChild},cloneNode:function cloneNode(deep){return _cloneNode(this.ownerDocument||this,this,deep)},normalize:function normalize(){for(var child=this.firstChild;child;){var next=child.nextSibling;next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE?(this.removeChild(next),child.appendData(next.data)):(child.normalize(),child=next)}},isSupported:function isSupported(feature,version){return this.ownerDocument.implementation.hasFeature(feature,version)},hasAttributes:function hasAttributes(){return 0<this.attributes.length},lookupPrefix:function lookupPrefix(namespaceURI){for(var el=this;el;){var map=el._nsMap;if(map)for(var n in map)if(map[n]==namespaceURI)return n;el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},lookupNamespaceURI:function lookupNamespaceURI(prefix){for(var el=this;el;){var map=el._nsMap;if(map&&prefix in map)return map[prefix];el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},isDefaultNamespace:function isDefaultNamespace(namespaceURI){var prefix=this.lookupPrefix(namespaceURI);return null==prefix}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function insertBefore(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){for(var child=newChild.firstChild,next;child;)next=child.nextSibling,this.insertBefore(child,refChild),child=next;return newChild}return null==this.documentElement&&newChild.nodeType==ELEMENT_NODE&&(this.documentElement=newChild),_insertBefore(this,newChild,refChild),newChild.ownerDocument=this,newChild},removeChild:function removeChild(oldChild){return this.documentElement==oldChild&&(this.documentElement=null),_removeChild(this,oldChild)},importNode:function importNode(importedNode,deep){return _importNode(this,importedNode,deep)},getElementById:function getElementById(id){var rtv=null;return _visitNode(this.documentElement,function(node){if(node.nodeType==ELEMENT_NODE&&node.getAttribute("id")==id)return rtv=node,!0}),rtv},getElementsByClassName:function getElementsByClassName(className){var pattern=new RegExp("(^|\\s)"+className+"(\\s|$)");return new LiveNodeList(this,function(base){var ls=[];return _visitNode(base.documentElement,function(node){node!==base&&node.nodeType==ELEMENT_NODE&&pattern.test(node.getAttribute("class"))&&ls.push(node)}),ls})},createElement:function createElement(tagName){var node=new Element;node.ownerDocument=this,node.nodeName=tagName,node.tagName=tagName,node.childNodes=new NodeList;var attrs=node.attributes=new NamedNodeMap;return attrs._ownerElement=node,node},createDocumentFragment:function createDocumentFragment(){var node=new DocumentFragment;return node.ownerDocument=this,node.childNodes=new NodeList,node},createTextNode:function createTextNode(data){var node=new Text;return node.ownerDocument=this,node.appendData(data),node},createComment:function createComment(data){var node=new Comment;return node.ownerDocument=this,node.appendData(data),node},createCDATASection:function createCDATASection(data){var node=new CDATASection;return node.ownerDocument=this,node.appendData(data),node},createProcessingInstruction:function createProcessingInstruction(target,data){var node=new ProcessingInstruction;return node.ownerDocument=this,node.tagName=node.target=target,node.nodeValue=node.data=data,node},createAttribute:function createAttribute(name){var node=new Attr;return node.ownerDocument=this,node.name=name,node.nodeName=name,node.localName=name,node.specified=!0,node},createEntityReference:function createEntityReference(name){var node=new EntityReference;return node.ownerDocument=this,node.nodeName=name,node},createElementNS:function createElementNS(namespaceURI,qualifiedName){var node=new Element,pl=qualifiedName.split(":"),attrs=node.attributes=new NamedNodeMap;return node.childNodes=new NodeList,node.ownerDocument=this,node.nodeName=qualifiedName,node.tagName=qualifiedName,node.namespaceURI=namespaceURI,2==pl.length?(node.prefix=pl[0],node.localName=pl[1]):node.localName=qualifiedName,attrs._ownerElement=node,node},createAttributeNS:function createAttributeNS(namespaceURI,qualifiedName){var node=new Attr,pl=qualifiedName.split(":");return node.ownerDocument=this,node.nodeName=qualifiedName,node.name=qualifiedName,node.namespaceURI=namespaceURI,node.specified=!0,2==pl.length?(node.prefix=pl[0],node.localName=pl[1]):node.localName=qualifiedName,node}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function hasAttribute(name){return null!=this.getAttributeNode(name)},getAttribute:function getAttribute(name){var attr=this.getAttributeNode(name);return attr&&attr.value||""},getAttributeNode:function getAttributeNode(name){return this.attributes.getNamedItem(name)},setAttribute:function setAttribute(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value,this.setAttributeNode(attr)},removeAttribute:function removeAttribute(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr)},appendChild:function appendChild(newChild){return newChild.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(newChild,null):_appendSingleChild(this,newChild)},setAttributeNode:function setAttributeNode(newAttr){return this.attributes.setNamedItem(newAttr)},setAttributeNodeNS:function setAttributeNodeNS(newAttr){return this.attributes.setNamedItemNS(newAttr)},removeAttributeNode:function removeAttributeNode(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName)},removeAttributeNS:function removeAttributeNS(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old)},hasAttributeNS:function hasAttributeNS(namespaceURI,localName){return null!=this.getAttributeNodeNS(namespaceURI,localName)},getAttributeNS:function getAttributeNS(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||""},setAttributeNS:function setAttributeNS(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=""+value,this.setAttributeNode(attr)},getAttributeNodeNS:function getAttributeNodeNS(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName)},getElementsByTagName:function getElementsByTagName(tagName){return new LiveNodeList(this,function(base){var ls=[];return _visitNode(base,function(node){node!==base&&node.nodeType==ELEMENT_NODE&&("*"===tagName||node.tagName==tagName)&&ls.push(node)}),ls})},getElementsByTagNameNS:function getElementsByTagNameNS(namespaceURI,localName){return new LiveNodeList(this,function(base){var ls=[];return _visitNode(base,function(node){node!==base&&node.nodeType===ELEMENT_NODE&&("*"===namespaceURI||node.namespaceURI===namespaceURI)&&("*"===localName||node.localName==localName)&&ls.push(node)}),ls})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function substringData(offset,count){return this.data.substring(offset,offset+count)},appendData:function appendData(text){text=this.data+text,this.nodeValue=this.data=text,this.length=text.length},insertData:function insertData(offset,text){this.replaceData(offset,0,text)},appendChild:function appendChild(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function deleteData(offset,count){this.replaceData(offset,count,"")},replaceData:function replaceData(offset,count,text){var start=this.data.substring(0,offset),end=this.data.substring(offset+count);text=start+text+end,this.nodeValue=this.data=text,this.length=text.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function splitText(offset){var text=this.data,newText=text.substring(offset);text=text.substring(0,offset),this.data=this.nodeValue=text,this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);return this.parentNode&&this.parentNode.insertBefore(newNode,this.nextSibling),newNode}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){function getTextContent(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];for(node=node.firstChild;node;)7!==node.nodeType&&8!==node.nodeType&&buf.push(getTextContent(node)),node=node.nextSibling;return buf.join("");default:return node.nodeValue;}}Object.defineProperty(LiveNodeList.prototype,"length",{get:function get(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function get(){return getTextContent(this)},set:function set(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(data||data+"")&&this.appendChild(this.ownerDocument.createTextNode(data));break;default:this.data=data,this.value=data,this.nodeValue=data;}}}),__set__=function __set__(object,key,value){object["$$"+key]=value}}}catch(e){}dom.Node=Node,dom.DOMException=DOMException,dom.DOMImplementation=DOMImplementation$1,dom.XMLSerializer=XMLSerializer,DOMParser.prototype.parseFromString=function(source,mimeType){var options=this.options,sax=new XMLReader,domBuilder=options.domBuilder||new DOMHandler,errorHandler=options.errorHandler,locator=options.locator,defaultNSMap=options.xmlns||{},isHTML=/\/x?html?$/.test(mimeType),entityMap=isHTML?htmlEntity.entityMap:{lt:"<",gt:">",amp:"&",quot:"\"",apos:"'"};return locator&&domBuilder.setDocumentLocator(locator),sax.errorHandler=buildErrorHandler(errorHandler,domBuilder,locator),sax.domBuilder=options.domBuilder||domBuilder,isHTML&&(defaultNSMap[""]="http://www.w3.org/1999/xhtml"),defaultNSMap.xml=defaultNSMap.xml||"http://www.w3.org/XML/1998/namespace",source&&"string"==typeof source?sax.parse(source,defaultNSMap,entityMap):sax.errorHandler.error("invalid doc source"),domBuilder.doc},DOMHandler.prototype={startDocument:function startDocument(){this.doc=new DOMImplementation().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function startElement(namespaceURI,localName,qName,attrs){var doc=this.doc,el=doc.createElementNS(namespaceURI,qName||localName),len=attrs.length;appendElement(this,el),this.currentElement=el,this.locator&&position(this.locator,el);for(var i=0;i<len;i++){var namespaceURI=attrs.getURI(i),value=attrs.getValue(i),qName=attrs.getQName(i),attr=doc.createAttributeNS(namespaceURI,qName);this.locator&&position(attrs.getLocator(i),attr),attr.value=attr.nodeValue=value,el.setAttributeNode(attr)}},endElement:function endElement(namespaceURI,localName,qName){var current=this.currentElement;current.tagName,this.currentElement=current.parentNode},startPrefixMapping:function startPrefixMapping(prefix,uri){},endPrefixMapping:function endPrefixMapping(prefix){},processingInstruction:function processingInstruction(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins),appendElement(this,ins)},ignorableWhitespace:function ignorableWhitespace(ch,start,length){},characters:function characters(chars,start,length){if(chars=_toString.apply(this,arguments),chars){if(this.cdata)var charNode=this.doc.createCDATASection(chars);else var charNode=this.doc.createTextNode(chars);this.currentElement?this.currentElement.appendChild(charNode):/^\s*$/.test(chars)&&this.doc.appendChild(charNode),this.locator&&position(this.locator,charNode)}},skippedEntity:function skippedEntity(name){},endDocument:function endDocument(){this.doc.normalize()},setDocumentLocator:function setDocumentLocator(locator){(this.locator=locator)&&(locator.lineNumber=0)},comment:function comment(chars,start,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm),appendElement(this,comm)},startCDATA:function startCDATA(){this.cdata=!0},endCDATA:function endCDATA(){this.cdata=!1},startDTD:function startDTD(name,publicId,systemId){var impl=this.doc.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt),appendElement(this,dt)}},warning:function warning(error){console.warn("[xmldom warning]\t"+error,_locator(this.locator))},error:function error(_error){console.error("[xmldom error]\t"+_error,_locator(this.locator))},fatalError:function fatalError(error){throw new ParseError(error,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null}});var htmlEntity=entities,sax=sax$1,XMLReader=sax.XMLReader,ParseError=sax.ParseError,DOMImplementation=domParser.DOMImplementation=dom.DOMImplementation;domParser.XMLSerializer=dom.XMLSerializer,domParser.DOMParser=DOMParser,domParser.__DOMHandler=DOMHandler;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(xmldomToMathmlElementAdapter,"__esModule",{value:!0}),xmldomToMathmlElementAdapter.XmlToMathMLAdapter=void 0;var xmldom_1=__importDefault(domParser),XmlToMathMLAdapter=function(){function XmlToMathMLAdapter(elementsConvertor,errorHandler){this._xml="",this._elementsConvertor=elementsConvertor,this._errorHandler=errorHandler,this._xmlDOM=new xmldom_1.default.DOMParser({locator:this._errorHandler.errorLocator,errorHandler:this._fixError.bind(this)})}return XmlToMathMLAdapter.prototype.convert=function(xml){return this._xml=this._removeLineBreaks(xml),this._elementsConvertor.convert(this._mathMLElements)},XmlToMathMLAdapter.prototype._fixError=function(errorMessage){this._xml=this._errorHandler.fixError(this._xml,errorMessage)},XmlToMathMLAdapter.prototype._removeLineBreaks=function(xml){var LINE_BREAK=/\n|\r\n|\r/g;return xml.replace(LINE_BREAK,"")},Object.defineProperty(XmlToMathMLAdapter.prototype,"_mathMLElements",{get:function get(){var elements=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math");return this._errorHandler.isThereAnyErrors()&&(this._errorHandler.cleanErrors(),elements=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math")),Array.from(elements)},enumerable:!1,configurable:!0}),XmlToMathMLAdapter}();xmldomToMathmlElementAdapter.XmlToMathMLAdapter=XmlToMathMLAdapter;var errorHandler={};Object.defineProperty(errorHandler,"__esModule",{value:!0}),errorHandler.ErrorHandler=void 0;var ErrorHandler=function(){function ErrorHandler(){this._errors=[],this.errorLocator={}}return ErrorHandler.prototype.fixError=function(xml,errorMessage){return this._isMissingAttributeValueError(errorMessage)?(this._errors.push(errorMessage),this._fixMissingAttribute(errorMessage,xml)):xml},ErrorHandler.prototype.isThereAnyErrors=function(){return 0<this._errors.length},ErrorHandler.prototype.cleanErrors=function(){this._errors=[]},ErrorHandler.prototype._fixMissingAttribute=function(errorMessage,xml){var missingAttribute=errorMessage.split("\"")[1];if(missingAttribute)return xml.replace(this._matchMissingValueForAttribute(missingAttribute),"");for(;this._mathGenericMissingValue().exec(xml);)xml=xml.replace(this._mathGenericMissingValue(),"$1$3");return xml},ErrorHandler.prototype._matchMissingValueForAttribute=function(attribute){return new RegExp("(".concat(attribute,"=(?!(\"|')))|(").concat(attribute,"(?!(\"|')))"),"gm")},ErrorHandler.prototype._mathGenericMissingValue=function(){return /(\<.* )(\w+=(?!\"|\'))(.*\>)/gm},ErrorHandler.prototype._isMissingAttributeValueError=function(errorMessage){return!!errorMessage.includes("attribute")&&!!errorMessage.includes("missed")||errorMessage.includes("attribute value missed")},ErrorHandler}();errorHandler.ErrorHandler=ErrorHandler;var xmldomElementsToMathmlElementsAdapter={};Object.defineProperty(xmldomElementsToMathmlElementsAdapter,"__esModule",{value:!0}),xmldomElementsToMathmlElementsAdapter.ElementsToMathMLAdapter=void 0;var ElementsToMathMLAdapter=function(){function ElementsToMathMLAdapter(){}return ElementsToMathMLAdapter.prototype.convert=function(els){var _this=this;return els.filter(function(el){return void 0!==el.tagName}).map(function(el){return _this._convertElement(el)})},ElementsToMathMLAdapter.prototype._convertElement=function(el){return{name:el.tagName,attributes:this._convertElementAttributes(el.attributes),value:this._hasElementChild(el)?"":el.textContent||"",children:this._hasElementChild(el)?this.convert(Array.from(el.childNodes)):[]}},ElementsToMathMLAdapter.prototype._convertElementAttributes=function(attributes){return Array.from(attributes).reduce(function(acc,attr){var _a;return Object.assign((_a={},_a[attr.nodeName]=attr.nodeValue===attr.nodeName?"":attr.nodeValue,_a),acc)},{})},ElementsToMathMLAdapter.prototype._hasElementChild=function(el){var childNodes=el.childNodes;return!!childNodes&&0!==childNodes.length&&this._isThereAnyNoTextNode(childNodes)},ElementsToMathMLAdapter.prototype._isThereAnyNoTextNode=function(children){return Array.from(children).some(function(child){return"#text"!==child.nodeName})},ElementsToMathMLAdapter}();xmldomElementsToMathmlElementsAdapter.ElementsToMathMLAdapter=ElementsToMathMLAdapter,function(exports){var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,m,k,k2){k2===void 0&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))&&(desc={enumerable:!0,get:function get(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){k2===void 0&&(k2=k),o[k2]=m[k]}),__exportStar=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,exports){for(var p in m)"default"==p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(xmldomToMathmlElementAdapter,exports),__exportStar(errorHandler,exports),__exportStar(xmldomElementsToMathmlElementsAdapter,exports)}(xmldomToMathmlElements),Object.defineProperty(makeToMathElementsConverter$1,"__esModule",{value:!0}),makeToMathElementsConverter$1.makeToMathElementsConverter=void 0;var xmldom_to_mathml_elements_1=xmldomToMathmlElements;makeToMathElementsConverter$1.makeToMathElementsConverter=function makeToMathElementsConverter(){var elementsToMathMLAdapter=new xmldom_to_mathml_elements_1.ElementsToMathMLAdapter,errorHandler=new xmldom_to_mathml_elements_1.ErrorHandler;return new xmldom_to_mathml_elements_1.XmlToMathMLAdapter(elementsToMathMLAdapter,errorHandler)},function(exports){var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,m,k,k2){k2===void 0&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))&&(desc={enumerable:!0,get:function get(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){k2===void 0&&(k2=k),o[k2]=m[k]}),__exportStar=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,exports){for(var p in m)"default"==p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(makeToMathElementsConverter$1,exports)}(factories),Object.defineProperty(mathmlToLatex,"__esModule",{value:!0}),mathmlToLatex.MathMLToLaTeX=void 0;var mathml_element_to_latex_converter_adapter_1=requireMathmlElementToLatexConverterAdapter(),MathMLToLaTeX=function(){function MathMLToLaTeX(){}return MathMLToLaTeX.convert=function(mathml){var mathmlElements=(0,factories.makeToMathElementsConverter)().convert(mathml),mathmlElementsToLaTeXConverters=mathmlElements.map(function(mathMLElement){return new mathml_element_to_latex_converter_adapter_1.MathMLElementToLatexConverterAdapter(mathMLElement).toLatexConverter()});return mathmlElementsToLaTeXConverters.map(function(toLatexConverters){return toLatexConverters.convert()}).join("")},MathMLToLaTeX}();mathmlToLatex.MathMLToLaTeX=MathMLToLaTeX,function(exports){var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,m,k,k2){k2===void 0&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))&&(desc={enumerable:!0,get:function get(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){k2===void 0&&(k2=k),o[k2]=m[k]}),__exportStar=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,exports){for(var p in m)"default"==p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(mathmlToLatex,exports)}(main),function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var main_1=main;exports.default=main_1.MathMLToLaTeX,module.exports=main_1.MathMLToLaTeX}(dist,dist.exports);var index=function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}(dist.exports);return index}),define("taoQtiItem/portableLib/jquery_2_1_1",[],function(){return function(global,factory){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"==typeof window?this:window,function(window,noGlobal){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return!("function"===type||jQuery.isWindow(obj))&&(!!(1===obj.nodeType&&length)||"array"===type||0===length||"number"==typeof length&&0<length&&length-1 in obj)}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return 0<=indexOf.call(qualifier,elem)!==not})}function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function get(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(elem,key,data){var name;if(void 0===data&&1===elem.nodeType)if(name="data-"+key.replace(rmultiDash,"-$1").toLowerCase(),data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}data_user.set(elem,key,data)}else data=void 0;return data}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11===content.nodeType?content.firstChild:content,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var i=0,l=elems.length;i<l;i++)data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(1===dest.nodeType){if(data_priv.hasData(src)&&(pdataOld=data_priv.access(src),pdataCur=data_priv.set(dest,pdataOld),events=pdataOld.events,events))for(type in delete pdataCur.handle,pdataCur.events={},events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i]);data_user.hasData(src)&&(udataOld=data_user.access(src),udataCur=jQuery.extend({},udataOld),data_user.set(dest,udataCur))}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();"input"===nodeName&&rcheckableType.test(src.type)?dest.checked=src.checked:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display"),style;return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),("none"===display||!display)&&(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),doc=iframe[0].contentDocument,doc.write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function curCSS(elem,name,computed){var style=elem.style,width,minWidth,maxWidth,ret;return computed=computed||getStyles(elem),computed&&(ret=computed.getPropertyValue(name)||computed[name]),computed&&(""===ret&&!jQuery.contains(elem.ownerDocument,elem)&&(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0===ret?ret:ret+""}function addGetHookIf(conditionFn,hookFn){return{get:function get(){return conditionFn()?void delete this.get:(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(style,name){if(name in style)return name;for(var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox="border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){for(var values=[],index=0,length=elements.length,display,elem,hidden;index<length;index++)(elem=elements[index],!!elem.style)&&(values[index]=data_priv.get(elem,"olddisplay"),display=elem.style.display,show?(!values[index]&&"none"===display&&(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),("none"!==display||!hidden)&&data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)(elem=elements[index],!!elem.style)&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var i=0,attrs={height:type},which;for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length,tween;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow"),prop,value,toggle,tween,hooks,oldfire,display,checkDisplay;for(prop in opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),checkDisplay="none"===display?data_priv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display,"inline"===checkDisplay&&"none"===jQuery.css(elem,"float")&&(style.display="inline-block")),opts.overflow&&(style.overflow="hidden",anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]})),props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show"))if("show"===value&&dataShow&&void 0!==dataShow[prop])hidden=!0;else continue;orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(!jQuery.isEmptyObject(orig))for(prop in dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=data_priv.access(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;for(prop in data_priv.remove(elem,"fxshow"),orig)jQuery.style(elem,prop,orig[prop])}),orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0));else"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks)for(index in value=hooks.expand(value),delete props[name],value)index in props||(props[index]=value[index],specialEasing[index]=easing);else specialEasing[name]=easing}function Animation(elem,properties,options){var index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function tick(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function createTween(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function stop(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props,result,stopped;for(propFilter(props,animation.opts.specialEasing);index<length;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts),result)return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[],dataType;if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var flatOptions=jQuery.ajaxSettings.flatOptions||{},key,deep;for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var contents=s.contents,dataTypes=s.dataTypes,ct,type,finalDataType,firstDataType;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response,jqXHR,isSuccess){var converters={},dataTypes=s.dataTypes.slice(),conv2,current,conv,tmp,prev;if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift(),current)if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]],conv)){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"===_typeof(v)?i:"")+"]",v,traditional,add)});else if(!traditional&&"object"===jQuery.type(obj))for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}var arr=[],_slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},document=window.document,version="2.1.1",jQuery=function jQuery(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function fcamelCase(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function toArray(){return _slice.call(this)},get:function get(num){return null==num?_slice.call(this):0>num?this[num+this.length]:this[num]},pushStack:function pushStack(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function each(callback,args){return jQuery.each(this,callback,args)},map:function map(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function slice(){return this.pushStack(_slice.apply(this,arguments))},first:function first(){return this.eq(0)},last:function last(){return this.eq(-1)},eq:function eq(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(0<=j&&j<len?[this[j]]:[])},end:function end(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=!1,options,name,src,copy,copyIsArray,clone;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"===_typeof(target)||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)(src=target[name],copy=options[name],target!==copy)&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function error(msg){throw new Error(msg)},noop:function noop(){},isFunction:function isFunction(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray,isWindow:function isWindow(obj){return null!=obj&&obj===obj.window},isNumeric:function isNumeric(obj){return!jQuery.isArray(obj)&&0<=obj-parseFloat(obj)},isPlainObject:function isPlainObject(obj){return!("object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))&&(!obj.constructor||hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function isEmptyObject(obj){var name;for(name in obj)return!1;return!0},type:function type(obj){return null==obj?obj+"":"object"===_typeof(obj)||"function"==typeof obj?class2type[toString.call(obj)]||"object":_typeof(obj)},globalEval:function globalEval(code){var indirect=eval,script;code=jQuery.trim(code),code&&(1===code.indexOf("use strict")?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function camelCase(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function each(obj,callback,args){var i=0,length=obj.length,isArray=isArraylike(obj),value;if(args){if(isArray)for(;i<length&&(value=callback.apply(obj[i],args),!1!==value);i++);else for(i in obj)if(value=callback.apply(obj[i],args),!1===value)break;}else if(isArray)for(;i<length&&(value=callback.call(obj[i],i,obj[i]),!1!==value);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),!1===value)break;return obj},trim:function trim(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function makeArray(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function inArray(elem,arr,i){return null==arr?-1:indexOf.call(arr,elem,i)},merge:function merge(first,second){for(var len=+second.length,j=0,i=first.length;j<len;j++)first[i++]=second[j];return first.length=i,first},grep:function grep(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert,callbackInverse;i<length;i++)callbackInverse=!callback(elems[i],i),callbackInverse!==callbackExpect&&matches.push(elems[i]);return matches},map:function map(elems,callback,arg){var i=0,length=elems.length,isArray=isArraylike(elems),ret=[],value;if(isArray)for(;i<length;i++)value=callback(elems[i],i,arg),null!=value&&ret.push(value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function proxy(fn,context){var tmp,args,proxy;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),!!jQuery.isFunction(fn))return args=_slice.call(arguments,2),proxy=function proxy(){return fn.apply(context||this,args.concat(_slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:Date.now,support:support}),jQuery.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(!(m=match[1])){if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}else if(9===nodeType){if(elem=context.getElementById(m),!(elem&&elem.parentNode))return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results;if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var matchIndexes=fn([],seed.length,argument),i=matchIndexes.length,j;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&"undefined"!==_typeof(context.getElementsByTagName)&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var newCache=[dirruns,doneName],oldCache,outerCache;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0;}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return 1<matchers.length?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map,elem;i<len;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn,temp,i,elem;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(!seed)matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut);else if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&-1<(temp=postFinder?indexOf.call(seed,elem):preMap[i])&&(seed[temp]=!(results[temp]=elem))}})}function matcherFromTokens(tokens){for(var len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return-1<indexOf.call(checkContext,elem)},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}],checkContext,matcher,j;i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(1<i&&elementMatcher(matchers),1<i&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=0<setMatchers.length,byElement=0<elementMatchers.length,superMatcher=function superMatcher(seed,context,xml,results,outermost){var matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length,elem,j,matcher;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(0<matchedCount)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&0<setMatched.length&&1<matchedCount+setMatchers.length&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}var expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function sortOrder(a,b){return a===b&&(hasDuplicate=!0),0},strundefined=0?_typeof(void 0):"undefined",MAX_NEGATIVE=-2147483648,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),attributes="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w#-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]",pseudos=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w#-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)",rtrim=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,rcomma=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,rcombinators=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,rattributeQuotes=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,rpseudo=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w#-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,ridentifier=/^(?:\\.|[\w#-]|[^\x00-\xa0])+$/,matchExpr={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w*-]|[^\x00-\xa0])+)/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w#-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w#-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,funescape=function funescape(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(55296|high>>10,56320|1023&high)},i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains;try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView,hasCompare;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",function(){setDocument()},!1):parent.attachEvent&&parent.attachEvent("onunload",function(){setDocument()})),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert(function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length}),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if("undefined"!==_typeof(context.getElementById)&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node="undefined"!==_typeof(elem.getAttributeNode)&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){if("undefined"!==_typeof(context.getElementsByTagName))return context.getElementsByTagName(tag)}:function(tag,context){var tmp=[],i=0,results=context.getElementsByTagName(tag),elem;if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if("undefined"!==_typeof(context.getElementsByClassName)&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select msallowclip=''><option selected=''></option></select>",div.querySelectorAll("[msallowclip^='']").length&&rbuggyQSA.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w#-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&1===bup.nodeType&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare?compare:(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b],cur;if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return 0<Sizzle(expr,document,null,[elem]).length},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0===val?support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null:val},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var duplicates=[],j=0,i=0,elem;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var ret="",i=0,nodeType=elem.nodeType,node;if(!nodeType)for(;node=elem[i++];)ret+=getText(node);else if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue;return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function ATTR(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function CHILD(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(!match[3]&&Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function PSEUDO(match){var unquoted=!match[6]&&match[2],excess;return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function TAG(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function CLASS(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+className+"([\\x20\\t\\r\\n\\f]|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||"undefined"!==_typeof(elem.getAttribute)&&elem.getAttribute("class")||"")})},ATTR:function ATTR(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&-1<result.indexOf(check):"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?-1<(" "+result+" ").indexOf(check):"|="==operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function CHILD(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var dir=simple===forward?"previousSibling":"nextSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,cache,outerCache,node,diff,nodeIndex,start;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&!((ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)&&++diff&&(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node===elem)););return diff-=last,diff===first||0==diff%first&&0<=diff/first}}},PSEUDO:function PSEUDO(pseudo,argument){var fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo),args;return fn[expando]?fn(argument):1<fn.length?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var matched=fn(seed,argument),i=matched.length,idx;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var unmatched=matcher(seed,null,xml,[]),i=seed.length,elem;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return 0<Sizzle(selector,elem).length}}),contains:markFunction(function(text){return function(elem){return-1<(elem.textContent||elem.innerText||getText(elem)).indexOf(text)}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function target(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function root(elem){return elem===docElem},focus:function focus(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function enabled(elem){return!1===elem.disabled},disabled:function disabled(elem){return!0===elem.disabled},checked:function checked(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function selected(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function empty(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(6>elem.nodeType)return!1;return!0},parent:function parent(elem){return!Expr.pseudos.empty(elem)},header:function header(elem){return rheader.test(elem.nodeName)},input:function input(elem){return rinputs.test(elem.nodeName)},button:function button(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function text(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;0<=--i;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var cached=tokenCache[selector+" "],matched,match,tokens,type,soFar,groups,preFilters;if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)(match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))&&(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "],i;if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector),i,tokens,token,type,find;if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),2<tokens.length&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function find(selector){var len=this.length,ret=[],self=this,i;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(1<len?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},filter:function filter(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function not(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function is(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector[0]&&">"===selector[selector.length-1]&&3<=selector.length?[null,selector,null]:rquickExpr.exec(selector),match&&(match[1]||!context)){if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}return elem=document.getElementById(match[2]),elem&&elem.parentNode&&(this.length=1,this[0]=elem),this.context=document,this.selector=selector,this}return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector)}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?"undefined"==typeof rootjQuery.ready?selector(jQuery):rootjQuery.ready(selector):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},rootjQuery;init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(_dir){function dir(_x,_x2,_x3){return _dir.apply(this,arguments)}return dir.toString=function(){return _dir.toString()},dir}(function(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched}),sibling:function sibling(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched}}),jQuery.fn.extend({has:function has(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){for(var i=0;i<l;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function closest(selectors,context){for(var i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0,cur;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(11>cur.nodeType&&(pos?-1<pos.index(cur):1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(1<matched.length?jQuery.unique(matched):matched)},index:function index(elem){return elem?"string"==typeof elem?indexOf.call(jQuery(elem),this[0]):indexOf.call(this,elem.jquery?elem[0]:elem):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function add(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function addBack(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function parent(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function parents(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function parentsUntil(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function next(elem){return sibling(elem,"nextSibling")},prev:function prev(elem){return sibling(elem,"previousSibling")},nextAll:function nextAll(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function prevAll(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function nextUntil(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function prevUntil(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function siblings(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function children(elem){return jQuery.sibling(elem.firstChild)},contents:function contents(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(matched=jQuery.filter(selector,matched)),1<this.length&&(!guaranteedUnique[name]&&jQuery.unique(matched),rparentsprev.test(name)&&matched.reverse()),this.pushStack(matched)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var list=[],stack=!options.once&&[],fire=function fire(data){for(memory=options.memory&&data,_fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingIndex<firingLength;firingIndex++)if(!1===list[firingIndex].apply(data[0],data[1])&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function add(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?(!options.unique||!self.has(arg))&&list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})})(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function remove(){return list&&jQuery.each(arguments,function(_,arg){for(var index;-1<(index=jQuery.inArray(arg,list,index));)list.splice(index,1),firing&&(index<=firingLength&&firingLength--,index<=firingIndex&&firingIndex--)}),this},has:function has(fn){return fn?-1<jQuery.inArray(fn,list):!!(list&&list.length)},empty:function empty(){return list=[],firingLength=0,this},disable:function disable(){return list=stack=memory=void 0,this},disabled:function disabled(){return!list},lock:function lock(){return stack=void 0,memory||self.disable(),this},locked:function locked(){return!stack},fireWith:function fireWith(context,args){return list&&(!_fired||stack)&&(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function fire(){return self.fireWith(this,arguments),this},fired:function fired(){return!!_fired}},memory,_fired,firing,firingStart,firingLength,firingIndex;return self},jQuery.extend({Deferred:function Deferred(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],_state="pending",_promise={state:function state(){return _state},always:function always(){return deferred.done(arguments).fail(arguments),this},then:function then(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===_promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function promise(obj){return null==obj?_promise:jQuery.extend(obj,_promise)}},deferred={};return _promise.pipe=_promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];_promise[tuple[1]]=list.add,stateString&&list.add(function(){_state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?_promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),_promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function when(subordinate){var i=0,resolveValues=_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function updateFunc(i,contexts,values){return function(value){contexts[i]=this,values[i]=1<arguments.length?_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):! --remaining&&deferred.resolveWith(contexts,values)}},progressValues,progressContexts,resolveContexts;if(1<length)for(progressValues=Array(length),progressContexts=Array(length),resolveContexts=Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function holdReady(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function ready(wait){(!0===wait?! --jQuery.readyWait:!jQuery.isReady)&&(jQuery.isReady=!0,!0!==wait&&0<--jQuery.readyWait||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))))}}),jQuery.ready.promise=function(obj){return readyList||(readyList=jQuery.Deferred(),"complete"===document.readyState?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(obj)},jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=null==key;if("object"===jQuery.type(key))for(i in chainable=!0,key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw);else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function fn(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<len;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return 1===owner.nodeType||9===owner.nodeType||!+owner.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function key(owner){if(!Data.accepts(owner))return 0;var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock},Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock,jQuery.extend(owner,descriptor)}}return this.cache[unlock]||(this.cache[unlock]={}),unlock},set:function set(owner,data,value){var unlock=this.key(owner),cache=this.cache[unlock],prop;if("string"==typeof data)cache[data]=value;else if(jQuery.isEmptyObject(cache))jQuery.extend(this.cache[unlock],data);else for(prop in data)cache[prop]=data[prop];return cache},get:function get(owner,key){var cache=this.cache[this.key(owner)];return void 0===key?cache:cache[key]},access:function access(owner,key,value){var stored;return void 0===key||key&&"string"==typeof key&&void 0===value?(stored=this.get(owner,key),void 0===stored?this.get(owner,jQuery.camelCase(key)):stored):(this.set(owner,key,value),void 0===value?key:value)},remove:function remove(owner,key){var unlock=this.key(owner),cache=this.cache[unlock],i,name,camel;if(void 0===key)this.cache[unlock]={};else for(jQuery.isArray(key)?name=key.concat(key.map(jQuery.camelCase)):(camel=jQuery.camelCase(key),(key in cache)?name=[key,camel]:(name=camel,name=(name in cache)?[name]:name.match(rnotwhite)||[])),i=name.length;i--;)delete cache[name[i]]},hasData:function hasData(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function discard(owner){owner[this.expando]&&delete this.cache[owner[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function hasData(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function data(elem,name,_data){return data_user.access(elem,name,_data)},removeData:function removeData(elem,name){data_user.remove(elem,name)},_data:function _data(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function _removeData(elem,name){data_priv.remove(elem,name)}}),jQuery.fn.extend({data:function data(key,value){var elem=this[0],attrs=elem&&elem.attributes,i,name,data;if(void 0===key){if(this.length&&(data=data_user.get(elem),1===elem.nodeType&&!data_priv.get(elem,"hasDataAttrs"))){for(i=attrs.length;i--;)attrs[i]&&(name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])));data_priv.set(elem,"hasDataAttrs",!0)}return data}return"object"===_typeof(key)?this.each(function(){data_user.set(this,key)}):access(this,function(value){var camelKey=jQuery.camelCase(key),data;return elem&&void 0===value?(data=data_user.get(elem,key),void 0!==data)?data:(data=data_user.get(elem,camelKey),void 0!==data)?data:(data=dataAttr(elem,camelKey,void 0),void 0===data?void 0:data):void this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value),-1!==key.indexOf("-")&&void 0!==data&&data_user.set(this,key,value)})},null,value,1<arguments.length,null,!0)},removeData:function removeData(key){return this.each(function(){data_user.remove(this,key)})}}),jQuery.extend({queue:function queue(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=data_priv.get(elem,type),data&&(!queue||jQuery.isArray(data)?queue=data_priv.access(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function dequeue(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function next(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function _queueHooks(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}}),jQuery.fn.extend({queue:function queue(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function dequeue(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function clearQueue(type){return this.queue(type||"fx",[])},promise:function promise(type,obj){var count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function resolve(){--count||defer.resolveWith(elements,[elements])},tmp;for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)tmp=data_priv.get(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue})();var strundefined=0?_typeof(void 0):"undefined";support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function add(elem,types,handler,data,selector){var elemData=data_priv.get(elem),handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType;if(elemData)for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return"undefined"!==_typeof(jQuery)&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):void 0}),types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),!!type)&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,(!special.setup||!1===special.setup.call(elem,data,namespaces,eventHandle))&&elem.addEventListener&&elem.addEventListener(type,eventHandle,!1)),special.add&&(special.add.call(elem,handleObj),!handleObj.handler.guid&&(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0)},remove:function remove(elem,types,handler,selector,mappedTypes){var elemData=data_priv.hasData(elem)&&data_priv.get(elem),j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType;if(elemData&&(events=elemData.events)){for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;){if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),!type){for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);continue}for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],(mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||"**"===selector&&handleObj.selector)&&(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&((!special.teardown||!1===special.teardown.call(elem,namespaces,elemData.handle))&&jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}jQuery.isEmptyObject(events)&&(delete elemData.handle,data_priv.remove(elem,"events"))}},trigger:function trigger(event,data,elem,onlyHandlers){var eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[],i,cur,tmp,bubbleType,ontype,handle,special;if((cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType)&&!rfocusMorph.test(type+jQuery.event.triggered)&&(0<=type.indexOf(".")&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=0>type.indexOf(":")&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"===_typeof(event)&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=1<i?bubbleType:special.bindType||type,handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault());return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&!1!==special._default.apply(eventPath.pop(),data)||!jQuery.acceptData(elem)||!ontype||!jQuery.isFunction(elem[type])||jQuery.isWindow(elem)||(tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)),event.result}},dispatch:function dispatch(event){event=jQuery.event.fix(event);var handlerQueue=[],args=_slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{},i,j,ret,matched,handleObj;if(args[0]=event,event.delegateTarget=this,!(special.preDispatch&&!1===special.preDispatch.call(this,event))){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)(!event.namespace_re||event.namespace_re.test(handleObj.namespace))&&(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),void 0!==ret&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function handlers(event,_handlers){var handlerQueue=[],delegateCount=_handlers.delegateCount,cur=event.target,i,matches,sel,handleObj;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!==this;cur=cur.parentNode||this)if(!0!==cur.disabled||"click"!==event.type){for(matches=[],i=0;i<delegateCount;i++)handleObj=_handlers[i],sel=handleObj.selector+" ",void 0===matches[sel]&&(matches[sel]=handleObj.needsContext?0<=jQuery(sel,this).index(cur):jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<_handlers.length&&handlerQueue.push({elem:this,handlers:_handlers.slice(delegateCount)}),handlerQueue},props:["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","view","which"],fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function filter(event,original){return null==event.which&&(event.which=null==original.charCode?original.keyCode:original.charCode),event}},mouseHooks:{props:["button","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement"],filter:function filter(event,original){var button=original.button,eventDoc,doc,body;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},fix:function fix(event){if(event[jQuery.expando])return event;var type=event.type,originalEvent=event,fixHook=this.fixHooks[type],i,prop,copy;for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=document),3===event.target.nodeType&&(event.target=event.target.parentNode),fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:!0},focus:{trigger:function trigger(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function trigger(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function trigger(){if("checkbox"===this.type&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function _default(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function postDispatch(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function simulate(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)},jQuery.Event=function(src,props){return this instanceof jQuery.Event?void(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0):new jQuery.Event(src,props)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function preventDefault(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function stopPropagation(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function stopImmediatePropagation(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function handle(event){var target=this,related=event.relatedTarget,handleObj=event.handleObj,ret;return related&&(related===target||jQuery.contains(target,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function handler(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function setup(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);attaches||doc.addEventListener(orig,handler,!0),data_priv.access(doc,fix,(attaches||0)+1)},teardown:function teardown(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;attaches?data_priv.access(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),data_priv.remove(doc,fix))}}}),jQuery.fn.extend({on:function on(types,selector,data,fn,one){var origFn,type;if("object"===_typeof(types)){for(type in"string"!=typeof selector&&(data=data||selector,selector=void 0),types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function fn(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function one(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function off(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"===_typeof(types)){for(type in types)this.off(type,selector,types[type]);return this}return(!1===selector||"function"==typeof selector)&&(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function trigger(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function triggerHandler(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function clone(elem,dataAndEvents,deepDataAndEvents){var clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem),i,l,srcElements,destElements;if(!support.noCloneChecked&&(1===elem.nodeType||11===elem.nodeType)&&!jQuery.isXMLDoc(elem))for(destElements=getAll(clone),srcElements=getAll(elem),(i=0,l=srcElements.length);i<l;i++)fixInput(srcElements[i],destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),(i=0,l=srcElements.length);i<l;i++)cloneCopyEvent(srcElements[i],destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),0<destElements.length&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),clone},buildFragment:function buildFragment(elems,context,scripts,selection){for(var fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length,elem,tmp,tag,wrap,contains,j;i<l;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(!rhtml.test(elem))nodes.push(context.createTextNode(elem));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}for(fragment.textContent="",i=0;elem=nodes[i++];)if(!(selection&&-1!==jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return fragment},cleanData:function cleanData(elems){for(var special=jQuery.event.special,i=0,data,elem,type,key;void 0!==(elem=elems[i]);i++){if(jQuery.acceptData(elem)&&(key=elem[data_priv.expando],key&&(data=data_priv.cache[key]))){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);data_priv.cache[key]&&delete data_priv.cache[key]}delete data_user.cache[elem[data_user.expando]]}}}),jQuery.fn.extend({text:function text(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=value)})},null,value,arguments.length)},append:function append(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function prepend(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function before(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function after(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function remove(selector,keepData){for(var elems=selector?jQuery.filter(selector,this):this,i=0,elem;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function empty(){for(var i=0,elem;null!=(elem=this[i]);i++)1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.textContent="");return this},clone:function clone(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function html(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value&&1===elem.nodeType)return elem.innerHTML;if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function replaceWith(){var arg=arguments[0];return this.domManip(arguments,function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function detach(selector){return this.remove(selector,!0)},domManip:function domManip(args,callback){args=concat.apply([],args);var i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value),fragment,first,scripts,hasScripts,node,doc;if(isFunction||1<l&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval(node.textContent.replace(rcleanScript,"")))}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var ret=[],insert=jQuery(selector),last=insert.length-1,i=0,elems;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function getStyles(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)},iframe;(function(){function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",div.innerHTML="",docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal="1%"!==divStyle.top,boxSizingReliableVal="4px"===divStyle.width,docElem.removeChild(container)}var docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div"),pixelPositionVal,boxSizingReliableVal;div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",container.appendChild(div),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function pixelPosition(){return computePixelPositionAndBoxSizingReliable(),pixelPositionVal},boxSizingReliable:function boxSizingReliable(){return null==boxSizingReliableVal&&computePixelPositionAndBoxSizingReliable(),boxSizingReliableVal},reliableMarginRight:function reliableMarginRight(){var marginDiv=div.appendChild(document.createElement("div")),ret;return marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",docElem.appendChild(container),ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight),docElem.removeChild(container),ret}}))})(),jQuery.swap=function(elem,options,callback,args){var old={},ret,name;for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in ret=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function get(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function style(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var origName=jQuery.camelCase(name),style=elem.style,ret,type,hooks;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0!==value){if(type=_typeof(value),"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null==value||value!==value)return;"number"!==type||jQuery.cssNumber[origName]||(value+="px"),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra))||(style[name]=value)}else return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name]}},css:function css(elem,name,extra,styles){var origName=jQuery.camelCase(name),val,num,hooks;return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function get(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function set(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function expand(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function css(name,value){return access(this,function(elem,name,value){var map={},i=0,styles,len;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0===value?jQuery.css(elem,name):jQuery.style(elem,name,value)},name,value,1<arguments.length)},show:function show(){return showHide(this,!0)},hide:function hide(){return showHide(this)},toggle:function toggle(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function init(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function cur(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function run(percent){var hooks=Tween.propHooks[this.prop],eased;return this.pos=this.options.duration?eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function get(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function set(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function set(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function linear(p){return p},swing:function swing(p){return .5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]},fxNow,timerId;jQuery.Animation=jQuery.extend(Animation,{tweener:function tweener(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var index=0,length=props.length,prop;index<length;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function prefilter(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"===_typeof(speed)?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||!0===opt.queue)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function fadeTo(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function animate(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function doAnimation(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||data_priv.get(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function stop(type,clearQueue,gotoEnd){var stopQueue=function stopQueue(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem===this&&(null==type||timers[index].queue===type)&&(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function finish(type){return!1!==type&&(type=type||"fx"),this.each(function(){var data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0,index;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var i=0,timers=jQuery.timers,timer;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.value="t",input.type="radio",support.radioValue="t"===input.value}();var attrHandle=jQuery.expr.attrHandle,nodeHook,boolHook;jQuery.fn.extend({attr:function attr(name,value){return access(this,jQuery.attr,name,value,1<arguments.length)},removeAttr:function removeAttr(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function attr(elem,name,value){var nType=elem.nodeType,hooks,ret;if(elem&&3!==nType&&8!==nType&&2!==nType){if("undefined"===_typeof(elem.getAttribute))return jQuery.prop(elem,name,value);if(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0===value)return hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?void 0:ret);if(null===value)jQuery.removeAttr(elem,name);else return hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value)}},removeAttr:function removeAttr(elem,value){var i=0,attrNames=value&&value.match(rnotwhite),name,propName;if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)&&(elem[propName]=!1),elem.removeAttribute(name)},attrHooks:{type:{set:function set(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function set(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):elem.setAttribute(name,name),name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null==getter(elem,name,isXML)?null:name.toLowerCase(),attrHandle[name]=handle),ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function prop(name,value){return access(this,jQuery.prop,name,value,1<arguments.length)},removeProp:function removeProp(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}}),jQuery.extend({propFix:{for:"htmlFor",class:"className"},prop:function prop(elem,name,value){var nType=elem.nodeType,ret,hooks,notxml;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0===value?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]:hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value},propHooks:{tabIndex:{get:function get(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function get(elem){var parent=elem.parentNode;return parent&&parent.parentNode&&parent.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function addClass(value){var proceed="string"==typeof value&&value,i=0,len=this.length,classes,elem,cur,clazz,j,finalValue;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" "),cur){for(j=0;clazz=classes[j++];)0>cur.indexOf(" "+clazz+" ")&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function removeClass(value){var proceed=0===arguments.length||"string"==typeof value&&value,i=0,len=this.length,classes,elem,cur,clazz,j,finalValue;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):""),cur){for(j=0;clazz=classes[j++];)for(;0<=cur.indexOf(" "+clazz+" ");)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function toggleClass(value,stateVal){var type=_typeof(value);return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[],className;className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else("undefined"===type||"boolean"===type)&&(this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||!1===value?"":data_priv.get(this,"__className__")||"")})},hasClass:function hasClass(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(rclass," ").indexOf(className))return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function val(value){var elem=this[0],hooks,ret,isFunction;return arguments.length?(isFunction=jQuery.isFunction(value),this.each(function(i){var val;1!==this.nodeType||(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],(!hooks||!("set"in hooks)||void 0===hooks.set(this,val,"value"))&&(this.value=val))})):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value")))?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret):void 0}}),jQuery.extend({valHooks:{option:{get:function get(elem){var val=jQuery.find.attr(elem,"value");return null==val?jQuery.trim(jQuery.text(elem)):val}},select:{get:function get(elem){for(var options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0,value,option;i<max;i++)if(option=options[i],(option.selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function set(elem,value){for(var options=elem.options,values=jQuery.makeArray(value),i=options.length,optionSet,option;i--;)option=options[i],(option.selected=0<=jQuery.inArray(option.value,values))&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function set(elem,value){if(jQuery.isArray(value))return elem.checked=0<=jQuery.inArray(jQuery(elem).val(),value)}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})}),jQuery.each(["blur","focus","focusin","focusout","load","resize","scroll","unload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","error","contextmenu"],function(i,name){jQuery.fn[name]=function(data,fn){return 0<arguments.length?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function hover(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function bind(types,data,fn){return this.on(types,null,data,fn)},unbind:function unbind(types,fn){return this.off(types,null,fn)},delegate:function delegate(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function undelegate(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")},jQuery.parseXML=function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=void 0}return(!xml||xml.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+data),xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocParts,ajaxLocation;try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function ajaxSetup(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function ajax(url,options){function done(status,nativeStatusText,responses,headers){var statusText=nativeStatusText,isSuccess,success,error,response,modified;2===state||(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=0<status?4:0,isSuccess=200<=status&&300>status||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,(status||!statusText)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(_statusCode),_statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),! --jQuery.active&&jQuery.event.trigger("ajaxStop")))}"object"===_typeof(url)&&(options=url,url=void 0),options=options||{};var s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),_statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function getResponseHeader(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function getAllResponseHeaders(){return 2===state?responseHeadersString:null},setRequestHeader:function setRequestHeader(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function overrideMimeType(type){return state||(s.mimeType=type),this},statusCode:function statusCode(map){var code;if(map)if(2>state)for(code in map)_statusCode[code]=[_statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function abort(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}},transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i;if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||("http:"===parts[1]?"80":"443"))!==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443"))))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2==state)return jqXHR;for(i in fireGlobals=s.global,fireGlobals&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"===s.dataTypes[0]?"":", */*; q=0.01"):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();for(i in strAbort="abort",{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR),!transport)done(-1,"No Transport");else{jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&0<s.timeout&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(2>state)done(-1,e);else throw e}}return jqXHR},getJSON:function getJSON(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function getScript(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function wrapAll(html){var wrap;return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapAll(html.call(this,i))}):(this[0]&&(wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstElementChild;)elem=elem.firstElementChild;return elem}).append(this)),this)},wrapInner:function wrapInner(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function wrap(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function unwrap(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return 0>=elem.offsetWidth&&0>=elem.offsetHeight},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var s=[],add=function add(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)},prefix;if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function serialize(){return jQuery.param(this.serializeArray())},serializeArray:function serializeArray(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.ActiveXObject&&jQuery(window).on("unload",function(){for(var key in xhrCallbacks)xhrCallbacks[key]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(options){var _callback;if(support.cors||xhrSupported&&!options.crossDomain)return{send:function send(headers,complete){var xhr=options.xhr(),id=++xhrId,i;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];for(i in options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),headers)xhr.setRequestHeader(i,headers[i]);_callback=function callback(type){return function(){_callback&&(delete xhrCallbacks[id],_callback=xhr.onload=xhr.onerror=null,"abort"===type?xhr.abort():"error"===type?complete(xhr.status,xhr.statusText):complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"string"==typeof xhr.responseText?{text:xhr.responseText}:void 0,xhr.getAllResponseHeaders()))}},xhr.onload=_callback(),xhr.onerror=_callback("error"),_callback=xhrCallbacks[id]=_callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(_callback)throw e}},abort:function abort(){_callback&&_callback()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function textScript(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,_callback2;return{send:function send(_,complete){script=jQuery("<script>").prop({async:!0,charset:s.scriptCharset,src:s.url}).on("load error",_callback2=function callback(evt){script.remove(),_callback2=null,evt&&complete("error"===evt.type?404:200,evt.type)}),document.head.appendChild(script[0])},abort:function abort(){_callback2&&_callback2()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function jsonpCallback(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data"),callbackName,overwritten,responseContainer;if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var self=this,off=url.indexOf(" "),selector,type,response;return 0<=off&&(selector=jQuery.trim(url.slice(off)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"===_typeof(params)&&(type="POST"),0<self.length&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function setOffset(elem,options,i){var position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={},curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition;"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&-1<(curCSSTop+curCSSLeft).indexOf("auto"),calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function offset(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument,docElem,win;if(doc)return(docElem=doc.documentElement,!jQuery.contains(docElem,elem))?box:("undefined"!==_typeof(elem.getBoundingClientRect)&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft})},position:function position(){if(this[0]){var elem=this[0],parentOffset={top:0,left:0},offsetParent,offset;return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),!jQuery.nodeName(offsetParent[0],"html")&&(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function offsetParent(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);return void 0===val?win?win[prop]:elem[method]:void(win?win.scrollTo(top?window.pageXOffset:val,top?val:window.pageYOffset):elem[method]=val)},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack;var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},"undefined"===_typeof(noGlobal)&&(window.jQuery=window.$=jQuery),jQuery}),jQuery.noConflict(!0)}),define("mathEntryInteraction/runtime/mathquill/mathquill",["taoQtiItem/portableLib/jquery_2_1_1"],function(jQuery){function noop(){}function variadic(fn){var numFixedArgs=fn.length-1;return function(){var args=__slice.call(arguments,0,numFixedArgs),varArg=__slice.call(arguments,numFixedArgs);return fn.apply(this,args.concat([varArg]))}}function iterator(generator){return variadic(function(fn,args){"function"!=typeof fn&&(fn=send(fn));var yield_=function yield_(obj){return fn.apply(obj,[obj].concat(args))};return generator.call(this,yield_)})}function bind(cons){var args=__slice.call(arguments,1);return function(){return cons.apply(this,args)}}function pray(message,cond){if(!cond)throw new Error("prayer failed: "+message)}function prayDirection(dir){pray("a direction was passed",dir===-1||dir===1)}function prayWellFormed(parent,leftward,rightward){pray("a parent is always present",parent),pray("leftward is properly set up",function(){return leftward?leftward[1]===rightward&&leftward.parent===parent:parent.ends[-1]===rightward}()),pray("rightward is properly set up",function(){return rightward?rightward[-1]===leftward&&rightward.parent===parent:parent.ends[1]===leftward}())}function insistOnInterVer(){window.console&&console.warn("You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the \"`dev` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide\" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide")}function MathQuill(el){return insistOnInterVer(),MQ1(el)}function getInterface(v){function MQ(el){if(!el||!el.nodeType)return null;var blockId=$(el).children(".mq-root-block").attr("mathquill-block-id"),ctrlr=blockId&&Node.byId[blockId].controller;return ctrlr?APIClasses[ctrlr.KIND_OF_MQ](ctrlr):null}function config(currentOptions,newOptions){for(var name in newOptions&&newOptions.handlers&&(newOptions.handlers={fns:newOptions.handlers,APIClasses:APIClasses}),newOptions)if(newOptions.hasOwnProperty(name)){var value=newOptions[name],processor=optionProcessors[name];currentOptions[name]=processor?processor(value):value}}if(!(MIN<=v&&v<=MAX))throw"Only interface versions between "+MIN+" and "+MAX+" supported. You specified: "+v;var APIClasses={};MQ.L=-1,MQ.R=1,MQ.saneKeyboardEvents=saneKeyboardEvents,MQ.config=function(opts){return config(Options.p,opts),this},MQ.registerEmbed=function(name,options){if(!/^[a-z][a-z0-9]*$/i.test(name))throw"Embed name must start with letter and be only letters and digits";EMBEDS[name]=options};var AbstractMathQuill=APIClasses.AbstractMathQuill=P(Progenote,function(_){_.init=function(ctrlr){this.__controller=ctrlr,this.__options=ctrlr.options,this.id=ctrlr.id,this.data=ctrlr.data},_.__mathquillify=function(classNames){var ctrlr=this.__controller,root=ctrlr.root,el=ctrlr.container;ctrlr.createTextarea();var contents=el.addClass(classNames).contents().detach();root.jQ=$("<span class=\"mq-root-block\"/>").attr("mathquill-block-id",root.id).appendTo(el),this.latex(contents.text()),this.revert=function(){return el.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(contents)}},_.config=function(opts){return config(this.__options,opts),this},_.el=function(){return this.__controller.container[0]},_.text=function(){return this.__controller.exportText()},_.latex=function(latex){return 0<arguments.length?(this.__controller.renderLatexMath(latex),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},_.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},_.reflow=function(){return this.__controller.root.postOrder("reflow"),this}});for(var kind in MQ.prototype=AbstractMathQuill.prototype,APIClasses.EditableField=P(AbstractMathQuill,function(_,super_){_.__mathquillify=function(){return super_.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},_.focus=function(){return this.__controller.textarea.focus(),this},_.blur=function(){return this.__controller.textarea.blur(),this},_.write=function(latex){return this.__controller.writeLatex(latex),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},_.empty=function(){var root=this.__controller.root,cursor=this.__controller.cursor;return root.eachChild("postOrder","dispose"),root.ends[-1]=root.ends[1]=0,root.jQ.empty(),delete cursor.selection,cursor.insAtRightEnd(root),this},_.cmd=function(cmd){var ctrlr=this.__controller.notify(),cursor=ctrlr.cursor;if(/^\\[a-z]+$/i.test(cmd)&&!cursor.isTooDeep()){cmd=cmd.slice(1);var klass=LatexCmds[cmd]||Environments[cmd];if(klass)cmd=klass(cmd),cursor.selection&&cmd.replaces(cursor.replaceSelection()),cmd.createLeftOf(cursor.show()),this.__controller.scrollHoriz();else;}else cursor.parent.write(cursor,cmd);return ctrlr.blurred&&cursor.hide().parent.blur(),this},_.select=function(){var ctrlr=this.__controller;for(ctrlr.notify("move").cursor.insAtRightEnd(ctrlr.root);ctrlr.cursor[-1];)ctrlr.selectLeft();return this},_.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},_.moveToDirEnd=function(dir){return this.__controller.notify("move").cursor.insAtDirEnd(dir,this.__controller.root),this},_.moveToLeftEnd=function(){return this.moveToDirEnd(-1)},_.moveToRightEnd=function(){return this.moveToDirEnd(1)},_.keystroke=function(keys){for(var keys=keys.replace(/^\s+|\s+$/g,"").split(/\s+/),i=0;i<keys.length;i+=1)this.__controller.keystroke(keys[i],{preventDefault:noop});return this},_.typedText=function(text){for(var i=0;i<text.length;i+=1)this.__controller.typedText(text.charAt(i));return this},_.dropEmbedded=function(pageX,pageY,options){var clientX=pageX-$(window).scrollLeft(),clientY=pageY-$(window).scrollTop(),el=document.elementFromPoint(clientX,clientY);this.__controller.seek($(el),pageX,pageY);var cmd=Embed().setOptions(options);cmd.createLeftOf(this.__controller.cursor)},_.clickAt=function(clientX,clientY,target){target=target||document.elementFromPoint(clientX,clientY);var ctrlr=this.__controller,root=ctrlr.root;return jQuery.contains(root.jQ[0],target)||(target=root.jQ[0]),ctrlr.seek($(target),clientX+pageXOffset,clientY+pageYOffset),ctrlr.blurred&&this.focus(),this},_.ignoreNextMousedown=function(fn){return this.__controller.cursor.options.ignoreNextMousedown=fn,this}}),MQ.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},MQ.EditableField.prototype=APIClasses.EditableField.prototype,API)(function(kind,defAPIClass){var APIClass=APIClasses[kind]=defAPIClass(APIClasses);MQ[kind]=function(el,opts){var mq=MQ(el);if(mq instanceof APIClass||!el||!el.nodeType)return mq;var ctrlr=Controller(APIClass.RootBlock(),$(el),Options());return ctrlr.KIND_OF_MQ=kind,APIClass(ctrlr).__mathquillify(opts,v)},MQ[kind].prototype=APIClass.prototype})(kind,API[kind]);return MQ}function RootBlockMixin(_){for(var names=["moveOutOf","deleteOutOf","selectOutOf","upOutOf","downOutOf"],i=0;i<names.length;i+=1)(function(name){_[name]=function(dir){this.controller.handle(name,dir)}})(names[i]);_.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function makeTextBlock(latex,tagName,attrs){return P(TextBlock,{ctrlSeq:latex,htmlTemplate:"<"+tagName+" "+attrs+">&0</"+tagName+">"})}function insLeftOfMeUnlessAtEnd(cursor){var cmd=this.parent,ancestorCmd=cursor;do{if(ancestorCmd[1])return cursor.insLeftOf(cmd);ancestorCmd=ancestorCmd.parent.parent}while(ancestorCmd!==cmd);cursor.insRightOf(cmd)}function DelimsMixin(_,super_){_.jQadd=function(){super_.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},_.reflow=function(){var height=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));scale(this.delimjQs,min(1+.2*(height-1),1.2),1.2*height)}}function bindCharBracketPair(open,ctrlSeq){var ctrlSeq=ctrlSeq||open,close=OPP_BRACKS[open],end=OPP_BRACKS[ctrlSeq];CharCmds[open]=bind(Bracket,-1,open,close,ctrlSeq,end),CharCmds[close]=bind(Bracket,1,open,close,ctrlSeq,end)}var mqCmdId="mathquill-command-id",mqBlockId="mathquill-block-id",min=Math.min,max=Math.max,undefined;if(!jQuery)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";var __slice=[].slice,send=variadic(function(method,args){return variadic(function(obj,moreArgs){if(method in obj)return obj[method].apply(obj,args.concat(moreArgs))})}),P=function(prototype,ownProperty,undefined){function isObject(o){return"object"===_typeof(o)}function isFunction(f){return"function"==typeof f}function SuperclassBare(){}return function P(_superclass,definition){function C(){var self=new Bare;return isFunction(self.init)&&self.init.apply(self,arguments),self}function Bare(){}void 0===definition&&(definition=_superclass,_superclass=Object),C.Bare=Bare;var _super=SuperclassBare[prototype]=_superclass[prototype],proto=Bare[prototype]=C[prototype]=C.p=new SuperclassBare,extensions;return proto.constructor=C,C.extend=function(def){return P(C,def)},(C.open=function(def){if(extensions={},isFunction(def)?extensions=def.call(C,proto,_super,C,_superclass):isObject(def)&&(extensions=def),isObject(extensions))for(var ext in extensions)ownProperty.call(extensions,ext)&&(proto[ext]=extensions[ext]);return isFunction(proto.init)||(proto.init=_superclass),C})(definition)}}("prototype",{}.hasOwnProperty),L=-1,R=1,$=P(jQuery,function(_){_.insDirOf=function(dir,el){return dir===L?this.insertBefore(el.first()):this.insertAfter(el.last())},_.insAtDirEnd=function(dir,el){return dir===L?this.prependTo(el):this.appendTo(el)}}),Point=P(function(_){_.parent=0,_[L]=0,_[R]=0,_.init=function(parent,leftward,rightward){this.parent=parent,this[L]=leftward,this[R]=rightward},this.copy=function(pt){return Point(pt.parent,pt[L],pt[R])}}),Node=P(function(_){function uniqueNodeId(){return id+=1}_[L]=0,_[R]=0,_.parent=0;var id=0;this.byId={},_.init=function(){this.id=uniqueNodeId(),Node.byId[this.id]=this,this.ends={},this.ends[L]=0,this.ends[R]=0},_.dispose=function(){delete Node.byId[this.id]},_.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},_.jQ=$(),_.jQadd=function(jQ){return this.jQ=this.jQ.add(jQ)},_.jQize=function(jQ){function jQadd(el){if(el.getAttribute){var cmdId=el.getAttribute("mathquill-command-id"),blockId=el.getAttribute("mathquill-block-id");cmdId&&Node.byId[cmdId].jQadd(el),blockId&&Node.byId[blockId].jQadd(el)}for(el=el.firstChild;el;el=el.nextSibling)jQadd(el)}for(var jQ=$(jQ||this.html()),i=0;i<jQ.length;i+=1)jQadd(jQ[i]);return jQ},_.createDir=function(dir,cursor){prayDirection(dir);var node=this;return node.jQize(),node.jQ.insDirOf(dir,cursor.jQ),cursor[dir]=node.adopt(cursor.parent,cursor[L],cursor[R]),node},_.createLeftOf=function(el){return this.createDir(L,el)},_.selectChildren=function(leftEnd,rightEnd){return Selection(leftEnd,rightEnd)},_.bubble=iterator(function(yield_){for(var ancestor=this,result;ancestor&&(result=yield_(ancestor),!1!==result);ancestor=ancestor.parent);return this}),_.postOrder=iterator(function(yield_){return function recurse(descendant){descendant.eachChild(recurse),yield_(descendant)}(this),this}),_.isEmpty=function(){return 0===this.ends[L]&&0===this.ends[R]},_.isStyleBlock=function(){return!1},_.children=function(){return Fragment(this.ends[L],this.ends[R])},_.eachChild=function(){var children=this.children();return children.each.apply(children,arguments),this},_.foldChildren=function(fold,fn){return this.children().fold(fold,fn)},_.withDirAdopt=function(dir,parent,withDir,oppDir){return Fragment(this,this).withDirAdopt(dir,parent,withDir,oppDir),this},_.adopt=function(parent,leftward,rightward){return Fragment(this,this).adopt(parent,leftward,rightward),this},_.disown=function(){return Fragment(this,this).disown(),this},_.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}}),Fragment=P(function(_){_.init=function(withDir,oppDir,dir){if(void 0===dir&&(dir=L),prayDirection(dir),pray("no half-empty fragments",!withDir==!oppDir),this.ends={},!!withDir){pray("withDir is passed to Fragment",withDir instanceof Node),pray("oppDir is passed to Fragment",oppDir instanceof Node),pray("withDir and oppDir have the same parent",withDir.parent===oppDir.parent),this.ends[dir]=withDir,this.ends[-dir]=oppDir;var accum=this.fold([],function(accum,el){return accum.push.apply(accum,el.jQ.get()),accum});this.jQ=this.jQ.add(accum)}},_.jQ=$(),_.withDirAdopt=function(dir,parent,withDir,oppDir){return dir===L?this.adopt(parent,withDir,oppDir):this.adopt(parent,oppDir,withDir)},_.adopt=function(parent,leftward,rightward){prayWellFormed(parent,leftward,rightward);var self=this;self.disowned=!1;var leftEnd=self.ends[L];if(!leftEnd)return this;var rightEnd=self.ends[R];return leftward||(parent.ends[L]=leftEnd),rightward?rightward[L]=rightEnd:parent.ends[R]=rightEnd,self.ends[R][R]=rightward,self.each(function(el){el[L]=leftward,el.parent=parent,leftward&&(leftward[R]=el),leftward=el}),self},_.disown=function(){var self=this,leftEnd=self.ends[L];if(!leftEnd||self.disowned)return self;self.disowned=!0;var rightEnd=self.ends[R],parent=leftEnd.parent;return prayWellFormed(parent,leftEnd[L],leftEnd),prayWellFormed(parent,rightEnd,rightEnd[R]),leftEnd[L]?leftEnd[L][R]=rightEnd[R]:parent.ends[L]=rightEnd[R],rightEnd[R]?rightEnd[R][L]=leftEnd[L]:parent.ends[R]=leftEnd[L],self},_.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},_.each=iterator(function(yield_){var self=this,el=self.ends[L];if(!el)return self;for(;el!==self.ends[R][R];el=el[R]){var result=yield_(el);if(!1===result)break}return self}),_.fold=function(fold,fn){return this.each(function(el){fold=fn.call(this,fold,el)}),fold}}),LatexCmds={},CharCmds={},Cursor=P(Point,function(_){_.init=function(initParent,options){this.parent=initParent,this.options=options;var jQ=this.jQ=this._jQ=$("<span class=\"mq-cursor\">&#8203;</span>");this.blink=function(){jQ.toggleClass("mq-blink")},this.upDownCache={}},_.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[R]?this.selection&&this.selection.ends[L][L]===this[L]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[R].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},_.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=$(),this},_.withDirInsertAt=function(dir,parent,withDir,oppDir){var oldParent=this.parent;this.parent=parent,this[dir]=withDir,this[-dir]=oppDir,oldParent!==parent&&oldParent.blur&&oldParent.blur(this)},_.insDirOf=function(dir,el){return prayDirection(dir),this.jQ.insDirOf(dir,el.jQ),this.withDirInsertAt(dir,el.parent,el[dir],el),this.parent.jQ.addClass("mq-hasCursor"),this},_.insLeftOf=function(el){return this.insDirOf(L,el)},_.insRightOf=function(el){return this.insDirOf(R,el)},_.insAtDirEnd=function(dir,el){return prayDirection(dir),this.jQ.insAtDirEnd(dir,el.jQ),this.withDirInsertAt(dir,el,0,el.ends[dir]),el.focus(),this},_.insAtLeftEnd=function(el){return this.insAtDirEnd(L,el)},_.insAtRightEnd=function(el){return this.insAtDirEnd(R,el)},_.jumpUpDown=function(from,to){var self=this;self.upDownCache[from.id]=Point.copy(self);var cached=self.upDownCache[to.id];if(cached)cached[R]?self.insLeftOf(cached[R]):self.insAtRightEnd(cached.parent);else{var pageX=self.offset().left;to.seek(pageX,self)}},_.offset=function(){var self=this,offset=self.jQ.removeClass("mq-cursor").offset();return self.jQ.addClass("mq-cursor"),offset},_.unwrapGramp=function(){var gramp=this.parent.parent,greatgramp=gramp.parent,rightward=gramp[R],cursor=this,leftward=gramp[L];if(gramp.disown().eachChild(function(uncle){uncle.isEmpty()||(uncle.children().adopt(greatgramp,leftward,rightward).each(function(cousin){cousin.jQ.insertBefore(gramp.jQ.first())}),leftward=uncle.ends[R])}),!this[R])if(this[L])this[R]=this[L][R];else for(;!this[R];)if(this.parent=this.parent[R],this.parent)this[R]=this.parent.ends[L];else{this[R]=gramp[R],this.parent=greatgramp;break}this[R]?this.insLeftOf(this[R]):this.insAtRightEnd(greatgramp),gramp.jQ.remove(),gramp[L].siblingDeleted&&gramp[L].siblingDeleted(cursor.options,R),gramp[R].siblingDeleted&&gramp[R].siblingDeleted(cursor.options,L)},_.startSelection=function(){for(var anticursor=this.anticursor=Point.copy(this),ancestors=anticursor.ancestors={},ancestor=anticursor;ancestor.parent;ancestor=ancestor.parent)ancestors[ancestor.parent.id]=ancestor},_.endSelection=function(){delete this.anticursor},_.select=function(){var anticursor=this.anticursor;if(this[L]===anticursor[L]&&this.parent===anticursor.parent)return!1;for(var ancestor=this;ancestor.parent;ancestor=ancestor.parent)if(ancestor.parent.id in anticursor.ancestors){var lca=ancestor.parent;break}pray("cursor and anticursor in the same tree",lca);var antiAncestor=anticursor.ancestors[lca.id],dir=R,leftEnd,rightEnd;if(ancestor[L]!==antiAncestor)for(var rightward=ancestor;rightward;rightward=rightward[R])if(rightward[R]===antiAncestor[R]){dir=L,leftEnd=ancestor,rightEnd=antiAncestor;break}return dir===R&&(leftEnd=antiAncestor,rightEnd=ancestor),leftEnd instanceof Point&&(leftEnd=leftEnd[R]),rightEnd instanceof Point&&(rightEnd=rightEnd[L]),this.hide().selection=lca.selectChildren(leftEnd,rightEnd),this.insDirOf(dir,this.selection.ends[dir]),this.selectionChanged(),!0},_.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},_.deleteSelection=function(){this.selection&&(this[L]=this.selection.ends[L][L],this[R]=this.selection.ends[R][R],this.selection.remove(),this.selectionChanged(),delete this.selection)},_.replaceSelection=function(){var seln=this.selection;return seln&&(this[L]=seln.ends[L][L],this[R]=seln.ends[R][R],delete this.selection),seln},_.depth=function(){for(var node=this,depth=0;node=node.parent;)depth+=node instanceof MathBlock?1:0;return depth},_.isTooDeep=function(offset){if(this.options.maxDepth!==void 0)return this.depth()+(offset||0)>this.options.maxDepth}}),Selection=P(Fragment,function(_,super_){_.init=function(){super_.init.apply(this,arguments),this.jQ=this.jQ.wrapAll("<span class=\"mq-selection\"></span>").parent()},_.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),super_.adopt.apply(this,arguments)},_.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},_.join=function(methodName){return this.fold("",function(fold,child){return fold+child[methodName]()})}}),Controller=P(function(_){_.init=function(root,container,options){this.id=root.id,this.data={},this.root=root,this.container=container,this.options=options,root.controller=this,this.cursor=root.cursor=Cursor(root,options)},_.handle=function(name,dir){var handlers=this.options.handlers;if(handlers&&handlers.fns[name]){var mq=handlers.APIClasses[this.KIND_OF_MQ](this);dir===L||dir===R?handlers.fns[name](dir,mq):handlers.fns[name](mq)}};var notifyees=[];this.onNotify=function(f){notifyees.push(f)},_.notify=function(){for(var i=0;i<notifyees.length;i+=1)notifyees[i].apply(this.cursor,arguments);return this}}),API={},Options=P(),optionProcessors={},Progenote=P(),EMBEDS={};MathQuill.prototype=Progenote.p,MathQuill.VERSION="v0.10.1",MathQuill.interfaceVersion=function(v){if(1!==v)throw"Only interface version 1 supported. You specified: "+v;return insistOnInterVer=function insistOnInterVer(){window.console&&console.warn("You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the \"`dev` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide\" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide")},insistOnInterVer(),MathQuill},MathQuill.getInterface=getInterface;var MIN=getInterface.MIN=1,MAX=getInterface.MAX=2;MathQuill.noConflict=function(){return window.MathQuill=origMathQuill,MathQuill};var origMathQuill=window.MathQuill;window.MathQuill=MathQuill;var Parser=P(function(_,super_,Parser){function parseError(stream,message){throw stream=stream?"'"+stream+"'":"EOF","Parse Error: "+message+" at "+stream}_.init=function(body){this._=body},_.parse=function(stream){function success(stream,result){return result}return this.skip(eof)._(""+stream,success,parseError)},_.or=function(alternative){pray("or is passed a parser",alternative instanceof Parser);var self=this;return Parser(function(stream,onSuccess,onFailure){function failure(newStream){return alternative._(stream,onSuccess,onFailure)}return self._(stream,onSuccess,failure)})},_.then=function(next){var self=this;return Parser(function(stream,onSuccess,onFailure){function success(newStream,result){var nextParser=next instanceof Parser?next:next(result);return pray("a parser is returned",nextParser instanceof Parser),nextParser._(newStream,onSuccess,onFailure)}return self._(stream,success,onFailure)})},_.many=function(){var self=this;return Parser(function(stream,onSuccess,onFailure){function success(newStream,x){return stream=newStream,xs.push(x),!0}function failure(){return!1}for(var xs=[];self._(stream,success,failure););return onSuccess(stream,xs)})},_.times=function(min,max){2>arguments.length&&(max=min);var self=this;return Parser(function(stream,onSuccess,onFailure){function success(newStream,x){return xs.push(x),stream=newStream,!0}function firstFailure(newStream,msg){return failure=msg,stream=newStream,!1}function secondFailure(newStream,msg){return!1}for(var xs=[],result=!0,i=0,failure;i<min;i+=1)if(result=self._(stream,success,firstFailure),!result)return onFailure(stream,failure);for(;i<max&&result;i+=1)result=self._(stream,success,secondFailure);return onSuccess(stream,xs)})},_.result=function(res){return this.then(succeed(res))},_.atMost=function(n){return this.times(0,n)},_.atLeast=function(n){var self=this;return self.times(n).then(function(start){return self.many().map(function(end){return start.concat(end)})})},_.map=function(fn){return this.then(function(result){return succeed(fn(result))})},_.skip=function(two){return this.then(function(result){return two.result(result)})};var string=this.string=function(str){var len=str.length,expected="expected '"+str+"'";return Parser(function(stream,onSuccess,onFailure){var head=stream.slice(0,len);return head===str?onSuccess(stream.slice(len),head):onFailure(stream,expected)})},regex=this.regex=function(re){pray("regexp parser is anchored","^"===re.toString().charAt(1));var expected="expected "+re;return Parser(function(stream,onSuccess,onFailure){var match=re.exec(stream);if(match){var result=match[0];return onSuccess(stream.slice(result.length),result)}return onFailure(stream,expected)})},succeed=Parser.succeed=function(result){return Parser(function(stream,onSuccess){return onSuccess(stream,result)})},fail=Parser.fail=function(msg){return Parser(function(stream,_,onFailure){return onFailure(stream,msg)})},letter=Parser.letter=regex(/^[a-z]/i),letters=Parser.letters=regex(/^[a-z]*/i),digit=Parser.digit=regex(/^[0-9]/),digits=Parser.digits=regex(/^[0-9]*/),whitespace=Parser.whitespace=regex(/^\s+/),optWhitespace=Parser.optWhitespace=regex(/^\s*/),any=Parser.any=Parser(function(stream,onSuccess,onFailure){return stream?onSuccess(stream.slice(1),stream.charAt(0)):onFailure(stream,"expected any character")}),all=Parser.all=Parser(function(stream,onSuccess,onFailure){return onSuccess("",stream)}),eof=Parser.eof=Parser(function(stream,onSuccess,onFailure){return stream?onFailure(stream,"expected EOF"):onSuccess(stream,stream)})}),saneKeyboardEvents=function(){function stringify(evt){var which=evt.which||evt.keyCode,keyVal=KEY_VALUES[which],modifiers=[],key;return(evt.ctrlKey&&modifiers.push("Ctrl"),evt.originalEvent&&evt.originalEvent.metaKey&&modifiers.push("Meta"),evt.altKey&&modifiers.push("Alt"),evt.shiftKey&&modifiers.push("Shift"),key=keyVal||String.fromCharCode(which),!modifiers.length&&!keyVal)?key:(modifiers.push(key),modifiers.join("-"))}var KEY_VALUES={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function saneKeyboardEvents(el,handlers){function checkTextareaFor(checker){checkTextarea=checker,clearTimeout(timeoutId),timeoutId=setTimeout(checker)}function checkTextareaOnce(checker){checkTextareaFor(function(e){checkTextarea=noop,clearTimeout(timeoutId),checker(e)})}function select(text){checkTextarea(),checkTextarea=noop,clearTimeout(timeoutId),textarea.val(text),text&&textarea[0].select&&textarea[0].select(),shouldBeSelected=!!text}function hasSelection(){var dom=textarea[0];return!!("selectionStart"in dom)&&dom.selectionStart!==dom.selectionEnd}function handleKey(){handlers.keystroke(stringify(keydown),keydown)}function onKeydown(e){e.target!==textarea[0]||(keydown=e,keypress=null,shouldBeSelected&&checkTextareaOnce(function(e){!(e&&"focusout"===e.type)&&textarea[0].select&&textarea[0].select()}),handleKey())}function onKeypress(e){e.target!==textarea[0]||(keydown&&keypress&&handleKey(),keypress=e,checkTextareaFor(typedText))}function onKeyup(e){e.target===textarea[0]&&(!keydown||keypress||checkTextareaFor(typedText))}function typedText(){if(!hasSelection()){var text=textarea.val();1===text.length?(textarea.val(""),handlers.typedText(text)):text&&textarea[0].select&&textarea[0].select()}}function onBlur(){keydown=keypress=null}function onPaste(e){e.target!==textarea[0]||(document.activeElement!==textarea[0]&&textarea.focus(),checkTextareaFor(pastedText))}function pastedText(){var text=textarea.val();textarea.val(""),text&&handlers.paste(text)}var keydown=null,keypress=null,textarea=jQuery(el),target=jQuery(handlers.container||textarea),checkTextarea=noop,timeoutId;target.bind("keydown keypress input keyup focusout paste",function(e){checkTextarea(e)});var shouldBeSelected=!1;return target.bind({keydown:onKeydown,keypress:onKeypress,keyup:onKeyup,focusout:onBlur,cut:function cut(){checkTextareaOnce(function(){handlers.cut()})},copy:function copy(){checkTextareaOnce(function(){handlers.copy()})},paste:onPaste}),{select:select}}}();Controller.open(function(_,super_){_.exportText=function(){return this.root.foldChildren("",function(text,child){return text+child.text()})}}),Controller.open(function(_){_.focusBlurEvents=function(){function windowBlur(){clearTimeout(blurTimeout),cursor.selection&&cursor.selection.jQ.addClass("mq-blur"),blur()}function blur(){cursor.hide().parent.blur(),ctrlr.container.removeClass("mq-focused"),$(window).unbind("blur",windowBlur)}var ctrlr=this,root=ctrlr.root,cursor=ctrlr.cursor,blurTimeout;ctrlr.textarea.focus(function(){ctrlr.blurred=!1,clearTimeout(blurTimeout),ctrlr.container.addClass("mq-focused"),cursor.parent||cursor.insAtRightEnd(root),cursor.selection?(cursor.selection.jQ.removeClass("mq-blur"),ctrlr.selectionChanged()):cursor.show()}).blur(function(){ctrlr.blurred=!0,blurTimeout=setTimeout(function(){root.postOrder("intentionalBlur"),cursor.clearSelection().endSelection(),blur()}),$(window).bind("blur",windowBlur)}),ctrlr.blurred=!0,cursor.hide().parent.blur()},_.unbindFocusBlurEvents=function(){var ctrlr=this;ctrlr.textarea.unbind("focus blur")}}),Controller.open(function(_){_.keystroke=function(key,evt){this.cursor.parent.keystroke(key,evt,this)}}),Node.open(function(_){_.keystroke=function(key,e,ctrlr){var cursor=ctrlr.cursor;switch(key){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":ctrlr.ctrlDeleteDir(L);break;case"Shift-Backspace":case"Backspace":ctrlr.backspace();break;case"Esc":case"Tab":return void ctrlr.escapeDir(R,key,e);case"Shift-Tab":case"Shift-Esc":return void ctrlr.escapeDir(L,key,e);case"End":ctrlr.notify("move").cursor.insAtRightEnd(cursor.parent);break;case"Ctrl-End":ctrlr.notify("move").cursor.insAtRightEnd(ctrlr.root);break;case"Shift-End":for(;cursor[R];)ctrlr.selectRight();break;case"Ctrl-Shift-End":for(;cursor[R]||cursor.parent!==ctrlr.root;)ctrlr.selectRight();break;case"Home":ctrlr.notify("move").cursor.insAtLeftEnd(cursor.parent);break;case"Ctrl-Home":ctrlr.notify("move").cursor.insAtLeftEnd(ctrlr.root);break;case"Shift-Home":for(;cursor[L];)ctrlr.selectLeft();break;case"Ctrl-Shift-Home":for(;cursor[L]||cursor.parent!==ctrlr.root;)ctrlr.selectLeft();break;case"Left":ctrlr.moveLeft();break;case"Shift-Left":ctrlr.selectLeft();break;case"Ctrl-Left":break;case"Right":ctrlr.moveRight();break;case"Shift-Right":ctrlr.selectRight();break;case"Ctrl-Right":break;case"Up":ctrlr.moveUp();break;case"Down":ctrlr.moveDown();break;case"Shift-Up":if(cursor[L])for(;cursor[L];)ctrlr.selectLeft();else ctrlr.selectLeft();case"Shift-Down":if(cursor[R])for(;cursor[R];)ctrlr.selectRight();else ctrlr.selectRight();case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":ctrlr.ctrlDeleteDir(R);break;case"Shift-Del":case"Del":ctrlr.deleteForward();break;case"Meta-A":case"Ctrl-A":for(ctrlr.notify("move").cursor.insAtRightEnd(ctrlr.root);cursor[L];)ctrlr.selectLeft();break;default:return;}e.preventDefault(),ctrlr.scrollHoriz()},_.moveOutOf=_.moveTowards=_.deleteOutOf=_.deleteTowards=_.unselectInto=_.selectOutOf=_.selectTowards=function(){pray("overridden or never called on this node")}}),Controller.open(function(_){function moveUpDown(self,dir){var cursor=self.notify("upDown").cursor,dirInto=dir+"Into",dirOutOf=dir+"OutOf";return cursor[R][dirInto]?cursor.insAtLeftEnd(cursor[R][dirInto]):cursor[L][dirInto]?cursor.insAtRightEnd(cursor[L][dirInto]):cursor.parent.bubble(function(ancestor){var prop=ancestor[dirOutOf];if(prop&&("function"==typeof prop&&(prop=ancestor[dirOutOf](cursor)),prop instanceof Node&&cursor.jumpUpDown(ancestor,prop),!0!==prop))return!1}),self}this.onNotify(function(e){("move"===e||"upDown"===e)&&this.show().clearSelection()}),_.escapeDir=function(dir,key,e){prayDirection(dir);var cursor=this.cursor;if(cursor.parent!==this.root&&e.preventDefault(),cursor.parent!==this.root)return cursor.parent.moveOutOf(dir,cursor),this.notify("move")},optionProcessors.leftRightIntoCmdGoes=function(updown){if(updown&&"up"!==updown&&"down"!==updown)throw"\"up\" or \"down\" required for leftRightIntoCmdGoes option, got \""+updown+"\"";return updown},_.moveDir=function(dir){prayDirection(dir);var cursor=this.cursor,updown=cursor.options.leftRightIntoCmdGoes;return cursor.selection?cursor.insDirOf(dir,cursor.selection.ends[dir]):cursor[dir]?cursor[dir].moveTowards(dir,cursor,updown):cursor.parent.moveOutOf(dir,cursor,updown),this.notify("move")},_.moveLeft=function(){return this.moveDir(L)},_.moveRight=function(){return this.moveDir(R)},_.moveUp=function(){return moveUpDown(this,"up")},_.moveDown=function(){return moveUpDown(this,"down")},this.onNotify(function(e){"upDown"!==e&&(this.upDownCache={})}),this.onNotify(function(e){"edit"===e&&this.show().deleteSelection()}),_.deleteDir=function(dir){prayDirection(dir);var cursor=this.cursor,hadSelection=cursor.selection;return this.notify("edit"),hadSelection||(cursor[dir]?cursor[dir].deleteTowards(dir,cursor):cursor.parent.deleteOutOf(dir,cursor)),cursor[L].siblingDeleted&&cursor[L].siblingDeleted(cursor.options,R),cursor[R].siblingDeleted&&cursor[R].siblingDeleted(cursor.options,L),cursor.parent.bubble("reflow"),this},_.ctrlDeleteDir=function(dir){prayDirection(dir);var cursor=this.cursor;return!cursor[dir]||cursor.selection?this.deleteDir(dir):(this.notify("edit"),dir===L?Fragment(cursor.parent.ends[L],cursor[L]).remove():Fragment(cursor[R],cursor.parent.ends[R]).remove(),(cursor.insAtDirEnd(dir,cursor.parent),cursor[L].siblingDeleted&&cursor[L].siblingDeleted(cursor.options,R),cursor[R].siblingDeleted&&cursor[R].siblingDeleted(cursor.options,L),cursor.parent.bubble("reflow"),this))},_.backspace=function(){return this.deleteDir(L)},_.deleteForward=function(){return this.deleteDir(R)},this.onNotify(function(e){"select"!==e&&this.endSelection()}),_.selectDir=function(dir){var cursor=this.notify("select").cursor,seln=cursor.selection;prayDirection(dir),cursor.anticursor||cursor.startSelection();var node=cursor[dir];node?seln&&seln.ends[dir]===node&&cursor.anticursor[-dir]!==node?node.unselectInto(dir,cursor):node.selectTowards(dir,cursor):cursor.parent.selectOutOf(dir,cursor),cursor.clearSelection(),cursor.select()||cursor.show()},_.selectLeft=function(){return this.selectDir(L)},_.selectRight=function(){return this.selectDir(R)}});var latexMathParser=function(){function commandToBlock(cmd){var block=MathBlock();return cmd.adopt(block,0,0),block}function joinBlocks(blocks){for(var firstBlock=blocks[0]||MathBlock(),i=1;i<blocks.length;i+=1)blocks[i].children().adopt(firstBlock,firstBlock.ends[R],0);return firstBlock}var string=Parser.string,regex=Parser.regex,letter=Parser.letter,any=Parser.any,optWhitespace=Parser.optWhitespace,succeed=Parser.succeed,fail=Parser.fail,variable=letter.map(function(c){return Letter(c)}),symbol=regex(/^[^${}\\_^]/).map(function(c){return VanillaSymbol(c)}),controlSequence=regex(/^[^\\a-eg-zA-Z]/).or(string("\\").then(regex(/^[a-z]+/i).or(regex(/^\s+/).result(" ")).or(any))).then(function(ctrlSeq){var cmdKlass=LatexCmds[ctrlSeq];return cmdKlass?cmdKlass(ctrlSeq).parser():fail("unknown command: \\"+ctrlSeq)}),command=controlSequence.or(variable).or(symbol),mathGroup=string("{").then(function(){return mathSequence}).skip(string("}")),mathBlock=optWhitespace.then(mathGroup.or(command.map(commandToBlock))),mathSequence=mathBlock.many().map(joinBlocks).skip(optWhitespace),optMathBlock=string("[").then(mathBlock.then(function(block){return"]"===block.join("latex")?fail():succeed(block)}).many().map(joinBlocks).skip(optWhitespace)).skip(string("]")),latexMath=mathSequence;return latexMath.block=mathBlock,latexMath.optBlock=optMathBlock,latexMath}();Controller.open(function(_,super_){_.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/ig,"$1")},optionProcessors.maxDepth=function(depth){return"number"==typeof depth?depth:void 0},_.writeLatex=function(latex){var cursor=this.notify("edit").cursor;return cursor.parent.writeLatex(cursor,latex),this},_.renderLatexMath=function(latex){var root=this.root,cursor=this.cursor,options=cursor.options,jQ=root.jQ,all=Parser.all,eof=Parser.eof,block=latexMathParser.skip(eof).or(all.result(!1)).parse(latex);if(root.eachChild("postOrder","dispose"),root.ends[L]=root.ends[R]=0,block&&block.prepareInsertionAt(cursor)){block.children().adopt(root,0,0);var html=block.join("html");jQ.html(html),root.jQize(jQ.children()),root.finalizeInsert(cursor.options)}else jQ.empty();delete cursor.selection,cursor.insAtRightEnd(root)},_.renderLatexText=function(latex){var root=this.root,cursor=this.cursor;root.jQ.children().slice(1).remove(),root.eachChild("postOrder","dispose"),root.ends[L]=root.ends[R]=0,delete cursor.selection,cursor.show().insAtRightEnd(root);var regex=Parser.regex,string=Parser.string,eof=Parser.eof,all=Parser.all,mathMode=string("$").then(latexMathParser).skip(string("$").or(eof)).map(function(block){var rootMathCommand=RootMathCommand(cursor);rootMathCommand.createBlocks();var rootMathBlock=rootMathCommand.ends[L];return block.children().adopt(rootMathBlock,0,0),rootMathCommand}),escapedDollar=string("\\$").result("$"),textChar=escapedDollar.or(regex(/^[^$]/)).map(VanillaSymbol),latexText=mathMode.or(textChar).many(),commands=latexText.skip(eof).or(all.result(!1)).parse(latex);if(commands){for(var i=0;i<commands.length;i+=1)commands[i].adopt(root,root.ends[R],0);root.jQize().appendTo(root.jQ),root.finalizeInsert(cursor.options)}}}),Controller.open(function(_){Options.p.ignoreNextMousedown=noop,_.delegateMouseEvents=function(){var ultimateRootjQ=this.root.jQ;this.container.bind("mousedown.mathquill",function(e){function mousemove(e){target=$(e.target)}function docmousemove(e){cursor.anticursor||cursor.startSelection(),ctrlr.seek(target,e.pageX,e.pageY).cursor.select(),target=void 0}function mouseup(e){cursor.blink=blink,cursor.selection||(ctrlr.editable?cursor.show():textareaSpan.detach()),rootjQ.unbind("mousemove",mousemove),$(e.target.ownerDocument).unbind("mousemove",docmousemove).unbind("mouseup",mouseup)}var rootjQ=$(e.target).closest(".mq-root-block"),root=Node.byId[rootjQ.attr("mathquill-block-id")||ultimateRootjQ.attr("mathquill-block-id")],ctrlr=root.controller,cursor=ctrlr.cursor,blink=cursor.blink,textareaSpan=ctrlr.textareaSpan,textarea=ctrlr.textarea;if(e.preventDefault(),e.target.unselectable=!0,!cursor.options.ignoreNextMousedown(e)){cursor.options.ignoreNextMousedown=noop;var target;ctrlr.blurred&&(!ctrlr.editable&&rootjQ.prepend(textareaSpan),textarea.focus()),cursor.blink=noop,ctrlr.seek($(e.target),e.pageX,e.pageY).cursor.startSelection(),rootjQ.mousemove(mousemove),$(e.target.ownerDocument).mousemove(docmousemove).mouseup(mouseup)}})}}),Controller.open(function(_){_.seek=function(target,pageX,pageY){var cursor=this.notify("select").cursor;if(target){var nodeId=target.attr("mathquill-block-id")||target.attr("mathquill-command-id");if(!nodeId){var targetParent=target.parent();nodeId=targetParent.attr("mathquill-block-id")||targetParent.attr("mathquill-command-id")}}var node=nodeId?Node.byId[nodeId]:this.root;return pray("nodeId is the id of some Node that exists",node),cursor.clearSelection().show(),node.seek(pageX,cursor),this.scrollHoriz(),this}}),Controller.open(function(_){_.scrollHoriz=function(){var cursor=this.cursor,seln=cursor.selection,rootRect=this.root.jQ[0].getBoundingClientRect();if(!seln){var x=cursor.jQ[0].getBoundingClientRect().left;if(x>rootRect.right-20)var scrollBy=x-(rootRect.right-20);else if(x<rootRect.left+20)var scrollBy=x-(rootRect.left+20);else return}else{var rect=seln.jQ[0].getBoundingClientRect(),overLeft=rect.left-(rootRect.left+20),overRight=rect.right-(rootRect.right-20);if(seln.ends[L]===cursor[R]){if(0>overLeft)var scrollBy=overLeft;else{if(!(0<overRight))return;if(rect.left-overRight<rootRect.left+20)var scrollBy=overLeft;else var scrollBy=overRight}}else if(0<overRight)var scrollBy=overRight;else{if(!(0>overLeft))return;if(rect.right-overLeft>rootRect.right-20)var scrollBy=overRight;else var scrollBy=overLeft}}this.root.jQ.stop().animate({scrollLeft:"+="+scrollBy},100)}}),Controller.open(function(_){Options.p.substituteTextarea=function(){return $("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},_.createTextarea=function(){var textareaSpan=this.textareaSpan=$("<span class=\"mq-textarea\"></span>"),textarea=this.options.substituteTextarea();if(!textarea.nodeType)throw"substituteTextarea() must return a DOM element, got "+textarea;textarea=this.textarea=$(textarea).appendTo(textareaSpan);var ctrlr=this;ctrlr.cursor.selectionChanged=function(){ctrlr.selectionChanged()}},_.selectionChanged=function(){var ctrlr=this;forceIERedraw(ctrlr.container[0]),ctrlr.textareaSelectionTimeout===void 0&&(ctrlr.textareaSelectionTimeout=setTimeout(function(){ctrlr.setTextareaSelection()}))},_.setTextareaSelection=function(){this.textareaSelectionTimeout=void 0;var latex="";this.cursor.selection&&(latex=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(latex="$"+latex+"$")),this.selectFn(latex)},_.staticMathTextareaEvents=function(){function detach(){textareaSpan.detach(),ctrlr.blurred=!0}var ctrlr=this,root=ctrlr.root,cursor=ctrlr.cursor,textarea=ctrlr.textarea,textareaSpan=ctrlr.textareaSpan;this.container.prepend(jQuery("<span class=\"mq-selectable\">").text("$"+ctrlr.exportLatex()+"$")),ctrlr.blurred=!0,textarea.bind("cut paste",!1).bind("copy",function(){ctrlr.setTextareaSelection()}).focus(function(){ctrlr.blurred=!1}).blur(function(){cursor.selection&&cursor.selection.clear(),setTimeout(detach)}),ctrlr.selectFn=function(text){textarea.val(text),text&&textarea.select()}},Options.p.substituteKeyboardEvents=saneKeyboardEvents,_.editablesTextareaEvents=function(){var ctrlr=this,textarea=ctrlr.textarea,textareaSpan=ctrlr.textareaSpan,keyboardEventsShim=this.options.substituteKeyboardEvents(textarea,this);this.selectFn=function(text){keyboardEventsShim.select(text)},this.container.prepend(textareaSpan),this.focusBlurEvents()},_.unbindEditablesEvents=function(){var ctrlr=this,textarea=ctrlr.textarea,textareaSpan=ctrlr.textareaSpan;this.selectFn=function(text){textarea.val(text),text&&textarea.select()},textareaSpan.remove(),this.unbindFocusBlurEvents(),ctrlr.blurred=!0,textarea.bind("cut paste",!1)},_.typedText=function(ch){if("\n"===ch)return this.handle("enter");var cursor=this.notify().cursor;cursor.parent.write(cursor,ch),this.scrollHoriz()},_.cut=function(){var ctrlr=this,cursor=ctrlr.cursor;cursor.selection&&setTimeout(function(){ctrlr.notify("edit"),cursor.parent.bubble("reflow")})},_.copy=function(){this.setTextareaSelection()},_.paste=function(text){this.options.statelessClipboard&&("$"===text.slice(0,1)&&"$"===text.slice(-1)?text=text.slice(1,-1):text="\\text{"+text+"}"),this.writeLatex(text).cursor.show()}});var MathElement=P(Node,function(_,super_){_.finalizeInsert=function(options,cursor){var self=this;self.postOrder("finalizeTree",options),self.postOrder("contactWeld",cursor),self.postOrder("blur"),self.postOrder("reflow"),self[R].siblingCreated&&self[R].siblingCreated(options,L),self[L].siblingCreated&&self[L].siblingCreated(options,R),self.bubble("reflow")},_.prepareInsertionAt=function(cursor){var maxDepth=cursor.options.maxDepth;if(maxDepth!==void 0){var cursorDepth=cursor.depth();if(cursorDepth>maxDepth)return!1;this.removeNodesDeeperThan(maxDepth-cursorDepth)}return!0},_.removeNodesDeeperThan=function(cutoff){for(var depth=0,queue=[[this,depth]],current;queue.length;)current=queue.shift(),current[0].children().each(function(child){var i=child instanceof MathBlock?1:0;depth=current[1]+i,depth<=cutoff?queue.push([child,depth]):(i?child.children():child).remove()})}}),MathCommand=P(MathElement,function(_,super_){_.init=function(ctrlSeq,htmlTemplate,textTemplate){var cmd=this;super_.init.call(cmd),cmd.ctrlSeq||(cmd.ctrlSeq=ctrlSeq),htmlTemplate&&(cmd.htmlTemplate=htmlTemplate),textTemplate&&(cmd.textTemplate=textTemplate)},_.replaces=function(replacedFragment){replacedFragment.disown(),this.replacedFragment=replacedFragment},_.isEmpty=function(){return this.foldChildren(!0,function(isEmpty,child){return isEmpty&&child.isEmpty()})},_.parser=function(){var block=latexMathParser.block,self=this;return block.times(self.numBlocks()).map(function(blocks){self.blocks=blocks;for(var i=0;i<blocks.length;i+=1)blocks[i].adopt(self,self.ends[R],0);return self})},_.createLeftOf=function(cursor){var cmd=this,replacedFragment=cmd.replacedFragment;cmd.createBlocks(),super_.createLeftOf.call(cmd,cursor),replacedFragment&&(replacedFragment.adopt(cmd.ends[L],0,0),replacedFragment.jQ.appendTo(cmd.ends[L].jQ),cmd.placeCursor(cursor),cmd.prepareInsertionAt(cursor)),cmd.finalizeInsert(cursor.options),cmd.placeCursor(cursor)},_.createBlocks=function(){for(var cmd=this,numBlocks=cmd.numBlocks(),blocks=cmd.blocks=Array(numBlocks),i=0,newBlock;i<numBlocks;i+=1)newBlock=blocks[i]=MathBlock(),newBlock.adopt(cmd,cmd.ends[R],0)},_.placeCursor=function(cursor){cursor.insAtRightEnd(this.foldChildren(this.ends[cursor.options.focusOnDenominator?R:L],function(leftward,child){return leftward.isEmpty()?leftward:child}))},_.moveTowards=function(dir,cursor,updown){var updownInto=updown&&this[updown+"Into"];cursor.insAtDirEnd(-dir,updownInto||this.ends[-dir])},_.deleteTowards=function(dir,cursor){this.isEmpty()?cursor[dir]=this.remove()[dir]:this.moveTowards(dir,cursor,null)},_.selectTowards=function(dir,cursor){cursor[-dir]=this,cursor[dir]=this[dir]},_.selectChildren=function(){return Selection(this,this)},_.unselectInto=function(dir,cursor){cursor.insAtDirEnd(-dir,cursor.anticursor.ancestors[this.id])},_.seek=function(pageX,cursor){function getBounds(node){var bounds={};return bounds[L]=node.jQ.offset().left,bounds[R]=bounds[L]+node.jQ.outerWidth(),bounds}var cmd=this,cmdBounds=getBounds(cmd);if(pageX<cmdBounds[L])return cursor.insLeftOf(cmd);if(pageX>cmdBounds[R])return cursor.insRightOf(cmd);var leftLeftBound=cmdBounds[L];cmd.eachChild(function(block){var blockBounds=getBounds(block);return pageX<blockBounds[L]?(pageX-leftLeftBound<blockBounds[L]-pageX?block[L]?cursor.insAtRightEnd(block[L]):cursor.insLeftOf(cmd):cursor.insAtLeftEnd(block),!1):pageX>blockBounds[R]?void(block[R]?leftLeftBound=blockBounds[R]:cmdBounds[R]-pageX<pageX-blockBounds[R]?cursor.insRightOf(cmd):cursor.insAtRightEnd(block)):(block.seek(pageX,cursor),!1)})},_.numBlocks=function(){var matches=this.htmlTemplate.match(/&\d+/g);return matches?matches.length:0},_.html=function(){var cmd=this,blocks=cmd.blocks,cmdId=" mathquill-command-id="+cmd.id,tokens=cmd.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);pray("no unmatched angle brackets",tokens.join("")===this.htmlTemplate);for(var i=0,token=tokens[0];token;i+=1,token=tokens[i])if("/>"===token.slice(-2))tokens[i]=token.slice(0,-2)+cmdId+"/>";else if("<"===token.charAt(0)){pray("not an unmatched top-level close tag","/"!==token.charAt(1)),tokens[i]=token.slice(0,-1)+cmdId+">";var nesting=1;do i+=1,token=tokens[i],pray("no missing close tags",token),"</"===token.slice(0,2)?nesting-=1:"<"===token.charAt(0)&&"/>"!==token.slice(-2)&&(nesting+=1);while(0<nesting)}return tokens.join("").replace(/>&(\d+)/g,function($0,$1){return" mathquill-block-id="+blocks[$1].id+">"+blocks[$1].join("html")})},_.latex=function(){return this.foldChildren(this.ctrlSeq,function(latex,child){return latex+"{"+(child.latex()||" ")+"}"})},_.textTemplate=[""],_.text=function(){var cmd=this,i=0;return cmd.foldChildren(cmd.textTemplate[i],function(text,child){i+=1;var child_text=child.text();return text&&"("===cmd.textTemplate[i]&&"("===child_text[0]&&")"===child_text.slice(-1)?text+child_text.slice(1,-1)+cmd.textTemplate[i]:text+child_text+(cmd.textTemplate[i]||"")})}}),_Symbol=P(MathCommand,function(_,super_){_.init=function(ctrlSeq,html,text){text||(text=ctrlSeq&&1<ctrlSeq.length?ctrlSeq.slice(1):ctrlSeq),super_.init.call(this,ctrlSeq,html,[text])},_.parser=function(){return Parser.succeed(this)},_.numBlocks=function(){return 0},_.replaces=function(replacedFragment){replacedFragment.remove()},_.createBlocks=noop,_.moveTowards=function(dir,cursor){cursor.jQ.insDirOf(dir,this.jQ),cursor[-dir]=this,cursor[dir]=this[dir]},_.deleteTowards=function(dir,cursor){cursor[dir]=this.remove()[dir]},_.seek=function(pageX,cursor){pageX-this.jQ.offset().left<this.jQ.outerWidth()/2?cursor.insLeftOf(this):cursor.insRightOf(this)},_.latex=function(){return this.ctrlSeq},_.text=function(){return this.textTemplate},_.placeCursor=noop,_.isEmpty=function(){return!0}}),VanillaSymbol=P(_Symbol,function(_,super_){_.init=function(ch,html){super_.init.call(this,ch,"<span>"+(html||ch)+"</span>")}}),BinaryOperator=P(_Symbol,function(_,super_){_.init=function(ctrlSeq,html,text){super_.init.call(this,ctrlSeq,"<span class=\"mq-binary-operator\">"+html+"</span>",text)}}),MathBlock=P(MathElement,function(_,super_){_.join=function(methodName){return this.foldChildren("",function(fold,child){return fold+child[methodName]()})},_.html=function(){return this.join("html")},_.latex=function(){return this.join("latex")},_.text=function(){return this.ends[L]===this.ends[R]&&0!==this.ends[L]?this.ends[L].text():this.join("text")},_.keystroke=function(key,e,ctrlr){return ctrlr.options.spaceBehavesLikeTab&&("Spacebar"===key||"Shift-Spacebar"===key)?(e.preventDefault(),void ctrlr.escapeDir("Shift-Spacebar"===key?L:R,key,e)):super_.keystroke.apply(this,arguments)},_.moveOutOf=function(dir,cursor,updown){var updownInto=updown&&this.parent[updown+"Into"];!updownInto&&this[dir]?cursor.insAtDirEnd(-dir,this[dir]):cursor.insDirOf(dir,this.parent)},_.selectOutOf=function(dir,cursor){cursor.insDirOf(dir,this.parent)},_.deleteOutOf=function(dir,cursor){cursor.unwrapGramp()},_.seek=function(pageX,cursor){var node=this.ends[R];if(!node||node.jQ.offset().left+node.jQ.outerWidth()<pageX)return cursor.insAtRightEnd(this);if(pageX<this.ends[L].jQ.offset().left)return cursor.insAtLeftEnd(this);for(;pageX<node.jQ.offset().left;)node=node[L];return node.seek(pageX,cursor)},_.chToCmd=function(ch,options){var cons;return ch.match(/^[a-eg-zA-Z]$/)?Letter(ch):/^\d$/.test(ch)?Digit(ch):options&&options.typingSlashWritesDivisionSymbol&&"/"===ch?LatexCmds["\xF7"](ch):options&&options.typingAsteriskWritesTimesSymbol&&"*"===ch?LatexCmds["\xD7"](ch):(cons=CharCmds[ch]||LatexCmds[ch])?cons(ch):VanillaSymbol(ch)},_.write=function(cursor,ch){var cmd=this.chToCmd(ch,cursor.options);cursor.selection&&cmd.replaces(cursor.replaceSelection()),cursor.isTooDeep()||cmd.createLeftOf(cursor.show())},_.writeLatex=function(cursor,latex){var all=Parser.all,eof=Parser.eof,block=latexMathParser.skip(eof).or(all.result(!1)).parse(latex);if(block&&!block.isEmpty()&&block.prepareInsertionAt(cursor)){block.children().adopt(cursor.parent,cursor[L],cursor[R]);var jQ=block.jQize();jQ.insertBefore(cursor.jQ),cursor[L]=block.ends[R],block.finalizeInsert(cursor.options,cursor),block.ends[R][R].siblingCreated&&block.ends[R][R].siblingCreated(cursor.options,L),block.ends[L][L].siblingCreated&&block.ends[L][L].siblingCreated(cursor.options,R),cursor.parent.bubble("reflow")}},_.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},_.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}});Options.p.mouseEvents=!0,API.StaticMath=function(APIClasses){return P(APIClasses.AbstractMathQuill,function(_,super_){this.RootBlock=MathBlock,_.__mathquillify=function(opts,interfaceVersion){return this.config(opts),super_.__mathquillify.call(this,"mq-math-mode"),this.__options.mouseEvents&&(this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents()),this},_.init=function(){super_.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],APIClasses.InnerMathField)},_.latex=function(){var returned=super_.latex.apply(this,arguments);return 0<arguments.length&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],APIClasses.InnerMathField),returned}})};var RootMathBlock=P(MathBlock,RootBlockMixin);API.MathField=function(APIClasses){return P(APIClasses.EditableField,function(_,super_){this.RootBlock=RootMathBlock,_.__mathquillify=function(opts,interfaceVersion){return this.config(opts),1<interfaceVersion&&(this.__controller.root.reflow=noop),super_.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}})},API.InnerMathField=function(APIClasses){return P(APIClasses.MathField,function(_,super_){_.makeStatic=function(){this.__controller.editable=!1,this.__controller.root.blur(),this.__controller.unbindEditablesEvents(),this.__controller.container.removeClass("mq-editable-field")},_.makeEditable=function(){this.__controller.editable=!0,this.__controller.editablesTextareaEvents(),this.__controller.cursor.insAtRightEnd(this.__controller.root),this.__controller.container.addClass("mq-editable-field")}})};var TextBlock=P(Node,function(_,super_){function fuseChildren(self){self.jQ[0].normalize();var textPcDom=self.jQ[0].firstChild;if(textPcDom){pray("only node in TextBlock span is Text node",3===textPcDom.nodeType);var textPc=TextPiece(textPcDom.data);return textPc.jQadd(textPcDom),self.children().disown(),textPc.adopt(self,0,0)}}_.ctrlSeq="\\text",_.replaces=function(replacedText){replacedText instanceof Fragment?this.replacedText=replacedText.remove().jQ.text():"string"==typeof replacedText&&(this.replacedText=replacedText)},_.jQadd=function(jQ){super_.jQadd.call(this,jQ),this.ends[L]&&this.ends[L].jQadd(this.jQ[0].firstChild)},_.createLeftOf=function(cursor){var textBlock=this;if(super_.createLeftOf.call(this,cursor),cursor.insAtRightEnd(textBlock),textBlock.replacedText)for(var i=0;i<textBlock.replacedText.length;i+=1)textBlock.write(cursor,textBlock.replacedText.charAt(i));textBlock[R].siblingCreated&&textBlock[R].siblingCreated(cursor.options,L),textBlock[L].siblingCreated&&textBlock[L].siblingCreated(cursor.options,R),textBlock.bubble("reflow")},_.parser=function(){var textBlock=this,string=Parser.string,regex=Parser.regex,optWhitespace=Parser.optWhitespace;return optWhitespace.then(string("{")).then(regex(/^[^}]*/)).skip(string("}")).map(function(text){return 0===text.length?Fragment():(TextPiece(text).adopt(textBlock,0,0),textBlock)})},_.textContents=function(){return this.foldChildren("",function(text,child){return text+child.text})},_.text=function(){return"\""+this.textContents()+"\""},_.latex=function(){var contents=this.textContents();return 0===contents.length?"":"\\text{"+contents.replace(/\\/g,"\\backslash ").replace(/[{}]/g,"\\$&")+"}"},_.html=function(){return"<span class=\"mq-text-mode\" mathquill-command-id="+this.id+">"+this.textContents()+"</span>"},_.moveTowards=function(dir,cursor){cursor.insAtDirEnd(-dir,this)},_.moveOutOf=function(dir,cursor){cursor.insDirOf(dir,this)},_.unselectInto=_.moveTowards,_.selectTowards=MathCommand.prototype.selectTowards,_.deleteTowards=MathCommand.prototype.deleteTowards,_.selectOutOf=function(dir,cursor){cursor.insDirOf(dir,this)},_.deleteOutOf=function(dir,cursor){this.isEmpty()&&cursor.insRightOf(this)},_.write=function(cursor,ch){if(cursor.show().deleteSelection(),"$"!==ch)cursor[L]?cursor[L].appendText(ch):TextPiece(ch).createLeftOf(cursor);else if(this.isEmpty())cursor.insRightOf(this),VanillaSymbol("\\$","$").createLeftOf(cursor);else if(!cursor[R])cursor.insRightOf(this);else if(!cursor[L])cursor.insLeftOf(this);else{var leftBlock=TextBlock(),leftPc=this.ends[L];leftPc.disown().jQ.detach(),leftPc.adopt(leftBlock,0,0),cursor.insLeftOf(this),super_.createLeftOf.call(leftBlock,cursor)}this.bubble("reflow")},_.writeLatex=function(cursor,latex){cursor[L]?cursor[L].appendText(latex):TextPiece(latex).createLeftOf(cursor),this.bubble("reflow")},_.seek=function(pageX,cursor){cursor.hide();var textPc=fuseChildren(this),avgChWidth=this.jQ.width()/this.text.length,approxPosition=Math.round((pageX-this.jQ.offset().left)/avgChWidth);0>=approxPosition?cursor.insAtLeftEnd(this):approxPosition>=textPc.text.length?cursor.insAtRightEnd(this):cursor.insLeftOf(textPc.splitRight(approxPosition));for(var displ=pageX-cursor.show().offset().left,dir=displ&&0>displ?L:R,prevDispl=dir;cursor[dir]&&0<displ*prevDispl;)cursor[dir].moveTowards(dir,cursor),prevDispl=displ,displ=pageX-cursor.offset().left;if(dir*displ<-dir*prevDispl&&cursor[-dir].moveTowards(-dir,cursor),!cursor.anticursor)this.anticursorPosition=cursor[L]&&cursor[L].text.length;else if(cursor.anticursor.parent===this){var cursorPosition=cursor[L]&&cursor[L].text.length;if(this.anticursorPosition===cursorPosition)cursor.anticursor=Point.copy(cursor);else{if(this.anticursorPosition<cursorPosition){var newTextPc=cursor[L].splitRight(this.anticursorPosition);cursor[L]=newTextPc}else var newTextPc=cursor[R].splitRight(this.anticursorPosition-cursorPosition);cursor.anticursor=Point(this,newTextPc[L],newTextPc)}}},_.blur=function(cursor){MathBlock.prototype.blur.call(this);cursor&&(""===this.textContents()?(this.remove(),cursor[L]===this?cursor[L]=this[L]:cursor[R]===this&&(cursor[R]=this[R])):fuseChildren(this))},_.focus=MathBlock.prototype.focus}),TextPiece=P(Node,function(_,super_){function endChar(dir,text){return text.charAt(dir===L?0:-1+text.length)}_.init=function(text){super_.init.call(this),this.text=text},_.jQadd=function(dom){this.dom=dom,this.jQ=$(dom)},_.jQize=function(){return this.jQadd(document.createTextNode(this.text))},_.appendText=function(text){this.text+=text,this.dom.appendData(text)},_.prependText=function(text){this.text=text+this.text,this.dom.insertData(0,text)},_.insTextAtDirEnd=function(text,dir){prayDirection(dir),dir===R?this.appendText(text):this.prependText(text)},_.splitRight=function(i){var newPc=TextPiece(this.text.slice(i)).adopt(this.parent,this,this[R]);return newPc.jQadd(this.dom.splitText(i)),this.text=this.text.slice(0,i),newPc},_.moveTowards=function(dir,cursor){prayDirection(dir);var ch=endChar(-dir,this.text),from=this[-dir];return from?from.insTextAtDirEnd(ch,dir):TextPiece(ch).createDir(-dir,cursor),this.deleteTowards(dir,cursor)},_.latex=function(){return this.text},_.deleteTowards=function(dir,cursor){1<this.text.length?dir===R?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),cursor[dir]=this[dir])},_.selectTowards=function(dir,cursor){prayDirection(dir);var anticursor=cursor.anticursor,ch=endChar(-dir,this.text);if(anticursor[dir]===this){var newPc=TextPiece(ch).createDir(dir,cursor);anticursor[dir]=newPc,cursor.insDirOf(dir,newPc)}else{var from=this[-dir];if(from)from.insTextAtDirEnd(ch,dir);else{var newPc=TextPiece(ch).createDir(-dir,cursor);newPc.jQ.insDirOf(-dir,cursor.selection.jQ)}1===this.text.length&&anticursor[-dir]===this&&(anticursor[-dir]=this[-dir])}return this.deleteTowards(dir,cursor)}});LatexCmds.text=LatexCmds.textnormal=LatexCmds.textrm=LatexCmds.textup=LatexCmds.textmd=TextBlock,LatexCmds.em=LatexCmds.italic=LatexCmds.italics=LatexCmds.emph=LatexCmds.textit=LatexCmds.textsl=makeTextBlock("\\textit","i","class=\"mq-text-mode\""),LatexCmds.strong=LatexCmds.bold=LatexCmds.textbf=makeTextBlock("\\textbf","b","class=\"mq-text-mode\""),LatexCmds.sf=LatexCmds.textsf=makeTextBlock("\\textsf","span","class=\"mq-sans-serif mq-text-mode\""),LatexCmds.tt=LatexCmds.texttt=makeTextBlock("\\texttt","span","class=\"mq-monospace mq-text-mode\""),LatexCmds.textsc=makeTextBlock("\\textsc","span","style=\"font-variant:small-caps\" class=\"mq-text-mode\""),LatexCmds.uppercase=makeTextBlock("\\uppercase","span","style=\"text-transform:uppercase\" class=\"mq-text-mode\""),LatexCmds.lowercase=makeTextBlock("\\lowercase","span","style=\"text-transform:lowercase\" class=\"mq-text-mode\"");var RootMathCommand=P(MathCommand,function(_,super_){_.init=function(cursor){super_.init.call(this,"$"),this.cursor=cursor},_.htmlTemplate="<span class=\"mq-math-mode\">&0</span>",_.createBlocks=function(){super_.createBlocks.call(this),this.ends[L].cursor=this.cursor,this.ends[L].write=function(cursor,ch){"$"===ch?this.isEmpty()?(cursor.insRightOf(this.parent),this.parent.deleteTowards(dir,cursor),VanillaSymbol("\\$","$").createLeftOf(cursor.show())):cursor[R]?cursor[L]?MathBlock.prototype.write.call(this,cursor,ch):cursor.insLeftOf(this.parent):cursor.insRightOf(this.parent):MathBlock.prototype.write.call(this,cursor,ch)}},_.latex=function(){return"$"+this.ends[L].latex()+"$"}}),RootTextBlock=P(RootMathBlock,function(_,super_){_.keystroke=function(key){return"Spacebar"===key||"Shift-Spacebar"===key?void 0:super_.keystroke.apply(this,arguments)},_.write=function(cursor,ch){if(cursor.show().deleteSelection(),"$"===ch)RootMathCommand(cursor).createLeftOf(cursor);else{var html;"<"===ch?html="&lt;":">"==ch&&(html="&gt;"),VanillaSymbol(ch,html).createLeftOf(cursor)}}});API.TextField=function(APIClasses){return P(APIClasses.EditableField,function(_,super_){this.RootBlock=RootTextBlock,_.__mathquillify=function(){return super_.__mathquillify.call(this,"mq-editable-field mq-text-mode")},_.latex=function(latex){return 0<arguments.length?(this.__controller.renderLatexText(latex),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()}})};var LatexCommandInput=CharCmds["\\"]=P(MathCommand,function(_,super_){_.ctrlSeq="\\",_.replaces=function(replacedFragment){this._replacedFragment=replacedFragment.disown(),this.isEmpty=function(){return!1}},_.htmlTemplate="<span class=\"mq-latex-command-input mq-non-leaf\">\\<span>&0</span></span>",_.textTemplate=["\\"],_.createBlocks=function(){super_.createBlocks.call(this),this.ends[L].focus=function(){return this.parent.jQ.addClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("mq-empty"),this},this.ends[L].blur=function(){return this.parent.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("mq-empty"),this},this.ends[L].write=function(cursor,ch){cursor.show().deleteSelection(),ch.match(/[a-z]/i)?VanillaSymbol(ch).createLeftOf(cursor):(this.parent.renderCommand(cursor),("\\"!==ch||!this.isEmpty())&&cursor.parent.write(cursor,ch))},this.ends[L].keystroke=function(key,e,ctrlr){return"Tab"===key||"Enter"===key||"Spacebar"===key?(this.parent.renderCommand(ctrlr.cursor),void e.preventDefault()):super_.keystroke.apply(this,arguments)}},_.createLeftOf=function(cursor){if(super_.createLeftOf.call(this,cursor),this._replacedFragment){var el=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",function(e){return $(e.target=el).trigger(e),!1}).insertBefore(this.jQ).add(this.jQ)}},_.latex=function(){return"\\"+this.ends[L].latex()+" "},_.renderCommand=function(cursor){this.jQ=this.jQ.last(),this.remove(),this[R]?cursor.insLeftOf(this[R]):cursor.insAtRightEnd(this.parent);var latex=this.ends[L].latex();latex||(latex=" ");var cmd=LatexCmds[latex]||Environments[latex];cmd?(cmd=cmd(latex),this._replacedFragment&&cmd.replaces(this._replacedFragment),cmd.createLeftOf(cursor)):(cmd=TextBlock(),cmd.replaces(latex),cmd.createLeftOf(cursor),cursor.insRightOf(cmd),this._replacedFragment&&this._replacedFragment.remove())}});LatexCmds.notin=LatexCmds.cong=LatexCmds.equiv=LatexCmds.oplus=LatexCmds.otimes=P(BinaryOperator,function(_,super_){_.init=function(latex){super_.init.call(this,"\\"+latex+" ","&"+latex+";")}}),LatexCmds["\u2260"]=LatexCmds.ne=LatexCmds.neq=bind(BinaryOperator,"\\ne ","&ne;"),LatexCmds["\u2217"]=LatexCmds.ast=LatexCmds.star=LatexCmds.loast=LatexCmds.lowast=bind(BinaryOperator,"\\ast ","&lowast;"),LatexCmds.therefor=LatexCmds.therefore=bind(BinaryOperator,"\\therefore ","&there4;"),LatexCmds.cuz=LatexCmds.because=bind(BinaryOperator,"\\because ","&#8757;"),LatexCmds.prop=LatexCmds.propto=bind(BinaryOperator,"\\propto ","&prop;"),LatexCmds["\u2248"]=LatexCmds.asymp=LatexCmds.approx=bind(BinaryOperator,"\\approx ","&asymp;"),LatexCmds.isin=LatexCmds["in"]=bind(BinaryOperator,"\\in ","&isin;"),LatexCmds.ni=LatexCmds.contains=bind(BinaryOperator,"\\ni ","&ni;"),LatexCmds.notni=LatexCmds.niton=LatexCmds.notcontains=LatexCmds.doesnotcontain=bind(BinaryOperator,"\\not\\ni ","&#8716;"),LatexCmds.sub=LatexCmds.subset=bind(BinaryOperator,"\\subset ","&sub;"),LatexCmds.sup=LatexCmds.supset=LatexCmds.superset=bind(BinaryOperator,"\\supset ","&sup;"),LatexCmds.nsub=LatexCmds.notsub=LatexCmds.nsubset=LatexCmds.notsubset=bind(BinaryOperator,"\\not\\subset ","&#8836;"),LatexCmds.nsup=LatexCmds.notsup=LatexCmds.nsupset=LatexCmds.notsupset=LatexCmds.nsuperset=LatexCmds.notsuperset=bind(BinaryOperator,"\\not\\supset ","&#8837;"),LatexCmds.sube=LatexCmds.subeq=LatexCmds.subsete=LatexCmds.subseteq=bind(BinaryOperator,"\\subseteq ","&sube;"),LatexCmds.supe=LatexCmds.supeq=LatexCmds.supsete=LatexCmds.supseteq=LatexCmds.supersete=LatexCmds.superseteq=bind(BinaryOperator,"\\supseteq ","&supe;"),LatexCmds.nsube=LatexCmds.nsubeq=LatexCmds.notsube=LatexCmds.notsubeq=LatexCmds.nsubsete=LatexCmds.nsubseteq=LatexCmds.notsubsete=LatexCmds.notsubseteq=bind(BinaryOperator,"\\not\\subseteq ","&#8840;"),LatexCmds.nsupe=LatexCmds.nsupeq=LatexCmds.notsupe=LatexCmds.notsupeq=LatexCmds.nsupsete=LatexCmds.nsupseteq=LatexCmds.notsupsete=LatexCmds.notsupseteq=LatexCmds.nsupersete=LatexCmds.nsuperseteq=LatexCmds.notsupersete=LatexCmds.notsuperseteq=bind(BinaryOperator,"\\not\\supseteq ","&#8841;"),LatexCmds.mathbb=P(MathCommand,function(_){_.createLeftOf=noop,_.numBlocks=function(){return 1},_.parser=function(){var string=Parser.string,regex=Parser.regex,optWhitespace=Parser.optWhitespace;return optWhitespace.then(string("{")).then(optWhitespace).then(regex(/^[NPZQRCH]/)).skip(optWhitespace).skip(string("}")).map(function(c){return LatexCmds[c]()})}}),LatexCmds.N=LatexCmds.naturals=LatexCmds.Naturals=bind(VanillaSymbol,"\\mathbb{N}","&#8469;"),LatexCmds.P=LatexCmds.primes=LatexCmds.Primes=LatexCmds.projective=LatexCmds.Projective=LatexCmds.probability=LatexCmds.Probability=bind(VanillaSymbol,"\\mathbb{P}","&#8473;"),LatexCmds.Z=LatexCmds.integers=LatexCmds.Integers=bind(VanillaSymbol,"\\mathbb{Z}","&#8484;"),LatexCmds.Q=LatexCmds.rationals=LatexCmds.Rationals=bind(VanillaSymbol,"\\mathbb{Q}","&#8474;"),LatexCmds.R=LatexCmds.reals=LatexCmds.Reals=bind(VanillaSymbol,"\\mathbb{R}","&#8477;"),LatexCmds.C=LatexCmds.complex=LatexCmds.Complex=LatexCmds.complexes=LatexCmds.Complexes=LatexCmds.complexplane=LatexCmds.Complexplane=LatexCmds.ComplexPlane=bind(VanillaSymbol,"\\mathbb{C}","&#8450;"),LatexCmds.H=LatexCmds.Hamiltonian=LatexCmds.quaternions=LatexCmds.Quaternions=bind(VanillaSymbol,"\\mathbb{H}","&#8461;"),LatexCmds.quad=LatexCmds.emsp=bind(VanillaSymbol,"\\quad ","    "),LatexCmds.qquad=bind(VanillaSymbol,"\\qquad ","        "),LatexCmds.diamond=bind(VanillaSymbol,"\\diamond ","&#9671;"),LatexCmds.bigtriangleup=bind(VanillaSymbol,"\\bigtriangleup ","&#9651;"),LatexCmds.ominus=bind(VanillaSymbol,"\\ominus ","&#8854;"),LatexCmds.uplus=bind(VanillaSymbol,"\\uplus ","&#8846;"),LatexCmds.bigtriangledown=bind(VanillaSymbol,"\\bigtriangledown ","&#9661;"),LatexCmds.sqcap=bind(VanillaSymbol,"\\sqcap ","&#8851;"),LatexCmds.triangleleft=bind(VanillaSymbol,"\\triangleleft ","&#8882;"),LatexCmds.sqcup=bind(VanillaSymbol,"\\sqcup ","&#8852;"),LatexCmds.triangleright=bind(VanillaSymbol,"\\triangleright ","&#8883;"),LatexCmds.odot=LatexCmds.circledot=bind(VanillaSymbol,"\\odot ","&#8857;"),LatexCmds.bigcirc=bind(VanillaSymbol,"\\bigcirc ","&#9711;"),LatexCmds.dagger=bind(VanillaSymbol,"\\dagger ","&#0134;"),LatexCmds.ddagger=bind(VanillaSymbol,"\\ddagger ","&#135;"),LatexCmds.wr=bind(VanillaSymbol,"\\wr ","&#8768;"),LatexCmds.amalg=bind(VanillaSymbol,"\\amalg ","&#8720;"),LatexCmds.models=bind(VanillaSymbol,"\\models ","&#8872;"),LatexCmds.prec=bind(VanillaSymbol,"\\prec ","&#8826;"),LatexCmds.succ=bind(VanillaSymbol,"\\succ ","&#8827;"),LatexCmds.preceq=bind(VanillaSymbol,"\\preceq ","&#8828;"),LatexCmds.succeq=bind(VanillaSymbol,"\\succeq ","&#8829;"),LatexCmds.simeq=bind(VanillaSymbol,"\\simeq ","&#8771;"),LatexCmds.mid=bind(VanillaSymbol,"\\mid ","&#8739;"),LatexCmds.ll=bind(VanillaSymbol,"\\ll ","&#8810;"),LatexCmds.gg=bind(VanillaSymbol,"\\gg ","&#8811;"),LatexCmds.parallel=bind(VanillaSymbol,"\\parallel ","&#8741;"),LatexCmds.nparallel=bind(VanillaSymbol,"\\nparallel ","&#8742;"),LatexCmds.bowtie=bind(VanillaSymbol,"\\bowtie ","&#8904;"),LatexCmds.sqsubset=bind(VanillaSymbol,"\\sqsubset ","&#8847;"),LatexCmds.sqsupset=bind(VanillaSymbol,"\\sqsupset ","&#8848;"),LatexCmds.smile=bind(VanillaSymbol,"\\smile ","&#8995;"),LatexCmds.sqsubseteq=bind(VanillaSymbol,"\\sqsubseteq ","&#8849;"),LatexCmds.sqsupseteq=bind(VanillaSymbol,"\\sqsupseteq ","&#8850;"),LatexCmds.doteq=bind(VanillaSymbol,"\\doteq ","&#8784;"),LatexCmds.frown=bind(VanillaSymbol,"\\frown ","&#8994;"),LatexCmds.vdash=bind(VanillaSymbol,"\\vdash ","&#8870;"),LatexCmds.dashv=bind(VanillaSymbol,"\\dashv ","&#8867;"),LatexCmds.nless=bind(VanillaSymbol,"\\nless ","&#8814;"),LatexCmds.ngtr=bind(VanillaSymbol,"\\ngtr ","&#8815;"),LatexCmds.longleftarrow=bind(VanillaSymbol,"\\longleftarrow ","&#8592;"),LatexCmds.longrightarrow=bind(VanillaSymbol,"\\longrightarrow ","&#8594;"),LatexCmds.Longleftarrow=bind(VanillaSymbol,"\\Longleftarrow ","&#8656;"),LatexCmds.Longrightarrow=bind(VanillaSymbol,"\\Longrightarrow ","&#8658;"),LatexCmds.longleftrightarrow=bind(VanillaSymbol,"\\longleftrightarrow ","&#8596;"),LatexCmds.updownarrow=bind(VanillaSymbol,"\\updownarrow ","&#8597;"),LatexCmds.Longleftrightarrow=bind(VanillaSymbol,"\\Longleftrightarrow ","&#8660;"),LatexCmds.Updownarrow=bind(VanillaSymbol,"\\Updownarrow ","&#8661;"),LatexCmds.mapsto=bind(VanillaSymbol,"\\mapsto ","&#8614;"),LatexCmds.nearrow=bind(VanillaSymbol,"\\nearrow ","&#8599;"),LatexCmds.hookleftarrow=bind(VanillaSymbol,"\\hookleftarrow ","&#8617;"),LatexCmds.hookrightarrow=bind(VanillaSymbol,"\\hookrightarrow ","&#8618;"),LatexCmds.searrow=bind(VanillaSymbol,"\\searrow ","&#8600;"),LatexCmds.leftharpoonup=bind(VanillaSymbol,"\\leftharpoonup ","&#8636;"),LatexCmds.rightharpoonup=bind(VanillaSymbol,"\\rightharpoonup ","&#8640;"),LatexCmds.swarrow=bind(VanillaSymbol,"\\swarrow ","&#8601;"),LatexCmds.leftharpoondown=bind(VanillaSymbol,"\\leftharpoondown ","&#8637;"),LatexCmds.rightharpoondown=bind(VanillaSymbol,"\\rightharpoondown ","&#8641;"),LatexCmds.nwarrow=bind(VanillaSymbol,"\\nwarrow ","&#8598;"),LatexCmds.ldots=bind(VanillaSymbol,"\\ldots ","&#8230;"),LatexCmds.cdots=bind(VanillaSymbol,"\\cdots ","&#8943;"),LatexCmds.vdots=bind(VanillaSymbol,"\\vdots ","&#8942;"),LatexCmds.ddots=bind(VanillaSymbol,"\\ddots ","&#8945;"),LatexCmds.surd=bind(VanillaSymbol,"\\surd ","&#8730;"),LatexCmds.triangle=bind(VanillaSymbol,"\\triangle ","&#9651;"),LatexCmds.ell=bind(VanillaSymbol,"\\ell ","&#8467;"),LatexCmds.top=bind(VanillaSymbol,"\\top ","&#8868;"),LatexCmds.flat=bind(VanillaSymbol,"\\flat ","&#9837;"),LatexCmds.natural=bind(VanillaSymbol,"\\natural ","&#9838;"),LatexCmds.sharp=bind(VanillaSymbol,"\\sharp ","&#9839;"),LatexCmds.wp=bind(VanillaSymbol,"\\wp ","&#8472;"),LatexCmds.bot=bind(VanillaSymbol,"\\bot ","&#8869;"),LatexCmds.clubsuit=bind(VanillaSymbol,"\\clubsuit ","&#9827;"),LatexCmds.diamondsuit=bind(VanillaSymbol,"\\diamondsuit ","&#9826;"),LatexCmds.heartsuit=bind(VanillaSymbol,"\\heartsuit ","&#9825;"),LatexCmds.spadesuit=bind(VanillaSymbol,"\\spadesuit ","&#9824;"),LatexCmds.parallelogram=bind(VanillaSymbol,"\\parallelogram ","&#9649;"),LatexCmds.square=bind(VanillaSymbol,"\\square ","&#11036;"),LatexCmds.oint=bind(VanillaSymbol,"\\oint ","&#8750;"),LatexCmds.bigcap=bind(VanillaSymbol,"\\bigcap ","&#8745;"),LatexCmds.bigcup=bind(VanillaSymbol,"\\bigcup ","&#8746;"),LatexCmds.bigsqcup=bind(VanillaSymbol,"\\bigsqcup ","&#8852;"),LatexCmds.bigvee=bind(VanillaSymbol,"\\bigvee ","&#8744;"),LatexCmds.bigwedge=bind(VanillaSymbol,"\\bigwedge ","&#8743;"),LatexCmds.bigodot=bind(VanillaSymbol,"\\bigodot ","&#8857;"),LatexCmds.bigotimes=bind(VanillaSymbol,"\\bigotimes ","&#8855;"),LatexCmds.bigoplus=bind(VanillaSymbol,"\\bigoplus ","&#8853;"),LatexCmds.biguplus=bind(VanillaSymbol,"\\biguplus ","&#8846;"),LatexCmds.lfloor=bind(VanillaSymbol,"\\lfloor ","&#8970;"),LatexCmds.rfloor=bind(VanillaSymbol,"\\rfloor ","&#8971;"),LatexCmds.lceil=bind(VanillaSymbol,"\\lceil ","&#8968;"),LatexCmds.rceil=bind(VanillaSymbol,"\\rceil ","&#8969;"),LatexCmds.opencurlybrace=LatexCmds.lbrace=bind(VanillaSymbol,"\\lbrace ","{"),LatexCmds.closecurlybrace=LatexCmds.rbrace=bind(VanillaSymbol,"\\rbrace ","}"),LatexCmds.lbrack=bind(VanillaSymbol,"["),LatexCmds.rbrack=bind(VanillaSymbol,"]"),LatexCmds.slash=bind(VanillaSymbol,"/"),LatexCmds.vert=bind(VanillaSymbol,"|"),LatexCmds.perp=LatexCmds.perpendicular=bind(VanillaSymbol,"\\perp ","&perp;"),LatexCmds.nabla=LatexCmds.del=bind(VanillaSymbol,"\\nabla ","&nabla;"),LatexCmds.hbar=bind(VanillaSymbol,"\\hbar ","&#8463;"),LatexCmds.AA=LatexCmds.Angstrom=LatexCmds.angstrom=bind(VanillaSymbol,"\\text\\AA ","&#8491;"),LatexCmds.ring=LatexCmds.circ=LatexCmds.circle=bind(VanillaSymbol,"\\circ ","&#8728;"),LatexCmds.bull=LatexCmds.bullet=bind(VanillaSymbol,"\\bullet ","&bull;"),LatexCmds.setminus=LatexCmds.smallsetminus=bind(VanillaSymbol,"\\setminus ","&#8726;"),LatexCmds.not=LatexCmds["\xAC"]=LatexCmds.neg=bind(VanillaSymbol,"\\neg ","&not;"),LatexCmds["\u2026"]=LatexCmds.dots=LatexCmds.ellip=LatexCmds.hellip=LatexCmds.ellipsis=LatexCmds.hellipsis=bind(VanillaSymbol,"\\dots ","&hellip;"),LatexCmds.converges=LatexCmds.darr=LatexCmds.dnarr=LatexCmds.dnarrow=LatexCmds.downarrow=bind(VanillaSymbol,"\\downarrow ","&darr;"),LatexCmds.dArr=LatexCmds.dnArr=LatexCmds.dnArrow=LatexCmds.Downarrow=bind(VanillaSymbol,"\\Downarrow ","&dArr;"),LatexCmds.diverges=LatexCmds.uarr=LatexCmds.uparrow=bind(VanillaSymbol,"\\uparrow ","&uarr;"),LatexCmds.uArr=LatexCmds.Uparrow=bind(VanillaSymbol,"\\Uparrow ","&uArr;"),LatexCmds.to=bind(BinaryOperator,"\\to ","&rarr;"),LatexCmds.rarr=LatexCmds.rightarrow=bind(VanillaSymbol,"\\rightarrow ","&rarr;"),LatexCmds.implies=bind(BinaryOperator,"\\Rightarrow ","&rArr;"),LatexCmds.rArr=LatexCmds.Rightarrow=bind(VanillaSymbol,"\\Rightarrow ","&rArr;"),LatexCmds.gets=bind(BinaryOperator,"\\gets ","&larr;"),LatexCmds.larr=LatexCmds.leftarrow=bind(VanillaSymbol,"\\leftarrow ","&larr;"),LatexCmds.impliedby=bind(BinaryOperator,"\\Leftarrow ","&lArr;"),LatexCmds.lArr=LatexCmds.Leftarrow=bind(VanillaSymbol,"\\Leftarrow ","&lArr;"),LatexCmds.harr=LatexCmds.lrarr=LatexCmds.leftrightarrow=bind(VanillaSymbol,"\\leftrightarrow ","&harr;"),LatexCmds.iff=bind(BinaryOperator,"\\Leftrightarrow ","&hArr;"),LatexCmds.hArr=LatexCmds.lrArr=LatexCmds.Leftrightarrow=bind(VanillaSymbol,"\\Leftrightarrow ","&hArr;"),LatexCmds.Re=LatexCmds.Real=LatexCmds.real=bind(VanillaSymbol,"\\Re ","&real;"),LatexCmds.Im=LatexCmds.imag=LatexCmds.image=LatexCmds.imagin=LatexCmds.imaginary=LatexCmds.Imaginary=bind(VanillaSymbol,"\\Im ","&image;"),LatexCmds.part=LatexCmds.partial=bind(VanillaSymbol,"\\partial ","&part;"),LatexCmds.infty=LatexCmds.infin=LatexCmds.infinity=bind(VanillaSymbol,"\\infty ","&infin;"),LatexCmds.pounds=bind(VanillaSymbol,"\\pounds ","&pound;"),LatexCmds.alef=LatexCmds.alefsym=LatexCmds.aleph=LatexCmds.alephsym=bind(VanillaSymbol,"\\aleph ","&alefsym;"),LatexCmds.xist=LatexCmds.xists=LatexCmds.exist=LatexCmds.exists=bind(VanillaSymbol,"\\exists ","&exist;"),LatexCmds.nexists=LatexCmds.nexist=bind(VanillaSymbol,"\\nexists ","&#8708;"),LatexCmds.and=LatexCmds.land=LatexCmds.wedge=bind(BinaryOperator,"\\wedge ","&and;"),LatexCmds.or=LatexCmds.lor=LatexCmds.vee=bind(BinaryOperator,"\\vee ","&or;"),LatexCmds.o=LatexCmds.O=LatexCmds.empty=LatexCmds.emptyset=LatexCmds.oslash=LatexCmds.Oslash=LatexCmds.nothing=LatexCmds.varnothing=bind(BinaryOperator,"\\varnothing ","&empty;"),LatexCmds.cup=LatexCmds.union=bind(BinaryOperator,"\\cup ","&cup;"),LatexCmds.cap=LatexCmds.intersect=LatexCmds.intersection=bind(BinaryOperator,"\\cap ","&cap;"),LatexCmds.deg=LatexCmds.degree=bind(VanillaSymbol,"\\degree ","&deg;"),LatexCmds.ang=LatexCmds.angle=bind(VanillaSymbol,"\\angle ","&ang;"),LatexCmds.measuredangle=bind(VanillaSymbol,"\\measuredangle ","&#8737;");var Digit=P(VanillaSymbol,function(_,super_){_.createLeftOf=function(cursor){cursor.options.autoSubscriptNumerals&&cursor.parent!==cursor.parent.parent.sub&&(cursor[L]instanceof Variable&&!1!==cursor[L].isItalic||cursor[L]instanceof SupSub&&cursor[L][L]instanceof Variable&&!1!==cursor[L][L].isItalic)?(LatexCmds._().createLeftOf(cursor),super_.createLeftOf.call(this,cursor),cursor.insRightOf(cursor.parent.parent)):super_.createLeftOf.call(this,cursor)}}),Variable=P(_Symbol,function(_,super_){_.init=function(ch,html){super_.init.call(this,ch,"<var>"+(html||ch)+"</var>")},_.text=function(){var text=this.ctrlSeq;return this.isPartOfOperator?"\\"==text[0]?text=text.slice(1,text.length):" "==text[text.length-1]&&(text=text.slice(0,-1)):(this[L]&&!(this[L]instanceof Variable)&&!(this[L]instanceof BinaryOperator)&&"\\ "!==this[L].ctrlSeq&&(text="*"+text),this[R]&&!(this[R]instanceof BinaryOperator)&&!(this[R]instanceof SupSub)&&(text+="*")),text}});Options.p.autoCommands={_maxLength:0},optionProcessors.autoCommands=function(cmds){if(!/^[a-z]+(?: [a-z]+)*$/i.test(cmds))throw"\""+cmds+"\" not a space-delimited list of only letters";for(var list=cmds.split(" "),dict={},maxLength=0,i=0,cmd;i<list.length;i+=1){if(cmd=list[i],2>cmd.length)throw"autocommand \""+cmd+"\" not minimum length of 2";if(LatexCmds[cmd]===OperatorName)throw"\""+cmd+"\" is a built-in operator name";dict[cmd]=1,maxLength=max(maxLength,cmd.length)}return dict._maxLength=maxLength,dict};var Letter=P(Variable,function(_,super_){function shouldOmitPadding(node){return!node||node instanceof BinaryOperator||node instanceof SummationNotation}_.init=function(ch){return super_.init.call(this,this.letter=ch)},_.createLeftOf=function(cursor){super_.createLeftOf.apply(this,arguments);var autoCmds=cursor.options.autoCommands,maxLength=autoCmds._maxLength;if(0<maxLength){for(var str="",l=this,i=0;l instanceof Letter&&l.ctrlSeq===l.letter&&i<maxLength;)str=l.letter+str,l=l[L],i+=1;for(;str.length;){if(autoCmds.hasOwnProperty(str)){for(var i=1,l=this;i<str.length;i+=1,l=l[L]);return Fragment(l,this).remove(),cursor[L]=l[L],LatexCmds[str](str).createLeftOf(cursor)}str=str.slice(1)}}},_.italicize=function(bool){return this.isItalic=bool,this.isPartOfOperator=!bool,this.jQ.toggleClass("mq-operator-name",!bool),this},_.finalizeTree=_.siblingDeleted=_.siblingCreated=function(opts,dir){dir!==L&&this[R]instanceof Letter||this.autoUnItalicize(opts)},_.autoUnItalicize=function(opts){var autoOps=opts.autoOperatorNames;if(0!==autoOps._maxLength){for(var str=this.letter,l=this[L];l instanceof Letter;l=l[L])str=l.letter+str;for(var r=this[R];r instanceof Letter;r=r[R])str+=r.letter;Fragment(l[R]||this.parent.ends[L],r[L]||this.parent.ends[R]).each(function(el){el.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),el.ctrlSeq=el.letter});outer:for(var i=0,first=l[R]||this.parent.ends[L];i<str.length;i+=1,first=first[R])for(var len=min(autoOps._maxLength,str.length-i),word;0<len;len-=1)if(word=str.slice(i,i+len),autoOps.hasOwnProperty(word)){for(var j=0,letter=first;j<len;j+=1,letter=letter[R]){letter.italicize(!1);var last=letter}var isBuiltIn=BuiltInOpNames.hasOwnProperty(word);if(first.ctrlSeq=(isBuiltIn?"\\":"\\operatorname{")+first.ctrlSeq,last.ctrlSeq+=isBuiltIn?" ":"}",TwoWordOpNames.hasOwnProperty(word)&&last[L][L][L].jQ.addClass("mq-last"),shouldOmitPadding(first[L])||first.jQ.addClass("mq-first"),!shouldOmitPadding(last[R]))if(last[R]instanceof SupSub){var supsub=last[R],respace=supsub.siblingCreated=supsub.siblingDeleted=function(){supsub.jQ.toggleClass("mq-after-operator-name",!(supsub[R]instanceof Bracket))};respace()}else last.jQ.toggleClass("mq-last",!(last[R]instanceof Bracket));i+=len-1,first=last;continue outer}}}}),BuiltInOpNames={},AutoOpNames=Options.p.autoOperatorNames={_maxLength:9},TwoWordOpNames={limsup:1,liminf:1,projlim:1,injlim:1};(function(){for(var mostOps="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),i=0;i<mostOps.length;i+=1)BuiltInOpNames[mostOps[i]]=AutoOpNames[mostOps[i]]=1;for(var builtInTrigs=["sin","cos","tan","arcsin","arccos","arctan","sinh","cosh","tanh","sec","csc","cot","coth"],i=0;i<builtInTrigs.length;i+=1)BuiltInOpNames[builtInTrigs[i]]=1;for(var autoTrigs=["sin","cos","tan","sec","cosec","csc","cotan","cot","ctg"],i=0;i<autoTrigs.length;i+=1)AutoOpNames[autoTrigs[i]]=AutoOpNames["arc"+autoTrigs[i]]=AutoOpNames[autoTrigs[i]+"h"]=AutoOpNames["ar"+autoTrigs[i]+"h"]=AutoOpNames["arc"+autoTrigs[i]+"h"]=1;for(var moreNonstandardOps=["gcf","hcf","lcm","proj","span"],i=0;i<moreNonstandardOps.length;i+=1)AutoOpNames[moreNonstandardOps[i]]=1})(),optionProcessors.autoOperatorNames=function(cmds){if(!/^[a-z]+(?: [a-z]+)*$/i.test(cmds))throw"\""+cmds+"\" not a space-delimited list of only letters";for(var list=cmds.split(" "),dict={},maxLength=0,i=0,cmd;i<list.length;i+=1){if(cmd=list[i],2>cmd.length)throw"\""+cmd+"\" not minimum length of 2";dict[cmd]=1,maxLength=max(maxLength,cmd.length)}return dict._maxLength=maxLength,dict};var OperatorName=P(_Symbol,function(_,super_){_.init=function(fn){this.ctrlSeq=fn},_.createLeftOf=function(cursor){for(var fn=this.ctrlSeq,i=0;i<fn.length;i+=1)Letter(fn.charAt(i)).createLeftOf(cursor)},_.parser=function(){for(var fn=this.ctrlSeq,block=MathBlock(),i=0;i<fn.length;i+=1)Letter(fn.charAt(i)).adopt(block,block.ends[R],0);return Parser.succeed(block.children())}});for(var fn in AutoOpNames)AutoOpNames.hasOwnProperty(fn)&&(LatexCmds[fn]=OperatorName);LatexCmds.operatorname=P(MathCommand,function(_){_.createLeftOf=noop,_.numBlocks=function(){return 1},_.parser=function(){return latexMathParser.block.map(function(b){return b.children()})}}),LatexCmds.f=P(Letter,function(_,super_){_.init=function(){_Symbol.p.init.call(this,this.letter="f","<var class=\"mq-f\">f</var>")},_.italicize=function(bool){return this.jQ.html("f").toggleClass("mq-f",bool),super_.italicize.apply(this,arguments)}}),LatexCmds[" "]=LatexCmds.space=bind(VanillaSymbol,"\\ ","&nbsp;"),LatexCmds["'"]=LatexCmds.prime=bind(VanillaSymbol,"'","&prime;"),LatexCmds["\u2033"]=LatexCmds.dprime=bind(VanillaSymbol,"\u2033","&Prime;"),LatexCmds.backslash=bind(VanillaSymbol,"\\backslash ","\\"),CharCmds["\\"]||(CharCmds["\\"]=LatexCmds.backslash),LatexCmds.$=bind(VanillaSymbol,"\\$","$");var NonSymbolaSymbol=P(_Symbol,function(_,super_){_.init=function(ch,html){super_.init.call(this,ch,"<span class=\"mq-nonSymbola\">"+(html||ch)+"</span>")}});LatexCmds["@"]=NonSymbolaSymbol,LatexCmds["&"]=bind(NonSymbolaSymbol,"\\&","&amp;"),LatexCmds["%"]=bind(NonSymbolaSymbol,"\\%","%"),LatexCmds.alpha=LatexCmds.beta=LatexCmds.gamma=LatexCmds.delta=LatexCmds.zeta=LatexCmds.eta=LatexCmds.theta=LatexCmds.iota=LatexCmds.kappa=LatexCmds.mu=LatexCmds.nu=LatexCmds.xi=LatexCmds.rho=LatexCmds.sigma=LatexCmds.tau=LatexCmds.chi=LatexCmds.psi=LatexCmds.omega=P(Variable,function(_,super_){_.init=function(latex){super_.init.call(this,"\\"+latex+" ","&"+latex+";")}}),LatexCmds.phi=bind(Variable,"\\phi ","&#981;"),LatexCmds.phiv=LatexCmds.varphi=bind(Variable,"\\varphi ","&phi;"),LatexCmds.epsilon=bind(Variable,"\\epsilon ","&#1013;"),LatexCmds.epsiv=LatexCmds.varepsilon=bind(Variable,"\\varepsilon ","&epsilon;"),LatexCmds.piv=LatexCmds.varpi=bind(Variable,"\\varpi ","&piv;"),LatexCmds.sigmaf=LatexCmds.sigmav=LatexCmds.varsigma=bind(Variable,"\\varsigma ","&sigmaf;"),LatexCmds.thetav=LatexCmds.vartheta=LatexCmds.thetasym=bind(Variable,"\\vartheta ","&thetasym;"),LatexCmds.upsilon=LatexCmds.upsi=bind(Variable,"\\upsilon ","&upsilon;"),LatexCmds.gammad=LatexCmds.Gammad=LatexCmds.digamma=bind(Variable,"\\digamma ","&#989;"),LatexCmds.kappav=LatexCmds.varkappa=bind(Variable,"\\varkappa ","&#1008;"),LatexCmds.rhov=LatexCmds.varrho=bind(Variable,"\\varrho ","&#1009;"),LatexCmds.pi=LatexCmds.=bind(NonSymbolaSymbol,"\\pi ","&pi;"),LatexCmds.lambda=bind(NonSymbolaSymbol,"\\lambda ","&lambda;"),LatexCmds.Upsilon=LatexCmds.Upsi=LatexCmds.upsih=LatexCmds.Upsih=bind(_Symbol,"\\Upsilon ","<var style=\"font-family: serif\">&upsih;</var>"),LatexCmds.Gamma=LatexCmds.Delta=LatexCmds.Theta=LatexCmds.Lambda=LatexCmds.Xi=LatexCmds.Pi=LatexCmds.Sigma=LatexCmds.Phi=LatexCmds.Psi=LatexCmds.Omega=LatexCmds.forall=P(VanillaSymbol,function(_,super_){_.init=function(latex){super_.init.call(this,"\\"+latex+" ","&"+latex+";")}});var LatexFragment=P(MathCommand,function(_){_.init=function(latex){this.latex=latex},_.createLeftOf=function(cursor){var block=latexMathParser.parse(this.latex);block.children().adopt(cursor.parent,cursor[L],cursor[R]),cursor[L]=block.ends[R],block.jQize().insertBefore(cursor.jQ),block.finalizeInsert(cursor.options,cursor),block.ends[R][R].siblingCreated&&block.ends[R][R].siblingCreated(cursor.options,L),block.ends[L][L].siblingCreated&&block.ends[L][L].siblingCreated(cursor.options,R),cursor.parent.bubble("reflow")},_.parser=function(){var frag=latexMathParser.parse(this.latex).children();return Parser.succeed(frag)}});LatexCmds["\xB9"]=bind(LatexFragment,"^1"),LatexCmds["\xB2"]=bind(LatexFragment,"^2"),LatexCmds["\xB3"]=bind(LatexFragment,"^3"),LatexCmds["\xBC"]=bind(LatexFragment,"\\frac14"),LatexCmds["\xBD"]=bind(LatexFragment,"\\frac12"),LatexCmds["\xBE"]=bind(LatexFragment,"\\frac34");var PlusMinus=P(BinaryOperator,function(_){_.init=VanillaSymbol.prototype.init,_.contactWeld=_.siblingCreated=_.siblingDeleted=function(opts,dir){function determineOpClassType(node){if(!node[L])return node.parent&&node.parent.parent&&node.parent.parent.isStyleBlock()?determineOpClassType(node.parent.parent):"";return node[L]instanceof BinaryOperator||/^[,;:\(\[]$/.test(node[L].ctrlSeq)?"":"mq-binary-operator"}if(dir!==R)return this.jQ[0].className=determineOpClassType(this),this}});LatexCmds["+"]=bind(PlusMinus,"+","+"),LatexCmds["\u2013"]=LatexCmds["-"]=bind(PlusMinus,"-","&minus;"),LatexCmds["\xB1"]=LatexCmds.pm=LatexCmds.plusmn=LatexCmds.plusminus=bind(PlusMinus,"\\pm ","&plusmn;"),LatexCmds.mp=LatexCmds.mnplus=LatexCmds.minusplus=bind(PlusMinus,"\\mp ","&#8723;"),CharCmds["*"]=LatexCmds.sdot=LatexCmds.cdot=bind(BinaryOperator,"\\cdot ","&middot;","*");var Inequality=P(BinaryOperator,function(_,super_){_.init=function(data,strict){this.data=data,this.strict=strict;var strictness=strict?"Strict":"";super_.init.call(this,data["ctrlSeq"+strictness],data["html"+strictness],data["text"+strictness])},_.swap=function(strict){this.strict=strict;var strictness=strict?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+strictness],this.jQ.html(this.data["html"+strictness]),this.textTemplate=[this.data["text"+strictness]]},_.deleteTowards=function(dir,cursor){return dir!==L||this.strict?void super_.deleteTowards.apply(this,arguments):(this.swap(!0),void this.bubble("reflow"))}}),less={ctrlSeq:"\\le ",html:"&le;",text:"\u2264",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},greater={ctrlSeq:"\\ge ",html:"&ge;",text:"\u2265",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"},geq={ctrlSeq:"\\geq ",html:"\u2267",text:"\u2267",ctrlSeqStrict:">",htmlStrict:"\u2267",textStrict:">"},leq={ctrlSeq:"\\leq ",html:"\u2266",text:"\u2266",ctrlSeqStrict:"<",htmlStrict:"\u2266",textStrict:"<"};LatexCmds["<"]=LatexCmds.lt=bind(Inequality,less,!0),LatexCmds[">"]=LatexCmds.gt=bind(Inequality,greater,!0),LatexCmds["\u2264"]=LatexCmds.le=bind(Inequality,less,!1),LatexCmds["\u2265"]=LatexCmds.ge=bind(Inequality,greater,!1),LatexCmds.leq=bind(Inequality,leq,!1),LatexCmds.geq=bind(Inequality,geq,!1);var Equality=P(BinaryOperator,function(_,super_){_.init=function(){super_.init.call(this,"=","=")},_.createLeftOf=function(cursor){return cursor[L]instanceof Inequality&&cursor[L].strict?(cursor[L].swap(!1),void cursor[L].bubble("reflow")):void super_.createLeftOf.apply(this,arguments)}});LatexCmds["="]=Equality,LatexCmds["\xD7"]=LatexCmds.times=bind(BinaryOperator,"\\times ","&times;","[x]"),LatexCmds["\xF7"]=LatexCmds.div=LatexCmds.divide=LatexCmds.divides=bind(BinaryOperator,"\\div ","&divide;","[/]"),CharCmds["~"]=LatexCmds.sim=bind(BinaryOperator,"\\sim ","~","~");var forceIERedraw=noop,div=document.createElement("div"),div_style=div.style,transformPropNames={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},scale,transformPropName;for(var prop in transformPropNames)if(prop in div_style){transformPropName=prop;break}transformPropName?scale=function scale(jQ,x,y){jQ.css(transformPropName,"scale("+x+","+y+")")}:"filter"in div_style?(forceIERedraw=function forceIERedraw(el){el.className=el.className},scale=function scale(jQ,x,y){function calculateMarginRight(){jQ.css("marginRight",(innerjQ.width()-1)*(x-1)/x+"px")}x/=1+(y-1)/2,jQ.css("fontSize",y+"em"),jQ.hasClass("mq-matrixed-container")||jQ.addClass("mq-matrixed-container").wrapInner("<span class=\"mq-matrixed\"></span>");var innerjQ=jQ.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+x+",SizingMethod='auto expand')");calculateMarginRight();var intervalId=setInterval(calculateMarginRight);$(window).load(function(){clearTimeout(intervalId),calculateMarginRight()})}):scale=function scale(jQ,x,y){jQ.css("fontSize",y+"em")};var Style=P(MathCommand,function(_,super_){_.init=function(ctrlSeq,tagName,attrs){super_.init.call(this,ctrlSeq,"<"+tagName+" "+attrs+">&0</"+tagName+">")}});LatexCmds.mathrm=bind(Style,"\\mathrm","span","class=\"mq-roman mq-font\""),LatexCmds.mathit=bind(Style,"\\mathit","i","class=\"mq-font\""),LatexCmds.mathbf=bind(Style,"\\mathbf","b","class=\"mq-font\""),LatexCmds.mathsf=bind(Style,"\\mathsf","span","class=\"mq-sans-serif mq-font\""),LatexCmds.mathtt=bind(Style,"\\mathtt","span","class=\"mq-monospace mq-font\""),LatexCmds.underline=bind(Style,"\\underline","span","class=\"mq-non-leaf mq-underline\""),LatexCmds.overline=LatexCmds.bar=bind(Style,"\\overline","span","class=\"mq-non-leaf mq-overline\""),LatexCmds.overrightarrow=bind(Style,"\\overrightarrow","span","class=\"mq-non-leaf mq-overarrow mq-arrow-right\""),LatexCmds.overleftarrow=bind(Style,"\\overleftarrow","span","class=\"mq-non-leaf mq-overarrow mq-arrow-left\""),LatexCmds.overleftrightarrow=bind(Style,"\\overleftrightarrow","span","class=\"mq-non-leaf mq-overarrow mq-arrow-both\""),LatexCmds.overarc=bind(Style,"\\overarc","span","class=\"mq-non-leaf mq-overarc\""),LatexCmds.dot=P(MathCommand,function(_,super_){_.init=function(){super_.init.call(this,"\\dot","<span class=\"mq-non-leaf\"><span class=\"mq-dot-recurring-inner\"><span class=\"mq-dot-recurring\">&#x2d9;</span><span class=\"mq-empty-box\">&0</span></span></span>")}});var TextColor=LatexCmds.textcolor=P(MathCommand,function(_,super_){_.setColor=function(color){this.color=color,this.htmlTemplate="<span class=\"mq-textcolor\" style=\"color:"+color+"\">&0</span>"},_.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},_.parser=function(){var self=this,optWhitespace=Parser.optWhitespace,string=Parser.string,regex=Parser.regex;return optWhitespace.then(string("{")).then(regex(/^[#\w\s.,()%-]*/)).skip(string("}")).then(function(color){return self.setColor(color),super_.parser.call(self)})},_.isStyleBlock=function(){return!0}}),Class=LatexCmds["class"]=P(MathCommand,function(_,super_){_.parser=function(){var self=this,string=Parser.string,regex=Parser.regex;return Parser.optWhitespace.then(string("{")).then(regex(/^[-\w\s\\\xA0-\xFF]*/)).skip(string("}")).then(function(cls){return self.cls=cls||"",self.htmlTemplate="<span class=\"mq-class "+cls+"\">&0</span>",super_.parser.call(self)})},_.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},_.isStyleBlock=function(){return!0}}),SupSub=P(MathCommand,function(_,super_){_.ctrlSeq="_{...}^{...}",_.createLeftOf=function(cursor){return this.replacedFragment||cursor[L]||!cursor.options.supSubsRequireOperand?super_.createLeftOf.apply(this,arguments):void 0},_.contactWeld=function(cursor){for(var dir=L;dir;dir=!(dir!==L)&&R)if(this[dir]instanceof SupSub){for(var supsub="sub";supsub;supsub=!("sub"!==supsub)&&"sup"){var src=this[supsub],dest=this[dir][supsub];if(src){if(!dest)this[dir].addBlock(src.disown());else if(!src.isEmpty()){src.jQ.children().insAtDirEnd(-dir,dest.jQ);var children=src.children().disown(),pt=Point(dest,children.ends[R],dest.ends[L]);dir===L?children.adopt(dest,dest.ends[R],0):children.adopt(dest,0,dest.ends[L])}else var pt=Point(dest,0,dest.ends[L]);this.placeCursor=function(dest,src){return function(cursor){cursor.insAtDirEnd(-dir,dest||src)}}(dest,src)}}this.remove(),cursor&&cursor[L]===this&&(dir===R&&pt?pt[L]?cursor.insRightOf(pt[L]):cursor.insAtLeftEnd(pt.parent):cursor.insRightOf(this[dir]));break}},Options.p.charsThatBreakOutOfSupSub="",_.finalizeTree=function(){this.ends[L].write=function(cursor,ch){if(cursor.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===ch)return;var cmd=this.chToCmd(ch,cursor.options);return cmd instanceof _Symbol?cursor.deleteSelection():cursor.clearSelection().insRightOf(this.parent),cmd.createLeftOf(cursor.show())}cursor[L]&&!cursor[R]&&!cursor.selection&&-1<cursor.options.charsThatBreakOutOfSupSub.indexOf(ch)&&cursor.insRightOf(this.parent),MathBlock.p.write.apply(this,arguments)}},_.moveTowards=function(dir,cursor,updown){cursor.options.autoSubscriptNumerals&&!this.sup?cursor.insDirOf(dir,this):super_.moveTowards.apply(this,arguments)},_.deleteTowards=function(dir,cursor){if(cursor.options.autoSubscriptNumerals&&this.sub){var cmd=this.sub.ends[-dir];cmd instanceof _Symbol?cmd.remove():cmd&&cmd.deleteTowards(dir,cursor.insAtDirEnd(-dir,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(L,cursor.insAtLeftEnd(this.sub)),this.sup&&cursor.insDirOf(-dir,this))}else super_.deleteTowards.apply(this,arguments)},_.latex=function(){function latex(prefix,block){var l=block&&block.latex();return block?prefix+(1===l.length?l:"{"+(l||" ")+"}"):""}return latex("_",this.sub)+latex("^",this.sup)},_.text=function(){function text(prefix,block){var l=block&&block.text();return block?prefix+(1===l.length?l:"("+(l||" ")+")"):""}return text("_",this.sub)+text("^",this.sup)},_.addBlock=function(block){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=block,block.adopt(this,this.sub,0).downOutOf=this.sub,block.jQ=$("<span class=\"mq-sup\"/>").append(block.jQ.children()).attr("mathquill-block-id",block.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=block,block.adopt(this,0,this.sup).upOutOf=this.sup,block.jQ=$("<span class=\"mq-sub\"></span>").append(block.jQ.children()).attr("mathquill-block-id",block.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append("<span style=\"display:inline-block;width:0\">&#8203;</span>"));for(var i=0;2>i;i+=1)(function(cmd,supsub,oppositeSupsub,updown){cmd[supsub].deleteOutOf=function(dir,cursor){if(cursor.insDirOf(this[dir]?-dir:dir,this.parent),!this.isEmpty()){var end=this.ends[dir];this.children().disown().withDirAdopt(dir,cursor.parent,cursor[dir],cursor[-dir]).jQ.insDirOf(-dir,cursor.jQ),cursor[-dir]=end}cmd.supsub=oppositeSupsub,delete cmd[supsub],delete cmd[updown+"Into"],cmd[oppositeSupsub][updown+"OutOf"]=insLeftOfMeUnlessAtEnd,delete cmd[oppositeSupsub].deleteOutOf,"sub"===supsub&&$(cmd.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}})(this,["sub","sup"][i],["sup","sub"][i],["down","up"][i])},_.reflow=function(){var $block=this.jQ,$prev=$block.prev();if($prev.length){var $sup=$block.children(".mq-sup");if($sup.length){var sup_fontsize=parseInt($sup.css("font-size")),sup_bottom=$sup.offset().top+$sup.height(),needed=sup_bottom-$prev.offset().top-.7*sup_fontsize,cur_margin=parseInt($sup.css("margin-bottom"));$sup.css("margin-bottom",cur_margin+needed)}}}});LatexCmds.subscript=LatexCmds._=P(SupSub,function(_,super_){_.supsub="sub",_.htmlTemplate="<span class=\"mq-supsub mq-non-leaf\"><span class=\"mq-sub\">&0</span><span style=\"display:inline-block;width:0\">&#8203;</span></span>",_.textTemplate=["_"],_.finalizeTree=function(){this.downInto=this.sub=this.ends[L],this.sub.upOutOf=insLeftOfMeUnlessAtEnd,super_.finalizeTree.call(this)}}),LatexCmds.superscript=LatexCmds.supscript=LatexCmds["^"]=P(SupSub,function(_,super_){_.supsub="sup",_.htmlTemplate="<span class=\"mq-supsub mq-non-leaf mq-sup-only\"><span class=\"mq-sup\">&0</span></span>",_.textTemplate=["^(",")"],_.finalizeTree=function(){this.upInto=this.sup=this.ends[R],this.sup.downOutOf=insLeftOfMeUnlessAtEnd,super_.finalizeTree.call(this)}});var SummationNotation=P(MathCommand,function(_,super_){_.init=function(ch,html){var htmlTemplate="<span class=\"mq-large-operator mq-non-leaf\"><span class=\"mq-to\"><span>&1</span></span><big>"+html+"</big><span class=\"mq-from\"><span>&0</span></span></span>";_Symbol.prototype.init.call(this,ch,htmlTemplate)},_.createLeftOf=function(cursor){super_.createLeftOf.apply(this,arguments),cursor.options.sumStartsWithNEquals&&(Letter("n").createLeftOf(cursor),Equality().createLeftOf(cursor))},_.latex=function(){function simplify(latex){return 1===latex.length?latex:"{"+(latex||" ")+"}"}return this.ctrlSeq+"_"+simplify(this.ends[L].latex())+"^"+simplify(this.ends[R].latex())},_.parser=function(){for(var string=Parser.string,optWhitespace=Parser.optWhitespace,succeed=Parser.succeed,block=latexMathParser.block,self=this,blocks=self.blocks=[MathBlock(),MathBlock()],i=0;i<blocks.length;i+=1)blocks[i].adopt(self,self.ends[R],0);return optWhitespace.then(string("_").or(string("^"))).then(function(supOrSub){var child=blocks["_"===supOrSub?0:1];return block.then(function(block){return block.children().adopt(child,child.ends[R],0),succeed(self)})}).many().result(self)},_.finalizeTree=function(){this.downInto=this.ends[L],this.upInto=this.ends[R],this.ends[L].upOutOf=this.ends[R],this.ends[R].downOutOf=this.ends[L]}});LatexCmds["\u2211"]=LatexCmds.sum=LatexCmds.summation=bind(SummationNotation,"\\sum ","&sum;"),LatexCmds["\u220F"]=LatexCmds.prod=LatexCmds.product=bind(SummationNotation,"\\prod ","&prod;"),LatexCmds.coprod=LatexCmds.coproduct=bind(SummationNotation,"\\coprod ","&#8720;"),LatexCmds["\u222B"]=LatexCmds.int=LatexCmds.integral=P(SummationNotation,function(_,super_){_.init=function(){var htmlTemplate="<span class=\"mq-int mq-non-leaf\"><big>&int;</big><span class=\"mq-supsub mq-non-leaf\"><span class=\"mq-sup\"><span class=\"mq-sup-inner\">&1</span></span><span class=\"mq-sub\">&0</span><span style=\"display:inline-block;width:0\">&#8203</span></span></span>";_Symbol.prototype.init.call(this,"\\int ","<span class=\"mq-int mq-non-leaf\"><big>&int;</big><span class=\"mq-supsub mq-non-leaf\"><span class=\"mq-sup\"><span class=\"mq-sup-inner\">&1</span></span><span class=\"mq-sub\">&0</span><span style=\"display:inline-block;width:0\">&#8203</span></span></span>")},_.createLeftOf=MathCommand.p.createLeftOf}),LatexCmds.lim=LatexCmds.limit=P(MathCommand,function(_,super_){_.init=function(){var htmlTemplate="<span class=\"mq-limit mq-non-leaf\"><span class=\"mq-lim\">lim</span><span class=\"mq-approaches\"><span>&0</span></span></span>";_Symbol.prototype.init.call(this,"\\lim ","<span class=\"mq-limit mq-non-leaf\"><span class=\"mq-lim\">lim</span><span class=\"mq-approaches\"><span>&0</span></span></span>")},_.latex=function(){function simplify(latex){return 1===latex.length?latex:"{"+(latex||" ")+"}"}return this.ctrlSeq+"_"+simplify(this.ends[L].latex())},_.parser=function(){var string=Parser.string,optWhitespace=Parser.optWhitespace,succeed=Parser.succeed,block=latexMathParser.block,self=this,child=MathBlock();return self.blocks=[child],child.adopt(self,0,0),optWhitespace.then(string("_")).then(function(supOrSub){return block.then(function(block){return block.children().adopt(child,child.ends[R],0),succeed(self)})}).many().result(self)},_.finalizeTree=function(){this.downInto=this.ends[L],this.ends[L].upOutOf=function(cursor){var cmd=this.parent,ancestorCmd=cursor;do{if(ancestorCmd[L])return cursor.insRightOf(cmd);ancestorCmd=ancestorCmd.parent.parent}while(ancestorCmd!==cmd);cursor.insLeftOf(cmd)}}});var Fraction=LatexCmds.frac=LatexCmds.dfrac=LatexCmds.cfrac=LatexCmds.fraction=P(MathCommand,function(_,super_){_.ctrlSeq="\\frac",_.htmlTemplate="<span class=\"mq-fraction mq-non-leaf\"><span class=\"mq-numerator\">&0</span><span class=\"mq-denominator\">&1</span><span style=\"display:inline-block;width:0\">&#8203;</span></span>",_.textTemplate=["(",")/(",")"],_.finalizeTree=function(){this.upInto=this.ends[R].upOutOf=this.ends[L],this.downInto=this.ends[L].downOutOf=this.ends[R]}}),LiveFraction=LatexCmds.over=CharCmds["/"]=P(Fraction,function(_,super_){_.createLeftOf=function(cursor){if(!this.replacedFragment){for(var leftward=cursor[L];leftward&&!(leftward instanceof BinaryOperator||leftward instanceof(LatexCmds.text||noop)||leftward instanceof SummationNotation||"\\ "===leftward.ctrlSeq||/^[,;:]$/.test(leftward.ctrlSeq));)leftward=leftward[L];leftward instanceof SummationNotation&&leftward[R]instanceof SupSub&&(leftward=leftward[R],leftward[R]instanceof SupSub&&leftward[R].ctrlSeq!=leftward.ctrlSeq&&(leftward=leftward[R])),leftward===cursor[L]||cursor.isTooDeep(1)||(this.replaces(Fragment(leftward[R]||cursor.parent.ends[L],cursor[L])),cursor[L]=leftward)}super_.createLeftOf.call(this,cursor)}}),SquareRoot=LatexCmds.sqrt=LatexCmds["\u221A"]=P(MathCommand,function(_,super_){_.ctrlSeq="\\sqrt",_.htmlTemplate="<span class=\"mq-non-leaf\"><span class=\"mq-scaled mq-sqrt-prefix\">&radic;</span><span class=\"mq-non-leaf mq-sqrt-stem\">&0</span></span>",_.textTemplate=["sqrt(",")"],_.parser=function(){return latexMathParser.optBlock.then(function(optBlock){return latexMathParser.block.map(function(block){var nthroot=NthRoot();return nthroot.blocks=[optBlock,block],optBlock.adopt(nthroot,0,0),block.adopt(nthroot,optBlock,0),nthroot})}).or(super_.parser.call(this))},_.reflow=function(){var block=this.ends[R].jQ;scale(block.prev(),1,block.innerHeight()/+block.css("fontSize").slice(0,-2)-.1)}}),Hat=LatexCmds.hat=P(MathCommand,function(_,super_){_.ctrlSeq="\\hat",_.htmlTemplate="<span class=\"mq-non-leaf\"><span class=\"mq-hat-prefix\">^</span><span class=\"mq-hat-stem\">&0</span></span>",_.textTemplate=["hat(",")"]}),NthRoot=LatexCmds.nthroot=P(SquareRoot,function(_,super_){_.htmlTemplate="<sup class=\"mq-nthroot mq-non-leaf\">&0</sup><span class=\"mq-scaled\"><span class=\"mq-sqrt-prefix mq-scaled\">&radic;</span><span class=\"mq-sqrt-stem mq-non-leaf\">&1</span></span>",_.textTemplate=["sqrt[","](",")"],_.latex=function(){return"\\sqrt["+this.ends[L].latex()+"]{"+this.ends[R].latex()+"}"}}),DiacriticAbove=P(MathCommand,function(_,super_){_.init=function(ctrlSeq,symbol,textTemplate){var htmlTemplate="<span class=\"mq-non-leaf\"><span class=\"mq-diacritic-above\">"+symbol+"</span><span class=\"mq-diacritic-stem\">&0</span></span>";super_.init.call(this,ctrlSeq,htmlTemplate,textTemplate)}});LatexCmds.vec=bind(DiacriticAbove,"\\vec","&rarr;",["vec(",")"]),LatexCmds.tilde=bind(DiacriticAbove,"\\tilde","~",["tilde(",")"]);var Bracket=P(P(MathCommand,DelimsMixin),function(_,super_){_.init=function(side,open,close,ctrlSeq,end){super_.init.call(this,"\\left"+ctrlSeq,void 0,[open,close]),this.side=side,this.sides={},this.sides[L]={ch:open,ctrlSeq:ctrlSeq},this.sides[R]={ch:close,ctrlSeq:end}},_.numBlocks=function(){return 1},_.html=function(){return this.htmlTemplate="<span class=\"mq-non-leaf\"><span class=\"mq-scaled mq-paren"+(this.side===R?" mq-ghost":"")+"\">"+this.sides[L].ch+"</span><span class=\"mq-non-leaf\">&0</span><span class=\"mq-scaled mq-paren"+(this.side===L?" mq-ghost":"")+"\">"+this.sides[R].ch+"</span></span>",super_.html.call(this)},_.latex=function(){return"\\left"+this.sides[L].ctrlSeq+this.ends[L].latex()+"\\right"+this.sides[R].ctrlSeq},_.matchBrack=function(opts,expectedSide,node){return node instanceof Bracket&&node.side&&node.side!==-expectedSide&&(!opts.restrictMismatchedBrackets||OPP_BRACKS[this.sides[this.side].ch]===node.sides[node.side].ch||{"(":"]","[":")"}[this.sides[L].ch]===node.sides[R].ch)&&node},_.closeOpposing=function(brack){brack.side=0,brack.sides[this.side]=this.sides[this.side],brack.delimjQs.eq(this.side===L?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},_.createLeftOf=function(cursor){if(!this.replacedFragment){var opts=cursor.options;if("|"===this.sides[L].ch)var brack=this.matchBrack(opts,R,cursor[R])||this.matchBrack(opts,L,cursor[L])||this.matchBrack(opts,0,cursor.parent.parent);else var brack=this.matchBrack(opts,-this.side,cursor[-this.side])||this.matchBrack(opts,-this.side,cursor.parent.parent)}if(brack){var side=this.side=-brack.side;this.closeOpposing(brack),brack===cursor.parent.parent&&cursor[side]&&Fragment(cursor[side],cursor.parent.ends[side],-side).disown().withDirAdopt(-side,brack.parent,brack,brack[side]).jQ.insDirOf(side,brack.jQ),brack.bubble("reflow")}else brack=this,side=brack.side,brack.replacedFragment?brack.side=0:cursor[-side]&&(brack.replaces(Fragment(cursor[-side],cursor.parent.ends[-side],side)),cursor[-side]=0),super_.createLeftOf.call(brack,cursor);side===L?cursor.insAtLeftEnd(brack.ends[L]):cursor.insRightOf(brack)},_.placeCursor=noop,_.unwrap=function(){this.ends[L].children().disown().adopt(this.parent,this,this[R]).jQ.insertAfter(this.jQ),this.remove()},_.deleteSide=function(side,outward,cursor){var parent=this.parent,sib=this[side],farEnd=parent.ends[side];if(side===this.side)return this.unwrap(),void(sib?cursor.insDirOf(-side,sib):cursor.insAtDirEnd(side,parent));var opts=cursor.options,wasSolid=!this.side;if(this.side=-side,this.matchBrack(opts,side,this.ends[L].ends[this.side])){this.closeOpposing(this.ends[L].ends[this.side]);var origEnd=this.ends[L].ends[side];this.unwrap(),origEnd.siblingCreated&&origEnd.siblingCreated(cursor.options,side),sib?cursor.insDirOf(-side,sib):cursor.insAtDirEnd(side,parent)}else{if(this.matchBrack(opts,side,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(outward&&wasSolid)return this.unwrap(),void(sib?cursor.insDirOf(-side,sib):cursor.insAtDirEnd(side,parent));this.sides[side]={ch:OPP_BRACKS[this.sides[this.side].ch],ctrlSeq:OPP_BRACKS[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(side===L?0:1).addClass("mq-ghost").html(this.sides[side].ch)}if(sib){var origEnd=this.ends[L].ends[side];Fragment(sib,farEnd,-side).disown().withDirAdopt(-side,this.ends[L],origEnd,0).jQ.insAtDirEnd(side,this.ends[L].jQ.removeClass("mq-empty")),origEnd.siblingCreated&&origEnd.siblingCreated(cursor.options,side),cursor.insDirOf(-side,sib)}else outward?cursor.insDirOf(side,this):cursor.insAtDirEnd(side,this.ends[L])}},_.deleteTowards=function(dir,cursor){this.deleteSide(-dir,!1,cursor)},_.finalizeTree=function(){this.ends[L].deleteOutOf=function(dir,cursor){this.parent.deleteSide(dir,!0,cursor)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===L?1:0).removeClass("mq-ghost"),this.side=0}},_.siblingCreated=function(opts,dir){dir===-this.side&&this.finalizeTree()}}),OPP_BRACKS={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "};bindCharBracketPair("("),bindCharBracketPair("["),bindCharBracketPair("{","\\{"),LatexCmds.langle=bind(Bracket,L,"&lang;","&rang;","\\langle ","\\rangle "),LatexCmds.rangle=bind(Bracket,R,"&lang;","&rang;","\\langle ","\\rangle "),CharCmds["|"]=bind(Bracket,L,"|","|","|","|"),LatexCmds.lVert=bind(Bracket,L,"&#8741;","&#8741;","\\lVert ","\\rVert "),LatexCmds.rVert=bind(Bracket,R,"&#8741;","&#8741;","\\lVert ","\\rVert "),LatexCmds.left=P(MathCommand,function(_){_.parser=function(){var regex=Parser.regex,string=Parser.string,succeed=Parser.succeed,optWhitespace=Parser.optWhitespace;return optWhitespace.then(regex(/^(?:[([|]|\\\{|\\langle(?![a-zA-Z])|\\lVert(?![a-zA-Z]))/)).then(function(ctrlSeq){var open="\\"===ctrlSeq.charAt(0)?ctrlSeq.slice(1):ctrlSeq;return"\\langle"==ctrlSeq&&(open="&lang;",ctrlSeq+=" "),"\\lVert"==ctrlSeq&&(open="&#8741;",ctrlSeq+=" "),latexMathParser.then(function(block){return string("\\right").skip(optWhitespace).then(regex(/^(?:[\])|]|\\\}|\\rangle(?![a-zA-Z])|\\rVert(?![a-zA-Z]))/)).map(function(end){var close="\\"===end.charAt(0)?end.slice(1):end;"\\rangle"==end&&(close="&rang;",end+=" "),"\\rVert"==end&&(close="&#8741;",end+=" ");var cmd=Bracket(0,open,close,ctrlSeq,end);return cmd.blocks=[block],block.adopt(cmd,0,0),cmd})})})}}),LatexCmds.right=P(MathCommand,function(_){_.parser=function(){return Parser.fail("unmatched \\right")}});var Binomial=LatexCmds.binom=LatexCmds.binomial=P(P(MathCommand,DelimsMixin),function(_,super_){_.ctrlSeq="\\binom",_.htmlTemplate="<span class=\"mq-non-leaf\"><span class=\"mq-paren mq-scaled\">(</span><span class=\"mq-non-leaf\"><span class=\"mq-array mq-non-leaf\"><span>&0</span><span>&1</span></span></span><span class=\"mq-paren mq-scaled\">)</span></span>",_.textTemplate=["choose(",",",")"]}),Choose=LatexCmds.choose=P(Binomial,function(_){_.createLeftOf=LiveFraction.prototype.createLeftOf});LatexCmds.editable=LatexCmds.MathQuillMathField=P(MathCommand,function(_,super_){_.ctrlSeq="\\MathQuillMathField",_.htmlTemplate="<span class=\"mq-editable-field\"><span class=\"mq-root-block\">&0</span></span>",_.parser=function(){var self=this,string=Parser.string,regex=Parser.regex,succeed=Parser.succeed;return string("[").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("]")).map(function(name){self.name=name}).or(succeed()).then(super_.parser.call(self))},_.finalizeTree=function(options){var ctrlr=Controller(this.ends[L],this.jQ,options);ctrlr.KIND_OF_MQ="MathField",ctrlr.editable=!0,ctrlr.createTextarea(),ctrlr.editablesTextareaEvents(),ctrlr.cursor.insAtRightEnd(ctrlr.root),RootBlockMixin(ctrlr.root)},_.registerInnerField=function(innerFields,MathField){innerFields.push(innerFields[this.name]=MathField(this.ends[L].controller))},_.latex=function(){return this.ends[L].latex()},_.text=function(){return this.ends[L].text()}});var Embed=LatexCmds.embed=P(_Symbol,function(_,super_){_.setOptions=function(options){function noop(){return""}return this.text=options.text||noop,this.htmlTemplate=options.htmlString||"",this.latex=options.latex||noop,this},_.parser=function(){var self=this,string=Parser.string,regex=Parser.regex,succeed=Parser.succeed;return string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then(function(name){return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map(function(data){return self.setOptions(EMBEDS[name](data))})})}}),Environments={};LatexCmds.begin=P(MathCommand,function(_,super_){_.parser=function(){var string=Parser.string,regex=Parser.regex;return string("{").then(regex(/^[a-z]+/i)).skip(string("}")).then(function(env){return(Environments[env]?Environments[env]().parser():Parser.fail("unknown environment type: "+env)).skip(string("\\end{"+env+"}"))})}});var Environment=P(MathCommand,function(_,super_){_.template=[["\\begin{","}"],["\\end{","}"]],_.wrappers=function(){return[_.template[0].join(this.environment),_.template[1].join(this.environment)]}}),Matrix=Environments.matrix=P(Environment,function(_,super_){var delimiters={column:"&",row:"\\\\"};_.parentheses={left:null,right:null},_.environment="matrix",_.reflow=function(){var blockjQ=this.jQ.children("table"),height=blockjQ.outerHeight()/+blockjQ.css("fontSize").slice(0,-2),parens=this.jQ.children(".mq-paren");parens.length&&scale(parens,min(1+.2*(height-1),1.2),1.05*height)},_.latex=function(){var latex="",row;return this.eachChild(function(cell){"undefined"!=typeof row&&(latex+=row===cell.row?delimiters.column:delimiters.row),row=cell.row,latex+=cell.latex()}),this.wrappers().join(latex)},_.html=function(){function parenHtml(paren){return paren?"<span class=\"mq-scaled mq-paren\">"+paren+"</span>":""}var cells=[],trs="",i=0,row;return this.eachChild(function(cell){row!==cell.row&&(row=cell.row,trs+="<tr>$tds</tr>",cells[row]=[]),cells[row].push("<td>&"+i++ +"</td>")}),this.htmlTemplate="<span class=\"mq-matrix mq-non-leaf\">"+parenHtml(this.parentheses.left)+"<table class=\"mq-non-leaf\">"+trs.replace(/\$tds/g,function(){return cells.shift().join("")})+"</table>"+parenHtml(this.parentheses.right)+"</span>",super_.html.call(this)},_.createBlocks=function(){this.blocks=[MatrixCell(0,this),MatrixCell(1,this)]},_.parser=function(){var self=this,optWhitespace=Parser.optWhitespace,string=Parser.string;return optWhitespace.then(string(delimiters.column).or(string(delimiters.row)).or(latexMathParser.block)).many().skip(optWhitespace).then(function(items){function addCell(){self.blocks.push(MatrixCell(row,self,blocks)),blocks=[]}var blocks=[],row=0;self.blocks=[];for(var i=0;i<items.length;i+=1)items[i]instanceof MathBlock?blocks.push(items[i]):(addCell(),items[i]===delimiters.row&&(row+=1));return addCell(),self.autocorrect(),Parser.succeed(self)})},_.finalizeTree=function(){var table=this.jQ.find("table");table.toggleClass("mq-rows-1",1===table.find("tr").length),this.relink()},_.getEntryPoint=function(dir,cursor,updown){return"up"===updown?dir===L?this.blocks[this.rowSize-1]:this.blocks[0]:dir===L?this.blocks[this.blocks.length-1]:this.blocks[this.blocks.length-this.rowSize]},_.atExitPoint=function(dir,cursor){var i=this.blocks.indexOf(cursor.parent);return dir===L?0==i%this.rowSize:0==(i+1)%this.rowSize},_.moveTowards=function(dir,cursor,updown){var entryPoint=updown&&this.getEntryPoint(dir,cursor,updown);cursor.insAtDirEnd(-dir,entryPoint||this.ends[-dir])},_.relink=function(){var blocks=this.blocks,rows=[],row,column,cell;this.rowSize=blocks.length;for(var i=0;i<blocks.length;i+=1)cell=blocks[i],row!==cell.row&&(1===cell.row&&(this.rowSize=column),row=cell.row,rows[row]=[],column=0),rows[row][column]=cell,cell[R]=blocks[i+1],cell[L]=blocks[i-1],rows[row-1]&&rows[row-1][column]&&(cell.upOutOf=rows[row-1][column],rows[row-1][column].downOutOf=cell),column+=1;this.ends[L]=blocks[0],this.ends[R]=blocks[blocks.length-1]},_.autocorrect=function(rows){var lengths=[],rows=[],blocks=this.blocks,maxLength,shortfall,position,row,i;for(i=0;i<blocks.length;i+=1)row=blocks[i].row,rows[row]=rows[row]||[],rows[row].push(blocks[i]),lengths[row]=rows[row].length;if(maxLength=Math.max.apply(null,lengths),maxLength!==Math.min.apply(null,lengths)){for(i=0;i<rows.length;i+=1)for(shortfall=maxLength-rows[i].length;shortfall;)position=maxLength*i+rows[i].length,blocks.splice(position,0,MatrixCell(i,this)),shortfall-=1;this.relink()}},_.deleteCell=function(currentCell){function isEmpty(cells){for(var empties=[],i=0;i<cells.length;i+=1)cells[i].isEmpty()&&empties.push(cells[i]);return empties.length===cells.length}function remove(cells){for(var i=0;i<cells.length;i+=1)-1<blocks.indexOf(cells[i])&&(cells[i].remove(),blocks.splice(blocks.indexOf(cells[i]),1))}var rows=[],columns=[],myRow=[],myColumn=[],blocks=this.blocks,row,column;this.eachChild(function(cell){row!==cell.row&&(row=cell.row,rows[row]=[],column=0),columns[column]=columns[column]||[],columns[column].push(cell),rows[row].push(cell),cell===currentCell&&(myRow=rows[row],myColumn=columns[column]),column+=1}),isEmpty(myRow)&&1<myColumn.length&&(row=rows.indexOf(myRow),this.eachChild(function(cell){cell.row>row&&(cell.row-=1)}),remove(myRow),this.jQ.find("tr").eq(row).remove()),isEmpty(myColumn)&&1<myRow.length&&remove(myColumn),this.finalizeTree()},_.backspace=function(cell,dir,cursor,finalDeleteCallback){var dirwards=cell[dir];if(cell.isEmpty()){for(this.deleteCell(cell);dirwards&&dirwards[dir]&&-1===this.blocks.indexOf(dirwards);)dirwards=dirwards[dir];dirwards&&cursor.insAtDirEnd(-dir,dirwards),1===this.blocks.length&&this.blocks[0].isEmpty()&&(finalDeleteCallback(),this.finalizeTree()),this.bubble("edited")}}});Environments.pmatrix=P(Matrix,function(_,super_){_.environment="pmatrix",_.parentheses={left:"(",right:")"}}),Environments.bmatrix=P(Matrix,function(_,super_){_.environment="bmatrix",_.parentheses={left:"[",right:"]"}}),Environments.Bmatrix=P(Matrix,function(_,super_){_.environment="Bmatrix",_.parentheses={left:"{",right:"}"}}),Environments.vmatrix=P(Matrix,function(_,super_){_.environment="vmatrix",_.parentheses={left:"|",right:"|"}}),Environments.Vmatrix=P(Matrix,function(_,super_){_.environment="Vmatrix",_.parentheses={left:"&#8214;",right:"&#8214;"}});var MatrixCell=P(MathBlock,function(_,super_){_.init=function(row,parent,replaces){if(super_.init.call(this),this.row=row,parent&&this.adopt(parent,parent.ends[R],0),replaces)for(var i=0;i<replaces.length;i++)replaces[i].children().adopt(this,this.ends[R],0)},_.deleteOutOf=function(dir,cursor){var self=this,args=arguments;this.parent.backspace(this,dir,cursor,function(){return super_.deleteOutOf.apply(self,args)})},_.moveOutOf=function(dir,cursor,updown){var atExitPoint=updown&&this.parent.atExitPoint(dir,cursor);!atExitPoint&&this[dir]?cursor.insAtDirEnd(-dir,this[dir]):cursor.insDirOf(dir,this.parent)}}),MQ1=getInterface(1);for(var key in MQ1)(function(key,val){"function"==typeof val?(MathQuill[key]=function(){return insistOnInterVer(),val.apply(this,arguments)},MathQuill[key].prototype=val.prototype):MathQuill[key]=val})(key,MQ1[key]);return MathQuill}),define("mathEntryInteraction/runtime/helper/mathInPrompt",["mathEntryInteraction/runtime/mathml-to-latex/mathml-to-latex","mathEntryInteraction/runtime/mathquill/mathquill"],function(Mathml2latex,MathQuill){"use strict";function getLaTeX(element){var annotation=element.querySelector("annotation");return annotation?annotation.innerHTML:Mathml2latex.convert(element.outerHTML)}var MQ=MathQuill.getInterface(2),mathInPrompt={postRender:function postRender($element){$element.find("math").each(function(){var math=document.createElement("span");math.innerHTML=getLaTeX(this),this.replaceWith(math),MQ.StaticMath(math)})}};return mathInPrompt}),define("mathEntryInteraction/creator/widget/states/Question",["jquery","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/editor/simpleContentEditableElement","taoQtiItem/qtiCreator/editor/containerEditor","tpl!mathEntryInteraction/creator/tpl/propertiesForm","tpl!mathEntryInteraction/creator/tpl/addGapBtn","mathEntryInteraction/runtime/helper/mathInPrompt"],function($,__,stateFactory,Question,formElement,simpleEditor,containerEditor,formTpl,addGapBtnTpl,mathInPrompt){"use strict";function toBoolean(value,defaultValue){return"undefined"==typeof value?defaultValue:!0===value||"true"===value}function configChangeCallBack(interaction,value,name){interaction.prop(name,value),interaction.triggerPci("configChange",[interaction.getProperties()])}var $addGapBtn=$(addGapBtnTpl()),MathEntryInteractionStateQuestion=stateFactory.extend(Question,function create(){var $container=this.widget.$container,$prompt=$container.find(".prompt"),interaction=this.widget.element;containerEditor.create($prompt,{change:function change(text){interaction.data("prompt",text),interaction.updateMarkup(),$prompt.is("[data-html-editable-container=\"true\"]")||mathInPrompt.postRender($prompt)},markup:interaction.markup,markupSelector:".prompt",related:interaction,areaBroker:this.widget.getAreaBroker()}),toBoolean(interaction.prop("useGapExpression"),!1)&&this.createAddGapBtn(),this.addMathFieldListener()},function exit(){var $container=this.widget.$container,$prompt=$container.find(".prompt");simpleEditor.destroy($container),containerEditor.destroy($prompt),this.removeAddGapBtn()});return MathEntryInteractionStateQuestion.prototype.initForm=function initForm(){var self=this,_widget=this.widget,$form=_widget.$form,interaction=_widget.element,response=interaction.getResponseDeclaration(),$gapStyleBox,$gapStyleSelector;$form.html(formTpl({serial:response.serial,identifier:interaction.attr("responseIdentifier"),authorizeWhiteSpace:toBoolean(interaction.prop("authorizeWhiteSpace"),!1),useGapExpression:toBoolean(interaction.prop("useGapExpression"),!1),focusOnDenominator:toBoolean(interaction.prop("focusOnDenominator"),!1),tool_frac:toBoolean(interaction.prop("tool_frac"),!0),tool_sqrt:toBoolean(interaction.prop("tool_sqrt"),!0),tool_exp:toBoolean(interaction.prop("tool_exp"),!0),tool_log:toBoolean(interaction.prop("tool_log"),!0),tool_ln:toBoolean(interaction.prop("tool_ln"),!0),tool_limit:toBoolean(interaction.prop("tool_limit"),!0),tool_sum:toBoolean(interaction.prop("tool_sum"),!0),tool_nthroot:toBoolean(interaction.prop("tool_nthroot"),!0),tool_e:toBoolean(interaction.prop("tool_e"),!0),tool_infinity:toBoolean(interaction.prop("tool_infinity"),!0),squarebkts:toBoolean(interaction.prop("tool_rbrack"),!0)&&toBoolean(interaction.prop("tool_lbrack"),!0),tool_pi:toBoolean(interaction.prop("tool_pi"),!0),tool_cos:toBoolean(interaction.prop("tool_cos"),!0),tool_sin:toBoolean(interaction.prop("tool_sin"),!0),tool_tan:toBoolean(interaction.prop("tan"),!0),tool_lte:toBoolean(interaction.prop("tool_lte"),!0),tool_gte:toBoolean(interaction.prop("tool_gte"),!0),tool_times:toBoolean(interaction.prop("tool_times"),!0),tool_divide:toBoolean(interaction.prop("tool_divide"),!0),tool_plusminus:toBoolean(interaction.prop("tool_plusminus"),!0),roundbkts:toBoolean(interaction.prop("tool_rparen"),!0)&&toBoolean(interaction.prop("tool_lparen"),!0),curlybkts:toBoolean(interaction.prop("tool_rbrace"),!0)&&toBoolean(interaction.prop("tool_lbrace"),!0),tool_angle:toBoolean(interaction.prop("tool_angle"),!0),tool_minus:toBoolean(interaction.prop("tool_minus"),!0),tool_plus:toBoolean(interaction.prop("tool_plus"),!0),tool_equal:toBoolean(interaction.prop("tool_equal"),!0),tool_lower:toBoolean(interaction.prop("tool_lower"),!0),tool_greater:toBoolean(interaction.prop("tool_greater"),!0),tool_subscript:toBoolean(interaction.prop("tool_subscript"),!0),tool_integral:toBoolean(interaction.prop("tool_integral"),!0),tool_timesdot:toBoolean(interaction.prop("tool_timesdot"),!0),tool_triangle:toBoolean(interaction.prop("tool_triangle"),!0),tool_similar:toBoolean(interaction.prop("tool_similar"),!0),tool_paral:toBoolean(interaction.prop("tool_paral"),!0),tool_perp:toBoolean(interaction.prop("tool_perp"),!0),tool_inmem:toBoolean(interaction.prop("tool_inmem"),!0),tool_ninmem:toBoolean(interaction.prop("tool_ninmem"),!0),tool_union:toBoolean(interaction.prop("tool_union"),!0),tool_intersec:toBoolean(interaction.prop("tool_intersec"),!0),tool_colon:toBoolean(interaction.prop("tool_colon"),!0),tool_to:toBoolean(interaction.prop("tool_to"),!0),tool_congruent:toBoolean(interaction.prop("tool_congruent"),!0),tool_subset:toBoolean(interaction.prop("tool_subset"),!0),tool_superset:toBoolean(interaction.prop("tool_superset"),!0),tool_contains:toBoolean(interaction.prop("tool_contains"),!0),tool_matrix_2row:toBoolean(interaction.prop("tool_matrix_2row"),!0),tool_matrix_2row_2col:toBoolean(interaction.prop("tool_matrix_2row_2col"),!0),allowNewLine:toBoolean(interaction.prop("allowNewLine"),!1),enableAutoWrap:toBoolean(interaction.prop("enableAutoWrap"),!1)})),formElement.initWidget($form),formElement.setChangeCallbacks($form,interaction,{identifier:function identifier(i,value){response.id(value),interaction.attr("responseIdentifier",value)},useGapExpression:function gapChangeCallback(i,value){toBoolean(value,!1)?(self.createAddGapBtn(),$gapStyleBox.show()):(i.prop("gapExpression",""),self.removeAddGapBtn(),$gapStyleBox.hide()),response.attr("cardinality","single"),configChangeCallBack(i,value,"useGapExpression")},gapStyle:function gapStyleChangeCallback(i,newStyle){i.prop("gapStyle",newStyle),configChangeCallBack(i,newStyle,"gapStyle")},authorizeWhiteSpace:configChangeCallBack,focusOnDenominator:configChangeCallBack,tool_frac:configChangeCallBack,tool_sqrt:configChangeCallBack,tool_exp:configChangeCallBack,tool_log:configChangeCallBack,tool_ln:configChangeCallBack,tool_limit:configChangeCallBack,tool_sum:configChangeCallBack,tool_nthroot:configChangeCallBack,tool_e:configChangeCallBack,tool_infinity:configChangeCallBack,tool_pi:configChangeCallBack,tool_cos:configChangeCallBack,tool_sin:configChangeCallBack,tool_tan:configChangeCallBack,tool_lte:configChangeCallBack,tool_gte:configChangeCallBack,tool_times:configChangeCallBack,tool_divide:configChangeCallBack,tool_plusminus:configChangeCallBack,tool_angle:configChangeCallBack,tool_minus:configChangeCallBack,tool_plus:configChangeCallBack,tool_equal:configChangeCallBack,tool_lower:configChangeCallBack,tool_greater:configChangeCallBack,tool_subscript:configChangeCallBack,tool_integral:configChangeCallBack,tool_timesdot:configChangeCallBack,tool_triangle:configChangeCallBack,tool_similar:configChangeCallBack,tool_paral:configChangeCallBack,tool_perp:configChangeCallBack,tool_inmem:configChangeCallBack,tool_ninmem:configChangeCallBack,tool_union:configChangeCallBack,tool_intersec:configChangeCallBack,tool_colon:configChangeCallBack,tool_to:configChangeCallBack,tool_congruent:configChangeCallBack,tool_subset:configChangeCallBack,tool_superset:configChangeCallBack,tool_contains:configChangeCallBack,tool_matrix_2row:configChangeCallBack,tool_matrix_2row_2col:configChangeCallBack,squarebkts:function squarebktsChangeCallBack(i,value){i.prop("tool_lbrack",value),i.prop("tool_rbrack",value),i.triggerPci("configChange",[i.getProperties()])},roundbkts:function roundbktsChangeCallBack(i,value){i.prop("tool_lparen",value),i.prop("tool_rparen",value),i.triggerPci("configChange",[i.getProperties()])},curlybkts:function curlybktsChangeCallBack(i,value){i.prop("tool_lbrace",value),i.prop("tool_rbrace",value),i.triggerPci("configChange",[i.getProperties()])},allowNewLine:configChangeCallBack,enableAutoWrap:configChangeCallBack}),$gapStyleBox=$form.find(".mathgap-style-box"),$gapStyleSelector=$gapStyleBox.find("[data-mathgap-style]"),$gapStyleSelector.select2({width:"100%",minimumResultsForSearch:1/0}).val(interaction.prop("gapStyle")).trigger("change")},MathEntryInteractionStateQuestion.prototype.addMathFieldListener=function addMathFieldListener(){var _widget=this.widget,interaction=_widget.element;interaction.onPci("responseChange",function(latex){toBoolean(interaction.prop("useGapExpression"),!1)?interaction.prop("gapExpression",latex):interaction.prop("gapExpression","")})},MathEntryInteractionStateQuestion.prototype.createAddGapBtn=function createAddGapBtn(){var _widget=this.widget,$container=_widget.$container,$toolbar=$container.find(".toolbar"),interaction=_widget.element;$toolbar.length&&($toolbar.after($addGapBtn),$addGapBtn.on("click",function(){interaction.getResponseDeclaration().removeMapEntries(),interaction.triggerPci("addGap")}))},MathEntryInteractionStateQuestion.prototype.removeAddGapBtn=function removeAddGapBtn(){$addGapBtn.off("click"),$addGapBtn.remove()},MathEntryInteractionStateQuestion}),define("mathEntryInteraction/creator/widget/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct"],function(stateFactory,Correct){"use strict";var InteractionStateCorrect=stateFactory.create(Correct,function init(){this.widget.element.getResponseDeclaration().setTemplate("MAP_RESPONSE"),this.widget.changeState("map")},function exit(){});return InteractionStateCorrect}),define("tpl!mathEntryInteraction/creator/tpl/responseForm",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){return" hidden"}function program3(depth0,data){return" disabled=\"true\" "}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function",self=this,stack1,helper,options;return buffer+="<div class=\"panel\">\n    <label for=\"\" class=\"has-icon\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Response identifier",options):helperMissing.call(depth0,"__","Response identifier",options)))+"</label>\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content:first\" data-tooltip-theme=\"info\"></span>\n    <div class=\"tooltip-content\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The identifier of the choice. This identifier must not be used by any other\n        response or item variable. An identifier is a string of characters that must start with a Letter or an\n        underscore (\"_\") and contain only Letters, underscores, hyphens (\"-\"), period (\".\", a.k.a. full-stop), Digits,\n        CombiningChars and Extenders.",options):helperMissing.call(depth0,"__","The identifier of the choice. This identifier must not be used by any other\n        response or item variable. An identifier is a string of characters that must start with a Letter or an\n        underscore (\"_\") and contain only Letters, underscores, hyphens (\"-\"), period (\".\", a.k.a. full-stop), Digits,\n        CombiningChars and Extenders.",options)))+"</div>\n\n    <input type=\"text\" name=\"identifier\" value=\"",(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" placeholder=\"e.g. RESPONSE\"\n        data-validate=\"$notEmpty; $qtiResponseIdentifier(serial=",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"); $availableIdentifier(serial=",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+");\">\n</div>\n\n<hr />\n\n<div class=\"response-mapping-attributes",stack1=helpers["if"].call(depth0,depth0&&depth0.mappingDisabled,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n    <div class=\"panel min-max-panel\" data-editx=\"map\">\n        <h3>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Score range",options):helperMissing.call(depth0,"__","Score range",options)))+"</h3>\n    </div>\n\n    <div class=\"panel\" data-editx=\"map\">\n        <label for=\"defaultValue\" class=\"spinner\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Mapping default",options):helperMissing.call(depth0,"__","Mapping default",options)))+"</label>\n        <input name=\"defaultValue\" value=\"",(helper=helpers.defaultValue)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.defaultValue,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.mappingDisabled,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            class=\"score\" type=\"text\" data-validate=\"$notEmpty; $numeric;\"\n            data-validate-option=\"$lazy; $event(type=keyup)\" />\n        <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content:first\" data-tooltip-theme=\"info\"></span>\n        <span class=\"tooltip-content\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The default value from the target set to be used when no explicit mapping\n            for a source value is given.",options):helperMissing.call(depth0,"__","The default value from the target set to be used when no explicit mapping\n            for a source value is given.",options)))+"</span>\n    </div>\n</div>\n<div class=\"response-mapping-info",stack1=helpers.unless.call(depth0,depth0&&depth0.mappingDisabled,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n    <p class=\"feedback-info\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The mapping options are available when at least one map entry is defined.",options):helperMissing.call(depth0,"__","The mapping options are available when at least one map entry is defined.",options)))+"</p>\n</div>",buffer})}),define("tpl!mathEntryInteraction/creator/tpl/scoreForm",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function",stack1,helper,options;return buffer+="<div class=\"math-entry-response-wrap\">\n    <div class=\"math-entry-correct-wrap\">\n        <span class=\"math-entry-response-title math-entry-response-correct\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Correct",options):helperMissing.call(depth0,"__","Correct",options)))+"</span>\n    </div>\n    <div class=\"math-entry-score-wrap math-entry-response-correct\">\n        <span class=\"math-entry-score-title math-entry-response-correct\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Score",options):helperMissing.call(depth0,"__","Score",options)))+"</span>\n        <input value type=\"text\" name=\"mathEntryScoreInput\"\n            class=\"math-entry-score-input math-entry-response-correct\" data-validate=\"$numeric\"\n            data-validate-option=\"$allowEmpty; $event(type=keyup)\" placeholder=\"",(helper=helpers.placeholder)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.placeholder,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n    </div>\n</div>",buffer})}),define("tpl!mathEntryInteraction/creator/tpl/addAlternativeBtn",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,helper,options;return buffer+="<button class=\"math-entry-response-correct btn-info\">\n    <i class=\"adder\"> </i> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Add alternative",options):helperMissing.call(depth0,"__","Add alternative",options)))+"\n</button>",buffer})}),define("tpl!mathEntryInteraction/creator/tpl/alternativeForm",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function",stack1,helper,options;return buffer+="<div class=\"math-entry-response-wrap\">\n    <div class=\"math-entry-alternative-wrap\">\n        <span class=\"math-entry-response-title math-entry-response-alternative\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Alternative",options):helperMissing.call(depth0,"__","Alternative",options)))+"\n            <a href=\"#\" class=\"answer-delete\">\n                <span class=\"icon-bin tooltipstered\" data-tooltip=\"~ .tooltip-content:first\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"delete the answer",options):helperMissing.call(depth0,"__","delete the answer",options)))+"</div>\n            </a>\n        </span>\n        <span class=\"math-entry-input mq-math-mode mq-editable-field math-entry-alternative-input\" data-index=\"",(helper=helpers.index)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.index,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n    </div>\n    <div class=\"math-entry-score-wrap math-entry-response-alternative\">\n        <span class=\"math-entry-score-title math-entry-response-alternative\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Score",options):helperMissing.call(depth0,"__","Score",options)))+"</span>\n        <input value=\"",(helper=helpers.score)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.score,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" type=\"text\" data-for=\"",(helper=helpers.index)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.index,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" name=\"mathEntryScoreInput\" class=\"math-entry-score-input math-entry-response-alternative\" data-validate=\"$numeric\" data-validate-option=\"$allowEmpty; $event(type=keyup)\" placeholder=\"",(helper=helpers.placeholder)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.placeholder,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n    </div>\n</div>",buffer})}),define("mathEntryInteraction/creator/widget/states/Map",["handlebars","i18n","lodash","jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","tpl!mathEntryInteraction/creator/tpl/responseForm","tpl!mathEntryInteraction/creator/tpl/scoreForm","tpl!mathEntryInteraction/creator/tpl/addAlternativeBtn","tpl!mathEntryInteraction/creator/tpl/alternativeForm","taoQtiItem/qtiCreator/widgets/component/minMax/minMax","taoQtiItem/qtiCreator/widgets/helpers/formElement","ui/tooltip"],function(hb,__,_,$,stateFactory,MapState,responseFormTpl,scoreTpl,addAlternativeBtn,alternativeFormTpl,minMaxComponentFactory,formElement,tooltip){"use strict";hb.registerHelper("increaseIndex",function(value){return parseInt(value)+1});var uidCounter=0,MathEntryInteractionStateResponse=stateFactory.create(MapState,function init(){this.initGlobalVariables(),this.initForm()},function exit(){this.emptyGapFields(),this.toggleResponseMode(!1),this.saveAnswers(),this.removeResponseChangeEventListener(),this.removeDeleteListeners(),this.removeAddButtonListener(),this.destroyForm()});return MathEntryInteractionStateResponse.prototype.initGlobalVariables=function initGlobalVariables(){var interaction=this.widget.element;this.activeEditId=null;var pci=this.widget.element.data("pci"),responsesManager=pci.getResponsesManager();this.correctResponses=responsesManager;var _this$correctResponse=this.correctResponses.keys(),_this$correctResponse2=_slicedToArray(_this$correctResponse,1),inputIndex=_this$correctResponse2[0],inputValue=this.correctResponses.get(inputIndex);inputIndex.length&&(uidCounter=inputIndex.split("-")[1],uidCounter++),this.correctResponses.clear(),$(".math-entry-alternative-wrap").parent("div").remove(),this.correctResponses.set(inputIndex,inputValue),!0===this.inGapMode()&&(interaction=this.widget.element,this.gapTemplate=interaction.prop("gapExpression"))},MathEntryInteractionStateResponse.prototype.checkValues=function(index){var inputValue={};return this.correctResponses.has(index)&&Object.keys(this.correctResponses.get(index)).includes("input")&&(inputValue={input:this.correctResponses.get(index).input}),inputValue},MathEntryInteractionStateResponse.prototype.uid=function uid(){return"answer-".concat(uidCounter++)},MathEntryInteractionStateResponse.prototype.initForm=function initForm(){var interaction=this.widget.element,$responseForm=this.widget.$responseForm,response=interaction.getResponseDeclaration(),mapEntries=response.getMapEntries(),mappingDisabled=_.isEmpty(mapEntries);this.initResponseChangeEventListener(),$responseForm.html(responseFormTpl({identifier:interaction.attr("responseIdentifier"),serial:response.serial,min:interaction.prop("min"),max:interaction.prop("max"),mappingDisabled:mappingDisabled,defaultValue:response.getMappingAttribute("defaultValue")})),minMaxComponentFactory($responseForm.find(".response-mapping-attributes > .min-max-panel"),{min:{fieldName:"lowerBound",value:_.parseInt(response.getMappingAttribute("lowerBound"))||0,helpMessage:__("Minimal score for this interaction.")},max:{fieldName:"upperBound",value:_.parseInt(response.getMappingAttribute("upperBound"))||0,helpMessage:__("Maximal score for this interaction.")},upperThreshold:Number.MAX_SAFE_INTEGER,syncValues:!0}),this.createScoreResponse(),this.initResponseForm(),this.initEditingOptions(),this.initAlternativeInput(),tooltip.lookup($responseForm)},MathEntryInteractionStateResponse.prototype.initResponseForm=function initResponseForm(){var _this2=this,interaction=this.widget.element,$input=this.widget.$container.find(".math-entry-input"),$score=this.widget.$container.find(".math-entry-response-wrap .math-entry-score-input"),id=this.correctResponses.getIndex(),newCorrectAnswer;$score[0].dataset.for=id,$input[0].dataset.index=id;var existingReponses=this.getExistingCorrectAnswerOptions(),response=interaction.getResponseDeclaration(),correctResponse=response.getCorrect();if(!!correctResponse){var correctResponseIndex=existingReponses.indexOf(correctResponse[0]);-1!==correctResponseIndex&&(existingReponses.splice(correctResponseIndex,1),existingReponses.unshift(correctResponse[0]))}if(existingReponses.length){var mapEntries=response.getMapEntries();existingReponses.forEach(function(entry,index){var newId=id;0<index&&(newId=_this2.uid());var inputValue=_this2.checkValues(newId);_this2.correctResponses.set(newId,Object.assign(inputValue,{response:entry})),mapEntries[entry]&&1>index&&($score[0].value=mapEntries[entry]||response.getMappingAttribute("defaultValue"))})}else{if(!0===this.inGapMode()){this.emptyGapFields();var gapExpression=interaction.prop("gapExpression"),gapCount=(gapExpression.match(/\\taoGap/g)||[]).length;if(0<gapCount){newCorrectAnswer=[];for(var i=0;i<gapCount;i++)newCorrectAnswer.push(" ");newCorrectAnswer=newCorrectAnswer.join(",")}else newCorrectAnswer=""}else newCorrectAnswer="",this.toggleResponseMode(!1);var inputValue=this.checkValues(id);this.correctResponses.set(id,Object.assign(inputValue,{response:newCorrectAnswer}))}this.activeEditId=id},MathEntryInteractionStateResponse.prototype.createScoreResponse=function createScoreResponse(){var _this3=this,$addAlternativeBtn=$(addAlternativeBtn()),$container=this.widget.$container;if(0<$container.find(".math-entry-response-wrap").length)return!1;var interaction=this.widget.element,response=interaction.getResponseDeclaration(),$input=$container.find(".math-entry-input"),parent=$input[0].parentNode;$(parent).prepend(scoreTpl({placeholder:response.getMappingAttribute("defaultValue")}));var $correct=$container.find(".math-entry-correct-wrap");$input.detach().appendTo($correct),$(parent).append($addAlternativeBtn);var $score=$container.find(".math-entry-response-wrap .math-entry-score-input");$score.on("click",function(e){e.stopPropagation(),e.preventDefault()}),this.widget.on("mappingAttributeChange",function(data){"defaultValue"===data.key&&$score.attr("placeholder",data.value)}),formElement.initWidget($container),formElement.setChangeCallbacks($container,response,{mathEntryScoreInput:function mathEntryScoreInput(rsp,value){var key=$(_this3.widget).data("for");""===value?rsp.removeMapEntry(key):rsp.setMapEntry(key,value,!0)}})},MathEntryInteractionStateResponse.prototype.getExistingCorrectAnswerOptions=function getExistingCorrectAnswerOptions(){var interaction=this.widget.element,mapEntries=interaction.getResponseDeclaration().getMapEntries();return _.keys(mapEntries)||[]},MathEntryInteractionStateResponse.prototype.initResponseChangeEventListener=function initResponseChangeEventListener(){var _this4=this,interaction=this.widget.element;interaction.onPci("responseChange",function(latex,index){if(interaction.prop("inResponseState")){var editIdIndex=null;if(index&&0<index.length?editIdIndex=index:!!_this4.activeEditId&&(editIdIndex=_this4.activeEditId),_this4.correctResponses.currentIndex(editIdIndex),!1===_this4.inGapMode(_this4)&&null!==editIdIndex){var inputValue=_this4.checkValues(editIdIndex);_this4.correctResponses.set(editIdIndex,Object.assign(inputValue,{response:latex}))}else if(!0===_this4.inGapMode(_this4)&&null!==editIdIndex){var response=interaction.getResponse(editIdIndex);if(null!==response&&(0<response.base.string.length||!!editIdIndex)){var _inputValue=_this4.checkValues(editIdIndex);_this4.correctResponses.set(editIdIndex,Object.assign(_inputValue,{response:response.base.string}))}}}})},MathEntryInteractionStateResponse.prototype.removeResponseChangeEventListener=function removeResponseChangeEventListener(){var interaction=this.widget.element;interaction.offPci("responseChange")},MathEntryInteractionStateResponse.prototype.initEditingOptions=function initEditingOptions(){var _this5=this;this.toggleResponseMode(!0);var interaction=this.widget.element,responseDeclaration=interaction.getResponseDeclaration(),mapEntries=responseDeclaration.getMapEntries(),_this$correctResponse3=this.correctResponses.keys(),_this$correctResponse4=_slicedToArray(_this$correctResponse3,1),correctIndex=_this$correctResponse4[0];0<this.correctResponses.size&&this.correctResponses.forEach(function(value,index){if(_this5.activeEditId=index,_this5.correctResponses.currentIndex(index),!0===_this5.inGapMode()){if(!Object.keys(value).includes("input")&&index!==correctIndex)_this5.addAlternativeInput(index);else{var response=_this5.getGapResponseObject(value.response||"");interaction.triggerPci("latexGapInput",[response,index])}}else if(!Object.keys(value).includes("input")&&index!==correctIndex)_this5.addAlternativeInput(index);else{interaction.triggerPci("latexInput",[value.response||"",index]);var scoreInput=_this5.widget.$container.find(".math-entry-score-input.math-entry-response-correct");0<scoreInput.length&&1>index&&(scoreInput[0].value=mapEntries&&mapEntries[value.response||""]||responseDeclaration.getMappingAttribute("defaultValue")||0)}}),this.activeEditId=null},MathEntryInteractionStateResponse.prototype.getGapResponseObject=function getGapResponseObject(response){return{base:{string:response.split(",")}}},MathEntryInteractionStateResponse.prototype.clearMapEntries=function clearMapEntries(){var interaction=this.widget.element,response=interaction.getResponseDeclaration(),mapEntries=response.getMapEntries();_.keys(mapEntries).forEach(function(mapKey){response.removeMapEntry(mapKey,!0)})},MathEntryInteractionStateResponse.prototype.initDeletingOptions=function initDeletingOptions(){var _this6=this,interaction=this.widget.element;interaction.onPci("deleteInput",function(inputId){_this6.correctResponses.has(inputId)&&(!0===_this6.inGapMode()&&_this6.emptyGapFields(),_this6.activeEditId=null,_this6.correctResponses.delete(inputId))})},MathEntryInteractionStateResponse.prototype.removeDeleteListeners=function removeDeleteListeners(){var $deleteButtons=this.widget.$container.find(".entry-config");$deleteButtons.find(".answer-delete").off("click")},MathEntryInteractionStateResponse.prototype.removeAddButtonListener=function removeAddButtonListener(){this.widget.$container.find(".math-entry-response-correct.btn-info").off("click")},MathEntryInteractionStateResponse.prototype.destroyForm=function destroyForm(){var $responseForm=this.widget.$responseForm;$responseForm.find(".mathEntryInteraction").remove()},MathEntryInteractionStateResponse.prototype.saveAnswers=function saveAnswers(){var _this7=this,interaction=this.widget.element,responseDeclaration=interaction.getResponseDeclaration();this.clearMapEntries();var gapResponses=new Map;!0===this.inGapMode()&&this.correctResponses.forEach(function(value,index){var response=" ";value.response&&-1===value.response.split(",").indexOf("")&&(response=value.response),gapResponses.set(index,response)});var score=new Map;if(this.correctResponses.size){var scoreInput=this.widget.$container.find(".math-entry-score-input");$(scoreInput).each(function(input){score.set(scoreInput[input].dataset.for,scoreInput[input].value)})}this.correctResponses.forEach(function(response,index){var scoreValue=score.get(index)||responseDeclaration.getMappingAttribute("defaultValue");responseDeclaration.setMapEntry(response.response||" ",scoreValue,!1);var _this7$correctRespons=_this7.correctResponses.keys(),_this7$correctRespons2=_slicedToArray(_this7$correctRespons,1),correctIndex=_this7$correctRespons2[0];responseDeclaration.setCorrect(_this7.correctResponses.get(correctIndex).response||" ")})},MathEntryInteractionStateResponse.prototype.emptyGapFields=function emptyGapFields(){var interaction=this.widget.element;!0===this.inGapMode()&&(this.activeEditId=null,interaction.prop("gapExpression",this.gapTemplate))},MathEntryInteractionStateResponse.prototype.toggleResponseMode=function toggleResponseMode(value){var interaction=this.widget.element;interaction.prop("inResponseState")!==value&&(interaction.prop("inResponseState",value),interaction.triggerPci("configChange",[interaction.getProperties()]))},MathEntryInteractionStateResponse.prototype.inGapMode=function inGapMode(){var interaction=this.widget.element,useGapExpression=interaction.prop("useGapExpression");return useGapExpression&&"false"!==useGapExpression||!1},MathEntryInteractionStateResponse.prototype.initAlternativeInput=function initAlternativeInput(){var _this8=this;this.widget.$container.find(".math-entry-response-correct.btn-info").on("click",function(){_this8.addAlternativeInput(null)})},MathEntryInteractionStateResponse.prototype.addAlternativeInput=function addAlternativeInput(responseId){var interaction=this.widget.element,$container=this.widget.$container,response=interaction.getResponseDeclaration(),mapEntries=response.getMapEntries(),_this$correctResponse5=this.correctResponses.keys(),_this$correctResponse6=_slicedToArray(_this$correctResponse5,1),correctIndex=_this$correctResponse6[0],responseValue="",id=responseId||this.uid(),gapValues="",scoreValue="";if(!0===this.inGapMode()){if(this.correctResponses.has(responseId))gapValues={base:{string:this.correctResponses.get(responseId).response}};else{var gapExpression=this.gapTemplate,gapCount=(gapExpression.match(/\\taoGap/g)||[]).length;if(0<gapCount){gapValues=[];for(var i=0;i<gapCount;i++)gapValues.push(" ");gapValues={base:{string:gapValues.join(",")}}}else gapValues={base:{string:gapValues}}}responseValue=this.gapTemplate,this.correctResponses.set(id,{response:gapValues}),scoreValue=!!responseId&&0<Object.keys(mapEntries).length&&mapEntries[this.correctResponses.get(responseId).response.base.string]||""}else{var value=this.correctResponses.has(responseId)&&this.correctResponses.get(responseId).response;value||(value=this.correctResponses.get(correctIndex).response),responseValue=value||"",this.correctResponses.set(id,{response:responseValue}),scoreValue=!!responseId&&0<Object.keys(mapEntries).length&&mapEntries[this.correctResponses.get(responseId).response]||""}$container.find("button.math-entry-response-correct",$container).before(alternativeFormTpl({index:id,placeholder:response.getMappingAttribute("defaultValue"),score:scoreValue})),tooltip.lookup($(".answer-delete",$container));var $scores=$container.find(".math-entry-score-input");$scores.on("click",function(e){e.stopPropagation(),e.preventDefault()}),this.widget.on("mappingAttributeChange",function(data){"defaultValue"===data.key&&$scores.attr("placeholder",data.value)}),interaction.triggerPci("addAlternative",[responseValue,gapValues,id]),this.initDeletingOptions()},MathEntryInteractionStateResponse}),define("mathEntryInteraction/creator/widget/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states","mathEntryInteraction/creator/widget/states/Question","mathEntryInteraction/creator/widget/states/Correct","mathEntryInteraction/creator/widget/states/Map"],function(factory,states){"use strict";return factory.createBundle(states,arguments)}),define("mathEntryInteraction/creator/widget/Widget",["taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget","mathEntryInteraction/creator/widget/states/states"],function(Widget,states){"use strict";var MathEntryInteractionWidget=Widget.clone();return MathEntryInteractionWidget.initCreator=function initCreator(){var $interaction;this.registerStates(states),Widget.initCreator.call(this),$interaction=this.$container.find(".mathEntryInteraction"),$interaction.length&&$interaction.addClass("tao-qti-creator-context")},MathEntryInteractionWidget}),define("tpl!mathEntryInteraction/creator/tpl/markup",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",functionType="function",stack1,helper;return buffer+="<div class=\"mathEntryInteraction\">\n    <div class=\"prompt\">",(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n    <div class=\"math-entry\">\n        <div class=\"toolbar\"></div>\n        <div>\n            <span class=\"math-entry-input\"></span>\n        </div>\n    </div>\n</div>",buffer})}),define("mathEntryInteraction/imsPciCreator",["lodash","mathEntryInteraction/creator/widget/Widget","tpl!mathEntryInteraction/creator/tpl/markup"],function(_,Widget,markupTpl){"use strict";var _typeIdentifier="mathEntryInteraction",mathEntryInteractionCreator={getTypeIdentifier:function getTypeIdentifier(){return"mathEntryInteraction"},getWidget:function getWidget(){return Widget},getDefaultProperties:function getDefaultProperties(){return{authorizeWhiteSpace:"false",useGapExpression:"false",inResponseState:"false",gapExpression:"",gapStyle:"",focusOnDenominator:!1,tool_frac:"true",tool_sqrt:"true",tool_exp:"true",tool_log:"true",tool_ln:"true",tool_limit:"true",tool_sum:"true",tool_nthroot:"true",tool_matrix_2row:"true",tool_matrix_2row_2col:"true",tool_e:"true",tool_infinity:"true",tool_lbrack:"true",tool_rbrack:"true",tool_pi:"true",tool_cos:"true",tool_sin:"true",tool_tan:"true",tool_lte:"true",tool_gte:"true",tool_times:"true",tool_divide:"true",tool_plusminus:"true",tool_angle:"true",tool_minus:"true",tool_plus:"true",tool_equal:"true",tool_lower:"true",tool_greater:"true",tool_subscript:"true",tool_lbrace:"true",tool_rbrace:"true",tool_lparen:"true",tool_rparen:"true",tool_integral:"true",tool_timesdot:"true",tool_triangle:"true",tool_similar:"true",tool_paral:"true",tool_perp:"true",tool_inmem:"true",tool_ninmem:"true",tool_union:"true",tool_intersec:"true",tool_colon:"true",tool_to:"true",tool_congruent:"true",tool_subset:"true",tool_superset:"true",tool_contains:"true",allowNewLine:"false",enableAutoWrap:"false"}},afterCreate:function afterCreate(pci){},getMarkupTemplate:function getMarkupTemplate(){return markupTpl},getMarkupData:function getMarkupData(pci,defaultData){return defaultData.prompt=pci.data("prompt"),defaultData}};return mathEntryInteractionCreator}),define(["mathEntryInteraction/imsPciCreator"],function(IMSPCI){return IMSPCI});