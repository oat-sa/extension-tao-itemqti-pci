define("tpl!likertScaleInteraction/creator/tpl/propertiesForm",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n        <option value=\""+escapeExpression((stack1=null==data||!1===data?data:data.key,"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.selected,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</option>\n        ",buffer}function program2(depth0,data){return"selected=\"selected\""}function program4(depth0,data){return"checked=\"checked\""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;return buffer+="<div class=\"panel\">\n    <label for=\"level\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Level",options):helperMissing.call(depth0,"__","Level",options)))+"</label>\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content:first\" data-tooltip-theme=\"info\"></span>\n    <span class=\"tooltip-content\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Scale size",options):helperMissing.call(depth0,"__","Scale size",options)))+"</span>\n    <select name=\"level\" class=\"select2\" data-has-search=\"false\">\n        ",stack1=helpers.each.call(depth0,depth0&&depth0.levels,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </select>\n</div>\n\n<div class=\"panel\">\n    <label>\n        <input name=\"icons\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.icons,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show icons",options):helperMissing.call(depth0,"__","Show icons",options)))+"\n    </label>\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content:first\" data-tooltip-theme=\"info\"></span>\n    <span class=\"tooltip-content\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Display icons at each end, or not",options):helperMissing.call(depth0,"__","Display icons at each end, or not",options)))+"</span>\n</div>\n\n<div class=\"panel\">\n    <label>\n        <input name=\"numbers\" type=\"checkbox\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.icons,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="/>\n        <span class=\"icon-checkbox\"></span> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show numbers",options):helperMissing.call(depth0,"__","Show numbers",options)))+"\n    </label>\n    <span class=\"icon-help tooltipstered\" data-tooltip=\"~ .tooltip-content:first\" data-tooltip-theme=\"info\"></span>\n    <span class=\"tooltip-content\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Display numbers above the choices, or not",options):helperMissing.call(depth0,"__","Display numbers above the choices, or not",options)))+"</span>\n</div>",buffer})}),define("likertScaleInteraction/creator/widget/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/editor/simpleContentEditableElement","taoQtiItem/qtiCreator/editor/containerEditor","tpl!likertScaleInteraction/creator/tpl/propertiesForm","lodash","jquery"],function(stateFactory,Question,formElement,simpleEditor,containerEditor,formTpl,_){"use strict";const LikertInteractionStateQuestion=stateFactory.extend(Question,function(){const $container=this.widget.$container,$prompt=$container.find(".prompt"),interaction=this.widget.element;containerEditor.create($prompt,{change:function change(text){interaction.data("prompt",text),interaction.updateMarkup()},markup:interaction.markup,markupSelector:".prompt",related:interaction,areaBroker:this.widget.getAreaBroker()}),simpleEditor.create($container,".likert-label-min",function(text){interaction.prop("label-min",text)}),simpleEditor.create($container,".likert-label-max",function(text){interaction.prop("label-max",text)})},function destroy(){const $container=this.widget.$container,$prompt=$container.find(".prompt");simpleEditor.destroy(this.widget.$container),containerEditor.destroy($prompt)});return LikertInteractionStateQuestion.prototype.initForm=function(){const _widget=this.widget,$form=_widget.$form,interaction=_widget.element,response=interaction.getResponseDeclaration(),level=parseInt(interaction.prop("level"))||5,levels=[2,3,4,5,6,7,8,9,10],levelData={},icons=![!1,"false"].includes(interaction.prop("icons")),numbers=![!1,"false"].includes(interaction.prop("numbers"));levels.forEach(lvl=>{levelData[lvl]={label:lvl,selected:lvl===level}}),$form.html(formTpl({serial:response.serial,levels:levelData,icons,numbers})),formElement.initWidget($form),formElement.setChangeCallbacks($form,interaction,{level:function(interaction,value){interaction.prop("level",value),interaction.triggerPci("configChange",[{level:parseInt(value)}])},icons:function(interaction,value){interaction.prop("icons",value),interaction.triggerPci("configChange",[{icons:value}])},numbers:function(interaction,value){interaction.prop("numbers",value),interaction.triggerPci("configChange",[{numbers:value}])}})},LikertInteractionStateQuestion}),define("likertScaleInteraction/creator/widget/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","taoQtiItem/qtiCreator/widgets/helpers/content"],function(stateFactory,Answer,answerStateHelper){"use strict";var InteractionStateAnswer=stateFactory.extend(Answer,function initAnswerState(){this.widget.$original.find(".likert input").prop("disabled",!0)},function exitAnswerState(){this.widget.$original.find(".likert input").prop("disabled",!1)});return InteractionStateAnswer.prototype.initResponseForm=function initResponseForm(){answerStateHelper.initResponseForm(this.widget,{rpTemplates:["CUSTOM","NONE"]})},InteractionStateAnswer}),define("likertScaleInteraction/creator/widget/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states","likertScaleInteraction/creator/widget/states/Question","likertScaleInteraction/creator/widget/states/Answer"],function(factory,states){"use strict";return factory.createBundle(states,arguments,["correct","map"])}),define("likertScaleInteraction/creator/widget/Widget",["taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget","likertScaleInteraction/creator/widget/states/states"],function(Widget,states){"use strict";var likertScaleInteractionWidget=Widget.clone();return likertScaleInteractionWidget.initCreator=function(){this.registerStates(states),Widget.initCreator.call(this),this.element.getResponseDeclaration().setTemplate("NONE")},likertScaleInteractionWidget}),define("tpl!likertScaleInteraction/creator/tpl/markup",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function";return buffer+="<div class=\"likertInteraction\">\n    <style>\n    .likertInteraction {\n        --likert-choice-gap: 1em;\n    }\n    .likertInteraction .row {\n        display: flex;\n        align-items: center;\n        margin-top: 1em;\n    }\n    .likertInteraction .row svg {\n        margin-block: 0.5em;\n    }\n    .likertInteraction .row svg:first-of-type {\n        margin-inline-start: 0.5em;\n    }\n    .likertInteraction .row svg:last-of-type {\n        margin-inline-end: 0.5em;\n    }\n    .likertInteraction .row ol.likert {\n        display: inline-flex;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: var(--likert-choice-gap);\n        list-style-type: none;\n        margin: 0.25em 1em 0;\n        padding: 0;\n    }\n    .likertInteraction.numbers-above .row {\n        align-items: flex-end;\n        margin-top: 1em;\n    }\n    .likertInteraction .row ol input {\n        position: relative;\n        margin: 0;\n        padding: 0;\n        color: inherit;\n    }\n    .likertInteraction.numbers-above .row ol input::before {\n        content: counter(list-item);\n        display: block;\n        text-align: center;\n        min-width: 2ch;\n        position: absolute;\n        top: -1.75em;\n        left: -0.15em;\n    }\n    </style>\n    <div class=\"prompt\">",(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n    <div class=\"row\">\n        <ol class=\"likert\"></ol>\n    </div>\n</div>",buffer})}),define("likertScaleInteraction/imsPciCreator",["lodash","likertScaleInteraction/creator/widget/Widget","tpl!likertScaleInteraction/creator/tpl/markup"],function(_,Widget,markupTpl){"use strict";const _typeIdentifier="likertScaleInteraction";return{getTypeIdentifier:function(){return _typeIdentifier},getWidget:function(){return Widget},getDefaultProperties:function(){return{level:5,"label-min":"min","label-max":"max",icons:!1,numbers:!1}},afterCreate:function(pci){pci.getResponseDeclaration().setTemplate("NONE")},getMarkupTemplate:function(){return markupTpl},getMarkupData:function(pci,defaultData){return defaultData.prompt=pci.data("prompt"),defaultData}}}),define(["likertScaleInteraction/imsPciCreator"],function(IMSPCI){return IMSPCI});