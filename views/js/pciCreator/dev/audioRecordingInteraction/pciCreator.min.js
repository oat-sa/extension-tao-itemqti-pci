define("tpl!audioRecordingInteraction/creator/tpl/propertiesForm",["handlebars"],function(t){return t.template(function(t,e,a,n,i){function o(t,e){return'checked="checked"'}function s(t,e){return'style="display:none"'}function l(t,e){return' selected="selected"'}function r(t,e){return" hidden"}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,t.helpers),i=i||{};var d,c,p,h="",u=a.helperMissing,m=this.escapeExpression,f=this;return h+='<div class="panel">\n    <label for="response-identifier" class="has-icon">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Response identifier",p):u.call(e,"__","Response identifier",p)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,'The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',p):u.call(e,"__",'The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',p)))+'</div>\n\n    <input id="response-identifier"\n           type="text"\n           name="identifier"\n           value="',(c=a.identifier)?d=c.call(e,{hash:{},data:i}):(c=e&&e.identifier,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+'"\n           placeholder="e.g. RESPONSE"\n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(c=a.serial)?d=c.call(e,{hash:{},data:i}):(c=e&&e.serial,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+');">\n</div>\n\n<div class="panel">\n    <label>\n        <input name="allowPlayback" type="checkbox" ',d=a.if.call(e,e&&e.allowPlayback,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(d||0===d)&&(h+=d),h+='/>\n        <span class="icon-checkbox"></span> '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Allow playback",p):u.call(e,"__","Allow playback",p)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Give the possibility to the test taker to playback its own recording.",p):u.call(e,"__","Give the possibility to the test taker to playback its own recording.",p)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <label>\n        <input name="autoStart" type="checkbox" ',d=a.if.call(e,e&&e.autoStart,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(d||0===d)&&(h+=d),h+='/>\n        <span class="icon-checkbox"></span> '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Auto start recording",p):u.call(e,"__","Auto start recording",p)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Recording starts automatically once test taker give microphone use authorisation. If a media stimulus is used, then the recording starts automatically after the stimulus has been played.",p):u.call(e,"__","Recording starts automatically once test taker give microphone use authorisation. If a media stimulus is used, then the recording starts automatically after the stimulus has been played.",p)))+'\n    </span>\n</div>\n\n<div data-role="delayOptions" ',d=a.unless.call(e,e&&e.autoStart,{hash:{},inverse:f.noop,fn:f.program(3,s,i),data:i}),(d||0===d)&&(h+=d),h+='>\n    <div class="panel">\n        <label for="delay-minutes" class="spinner">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Min:",p):u.call(e,"__","Min:",p)))+'</label>\n        <input id="delay-minutes" name="delayMinutes" value="',(c=a.delayMinutes)?d=c.call(e,{hash:{},data:i}):(c=e&&e.delayMinutes,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+'" data-increment="1" data-min="0" data-max="20" type="text" />\n        <label for="delay-seconds" class="spinner">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Sec:",p):u.call(e,"__","Sec:",p)))+'</label>\n        <input id="delay-seconds" name="delaySeconds" value="',(c=a.delaySeconds)?d=c.call(e,{hash:{},data:i}):(c=e&&e.delaySeconds,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+'" data-increment="15" data-min="0" data-max="45" type="text" />\n    </div>\n</div>\n\n<div class="panel">\n    <label>\n        <input name="autoPlayback" type="checkbox" ',d=a.if.call(e,e&&e.autoPlayback,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(d||0===d)&&(h+=d),h+='/>\n        <span class="icon-checkbox"></span> '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Auto playback recording",p):u.call(e,"__","Auto playback recording",p)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Recorded audio is automatically played back after recording stops. During playback, no user interaction is possible and all buttons are disabled.",p):u.call(e,"__","Recorded audio is automatically played back after recording stops. During playback, no user interaction is possible and all buttons are disabled.",p)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <label for="max-records" class="spinner">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Max attempts:",p):u.call(e,"__","Max attempts:",p)))+'</label>\n    <input id="max-records" name="maxRecords" value="',(c=a.maxRecords)?d=c.call(e,{hash:{},data:i}):(c=e&&e.maxRecords,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+'" class="large" data-increment="1" data-min="0" type="text" />\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Maximum number of recording attempts allowed to the test taker. Set to 0 to allow unlimited attempts. With a limit of 3, the test taker will be able to click 2 times on the reset button.",p):u.call(e,"__","Maximum number of recording attempts allowed to the test taker. Set to 0 to allow unlimited attempts. With a limit of 3, the test taker will be able to click 2 times on the reset button.",p)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <label for="max-recording-time" class="spinner">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Time limit:",p):u.call(e,"__","Time limit:",p)))+'</label>\n    <input id="max-recording-time" name="maxRecordingTime" value="',(c=a.maxRecordingTime)?d=c.call(e,{hash:{},data:i}):(c=e&&e.maxRecordingTime,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+'" class="large" data-increment="5" data-min="5" data-max="',(c=a.maximumRecordingTimeLimit)?d=c.call(e,{hash:{},data:i}):(c=e&&e.maximumRecordingTimeLimit,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+'" type="text" />\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"In seconds. Maximum recording time allowed (cannot be less than 5 seconds). Recording will automatically stop once reached.",p):u.call(e,"__","In seconds. Maximum recording time allowed (cannot be less than 5 seconds). Recording will automatically stop once reached.",p)))+'\n    </span>\n</div>\n\n<hr />\n<div class="panel">\n    <label for="is-compressed">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Recording format",p):u.call(e,"__","Recording format",p)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"With compressed recording, the audio is saved as a webm or ogg file (smaller size). With uncompressed, as a lossless Wav file (much bigger size).",p):u.call(e,"__","With compressed recording, the audio is saved as a webm or ogg file (smaller size). With uncompressed, as a lossless Wav file (much bigger size).",p)))+'\n    </span>\n    <select id="is-compressed" name="isCompressed">\n        <option value="true"',d=a.if.call(e,e&&e.isCompressed,{hash:{},inverse:f.noop,fn:f.program(5,l,i),data:i}),(d||0===d)&&(h+=d),h+=">"+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Compressed",p):u.call(e,"__","Compressed",p)))+'</option>\n        <option value="false"',d=a.unless.call(e,e&&e.isCompressed,{hash:{},inverse:f.noop,fn:f.program(5,l,i),data:i}),(d||0===d)&&(h+=d),h+=">"+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Uncompressed",p):u.call(e,"__","Uncompressed",p)))+'</option>\n    </select>\n</div>\n\n<div data-role="compressedOptions" ',d=a.unless.call(e,e&&e.isCompressed,{hash:{},inverse:f.noop,fn:f.program(3,s,i),data:i}),(d||0===d)&&(h+=d),h+='>\n    <div class="panel">\n        <label for="audio-bitrate" class="spinner">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Audio bitrate:",p):u.call(e,"__","Audio bitrate:",p)))+'</label>\n        <input id="audio-bitrate" name="audioBitrate" value="',(c=a.audioBitrate)?d=c.call(e,{hash:{},data:i}):(c=e&&e.audioBitrate,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+'" class="large" data-increment="1000" data-min="8000" type="text" />\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"In bps (bits per second). Set the tradeoff between audio quality and filesize. With the default value (20.000bps), a 2minutes recording weights roughly 300KB.",p):u.call(e,"__","In bps (bits per second). Set the tradeoff between audio quality and filesize. With the default value (20.000bps), a 2minutes recording weights roughly 300KB.",p)))+'\n        </span>\n    </div>\n</div>\n\n<div data-role="uncompressedOptions"  ',d=a.if.call(e,e&&e.isCompressed,{hash:{},inverse:f.noop,fn:f.program(3,s,i),data:i}),(d||0===d)&&(h+=d),h+='>\n    <div class="panel">\n        <label for="is-stereo">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Channels",p):u.call(e,"__","Channels",p)))+'</label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Number of channels for the recording. Allow to cut the record size in half if used in mono.",p):u.call(e,"__","Number of channels for the recording. Allow to cut the record size in half if used in mono.",p)))+'\n        </span>\n        <select id="is-stereo" name="isStereo">\n            <option value="false"',d=a.unless.call(e,e&&e.isStereo,{hash:{},inverse:f.noop,fn:f.program(5,l,i),data:i}),(d||0===d)&&(h+=d),h+=">"+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Mono",p):u.call(e,"__","Mono",p)))+'</option>\n            <option value="true"',d=a.if.call(e,e&&e.isStereo,{hash:{},inverse:f.noop,fn:f.program(5,l,i),data:i}),(d||0===d)&&(h+=d),h+=">"+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Stereo",p):u.call(e,"__","Stereo",p)))+'</option>\n        </select>\n    </div>\n</div>\n\n<hr />\n\n<div class="panel">\n    <label>\n        <input name="useMediaStimulus" type="checkbox" ',d=a.if.call(e,e&&e.useMediaStimulus,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(d||0===d)&&(h+=d),h+='/>\n        <span class="icon-checkbox"></span> '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Use media stimulus",p):u.call(e,"__","Use media stimulus",p)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"This options allow to insert a media stimulus that will have to be played before recording can happen.",p):u.call(e,"__","This options allow to insert a media stimulus that will have to be played before recording can happen.",p)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <div class="media-stimulus-properties-form',d=a.unless.call(e,e&&e.useMediaStimulus,{hash:{},inverse:f.noop,fn:f.program(7,r,i),data:i}),(d||0===d)&&(h+=d),h+='"></div>\n</div>\n\n<hr />\n\n<h3 class="txt-error"><strong><span class="icon-warning"></span> '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"For tests only",p):u.call(e,"__","For tests only",p)))+'</strong></h3>\n\n<div class="panel">\n    <label>\n        <input name="displayDownloadLink" type="checkbox" ',d=a.if.call(e,e&&e.displayDownloadLink,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(d||0===d)&&(h+=d),h+='/>\n        <span class="icon-checkbox"></span>\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Allow download",p):u.call(e,"__","Allow download",p)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"This is for testing purposes only. Displays a link to download the recorded file once the recording stops. This shouldn't be used in a delivery context, as it would allow the test taker to download its own recording.",p):u.call(e,"__","This is for testing purposes only. Displays a link to download the recorded file once the recording stops. This shouldn't be used in a delivery context, as it would allow the test taker to download its own recording.",p)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <label for="partial-update-interval" class="spinner">'+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"Update interval:",p):u.call(e,"__","Update interval:",p)))+'</label>\n    <input id="partial-update-interval" name="partialUpdateInterval" value="',(c=a.partialUpdateInterval)?d=c.call(e,{hash:{},data:i}):(c=e&&e.partialUpdateInterval,d="function"==typeof c?c.call(e,{hash:{},data:i}):c),h+=m(d)+'" class="large" data-increment="1" data-min="1" data-max="60" type="text" />\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+m((c=a.__||e&&e.__,p={hash:{},data:i},c?c.call(e,"In seconds. The time interval between partial updates of the recording.",p):u.call(e,"__","In seconds. The time interval between partial updates of the recording.",p)))+"\n    </span>\n</div>"})}),define("audioRecordingInteraction/creator/widget/states/Question",["lodash","i18n","jquery","module","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/pciMediaManager/pciMediaManager","taoQtiItem/qtiCreator/editor/simpleContentEditableElement","taoQtiItem/qtiCreator/editor/containerEditor","tpl!audioRecordingInteraction/creator/tpl/propertiesForm","util/typeCaster"],function(t,e,a,n,i,o,s,l,r,d,c,p){"use strict";function h(t,e,a){t.prop(a,e),t.triggerPci("configChange",[t.getProperties()])}var u=i.extend(o,function(){var t=this.widget.$container,e=t.find(".prompt"),a=this.widget.element;d.create(e,{change:function(t){a.data("prompt",t),a.updateMarkup()},markup:a.markup,markupSelector:".prompt",related:a,areaBroker:this.widget.getAreaBroker()})},function(){var t=this.widget.$container,e=t.find(".prompt");r.destroy(t),d.destroy(e)});return u.prototype.initForm=function(){var e,a,i,o,r=this.widget,d=r.$form,u=r.element,m=u.getResponseDeclaration(),f=l(r);d.html(c(t.defaults({},n.config(),{serial:m.serial,identifier:u.attr("responseIdentifier"),allowPlayback:p.strToBool(u.prop("allowPlayback"),!0),autoStart:p.strToBool(u.prop("autoStart"),!1),autoPlayback:p.strToBool(u.prop("autoPlayback"),!1),delayMinutes:u.prop("delayMinutes"),delaySeconds:u.prop("delaySeconds"),maxRecords:u.prop("maxRecords"),maxRecordingTime:u.prop("maxRecordingTime"),isCompressed:p.strToBool(u.prop("isCompressed"),!0),audioBitrate:u.prop("audioBitrate"),isStereo:p.strToBool(u.prop("isStereo"),!1),useMediaStimulus:p.strToBool(u.prop("useMediaStimulus"),!1),updateResponsePartially:p.strToBool(u.prop("updateResponsePartially"),!0),partialUpdateInterval:parseInt(u.prop("partialUpdateInterval"),10)/1e3,displayDownloadLink:p.strToBool(u.prop("displayDownloadLink"),!1)}))),e=d.find(".media-stimulus-properties-form"),e.append(f.getForm()),a=d.find('[data-role="compressedOptions"]'),i=d.find('[data-role="uncompressedOptions"]'),o=d.find('[data-role="delayOptions"]'),s.initWidget(d),s.setChangeCallbacks(d,u,t.assign({identifier:function(t,e){m.id(e),u.attr("responseIdentifier",e)},allowPlayback:h,autoStart:function(t,e,a){e?o.show():o.hide(),h(t,e,a)},autoPlayback:h,delayMinutes:h,delaySeconds:h,maxRecords:h,maxRecordingTime:h,isCompressed:function(t,e,n){"true"===e?(i.hide(),a.show()):(i.show(),a.hide()),h(t,e,n)},audioBitrate:h,isStereo:h,useMediaStimulus:function(t,a,n){a?(e.removeClass("hidden"),e.show(250)):e.hide(250),h(t,a,n)},partialUpdateInterval:function(t,e,a){e=1e3*parseFloat(e),h(t,e,a)},displayDownloadLink:h},f.getChangeCallbacks())),f.init()},u}),define("audioRecordingInteraction/creator/widget/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states","audioRecordingInteraction/creator/widget/states/Question"],function(t,e){"use strict";return t.createBundle(e,arguments,["answer","correct","map"])}),define("css!audioRecordingInteraction/creator/css/audioRecordingInteraction",[],function(){}),define("audioRecordingInteraction/creator/widget/Widget",["taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget","audioRecordingInteraction/creator/widget/states/states","css!audioRecordingInteraction/creator/css/audioRecordingInteraction"],function(t,e){"use strict";var a=t.clone();return a.initCreator=function(){var a;this.registerStates(e),t.initCreator.call(this),a=this.$container.find(".audioRecordingInteraction"),a.length&&a.addClass("tao-qti-creator-context")},a}),define("tpl!audioRecordingInteraction/creator/tpl/markup",["handlebars"],function(t){return t.template(function(t,e,a,n,i){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,t.helpers),i=i||{};var o,s,l="";return l+='<div class="audioRecordingInteraction">\n    <div class="prompt">',(s=a.prompt)?o=s.call(e,{hash:{},data:i}):(s=e&&e.prompt,o="function"==typeof s?s.call(e,{hash:{},data:i}):s),(o||0===o)&&(l+=o),l+=' </div>\n    <div class="audio-rec">\n        <div class="media-stimulus"> </div>\n        <div class="input-meter">\n            <div class="countdown-pie-chart"> </div>\n            <div class="leds"> </div>\n            <div class="mic"> </div>\n        </div>\n        <div class="progress"> </div>\n        <div class="controls"> </div>\n    </div>\n</div>'})}),define("audioRecordingInteraction/pciCreator",["lodash","taoQtiItem/qtiCreator/editor/customInteractionRegistry","audioRecordingInteraction/creator/widget/Widget","tpl!audioRecordingInteraction/creator/tpl/markup"],function(t,e,a,n){"use strict";var i={getTypeIdentifier:function(){return"audioRecordingInteraction"},getWidget:function(){var e;return a.beforeStateInit(function(a,n){n.typeIdentifier&&"audioRecordingInteraction"===n.typeIdentifier&&(e=i.getDefaultProperties(),t.forEach(e,function(t,e){(void 0===n.properties[e]||"string"==typeof n.properties[e]&&!n.properties[e]&&"string"!=typeof t)&&(n.properties[e]=t)}))}),a},getDefaultProperties:function(){return{isReviewMode:!1,allowPlayback:!0,autoStart:!1,autoPlayback:!1,delayMinutes:0,delaySeconds:0,maxRecords:2,maxRecordingTime:120,isCompressed:!0,audioBitrate:2e4,isStereo:!1,useMediaStimulus:!1,media:{autostart:!0,replayTimeout:5,maxPlays:2},displayDownloadLink:!1,updateResponsePartially:!0,partialUpdateInterval:1e3}},afterCreate:function(){},getMarkupTemplate:function(){return n},getMarkupData:function(t,e){return e.prompt=t.data("prompt"),e}};return i}),function(t){var e=document,a="appendChild",n="styleSheet",i=e.createElement("style");i.type="text/css",e.getElementsByTagName("head")[0][a](i),i[n]?i[n].cssText=t:i[a](e.createTextNode(t))}('.item-editor-interaction-related div[data-role="delayOptions"] .panel{margin-top:-15px}.item-editor-interaction-related div[data-role="delayOptions"] .panel label[for="delayMinutes"]{min-width:0}.item-editor-interaction-related div[data-role="delayOptions"] .panel label[for="delaySeconds"]{min-width:0;padding-left:18px}\n\n/*# sourceMappingURL=audioRecordingInteraction.css.map */'),define(["audioRecordingInteraction/pciCreator"],function(t){return t});
//# sourceMappingURL=pciCreator.min.js.map