{"version":3,"names":["define","t","template","compiler","main","e","i","n","r","a","o","lookupProperty","Object","prototype","hasOwnProperty","call","escapeExpression","hooks","helperMissing","nullContext","name","hash","data","loc","start","line","column","end","useData","extend","widget","$container","append","children","remove","initForm","$form","element","getResponseDeclaration","html","serial","identifier","attr","initWidget","setChangeCallbacks","id","forward","initResponseForm","rpTemplates","create","values","getCorrect","setResponse","base","integer","onPci","push","setCorrect","resetResponse","offPci","createBundle","arguments","clone","initCreator","registerStates","getTypeIdentifier","getWidget","getDefaultProperties","afterCreate","getMarkupTemplate","getMarkupData","prompt"],"sources":["../../../qtiItemPci/views/js/pciCreator/dev/liquidsInteraction/creator/tpl/propertiesForm!tpl","../../../qtiItemPci/views/js/pciCreator/dev/liquidsInteraction/creator/widget/states/Question.js","../../../qtiItemPci/views/js/pciCreator/dev/liquidsInteraction/creator/widget/states/Answer.js","../../../qtiItemPci/views/js/pciCreator/dev/liquidsInteraction/creator/widget/states/Correct.js","../../../qtiItemPci/views/js/pciCreator/dev/liquidsInteraction/creator/widget/states/states.js","../../../qtiItemPci/views/js/pciCreator/dev/liquidsInteraction/creator/widget/Widget.js","../../../qtiItemPci/views/js/pciCreator/dev/liquidsInteraction/creator/tpl/markup!tpl","../../../qtiItemPci/views/js/pciCreator/dev/liquidsInteraction/pciCreator.js"],"sourcesContent":["\ndefine('tpl!liquidsInteraction/creator/tpl/propertiesForm', ['handlebars'], function(hb){ return hb.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Response identifier\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":35},\"end\":{\"line\":2,\"column\":63}}}))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":33},\"end\":{\"line\":4,\"column\":361}}}))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"identifier\") || (depth0 != null ? lookupProperty(depth0,\"identifier\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"identifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":18},\"end\":{\"line\":8,\"column\":32}}}) : helper)))\n    + \"\\\" \\n           placeholder=\\\"e.g. RESPONSE\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"serial\") || (depth0 != null ? lookupProperty(depth0,\"serial\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"serial\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":81},\"end\":{\"line\":10,\"column\":91}}}) : helper)))\n    + \");\\\">\\n</div>\";\n},\"useData\":true}); });\n","define('liquidsInteraction/creator/widget/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!liquidsInteraction/creator/tpl/propertiesForm',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay'\n], function(stateFactory, Question, formElement, formTpl, overlayTpl){\n\n    var LiquidsInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        //add transparent protective layer\n        this.widget.$container.append(overlayTpl());\n\n    }, function(){\n\n        //remove transparent protective layer\n        this.widget.$container.children('.overlay').remove();\n        \n    });\n\n    LiquidsInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //render the form using the form template\n        $form.html(formTpl({\n            serial : response.serial,\n            identifier : interaction.attr('responseIdentifier')\n        }));\n\n        //init form javascript\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, interaction, {\n            \n            identifier : function(i, value){\n                response.id(value);\n                interaction.attr('responseIdentifier', value);\n            }\n        });\n\n    };\n\n    return LiquidsInteractionStateQuestion;\n});\n\n","define('liquidsInteraction/creator/widget/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var LiquidsInteractionStateAnswer = stateFactory.extend(Answer, function(){\n\n        //forward to one of the available sub state, according to the response processing template\n        answerStateHelper.forward(this.widget);\n\n    }, function(){\n\n    });\n\n    LiquidsInteractionStateAnswer.prototype.initResponseForm = function initResponseForm() {\n        answerStateHelper.initResponseForm(\n            this.widget,\n            {\n                rpTemplates: ['CUSTOM', 'MATCH_CORRECT', 'NONE'],\n            }\n        );\n    };\n\n    return  LiquidsInteractionStateAnswer;\n});\n\n","define('liquidsInteraction/creator/widget/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'lodash'\n], function(stateFactory, Correct, _){\n\n    var LiquidsInteractionStateCorrect = stateFactory.create(Correct, function(){\n    \n        var widget = this.widget;\n        var interaction = widget.element;\n        var responseDeclaration = interaction.getResponseDeclaration();\n        var correct = _.values(responseDeclaration.getCorrect());\n        \n        // show correct response in liquid container.\n        if (typeof correct[0] !== 'undefined') {\n            interaction.setResponse( { base: { integer: correct[0] } });\n        }\n        \n        interaction.onPci('responsechange.question', function(response){\n            var correctResponse = [];\n            \n            if (response.base !== null) {\n                correctResponse.push(response.base.integer);\n            }\n            \n            responseDeclaration.setCorrect(correctResponse);\n        });\n\n    }, function(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        interaction.resetResponse();\n        interaction.offPci('.question');\n    });\n\n    return LiquidsInteractionStateCorrect;\n});\n\n","define('liquidsInteraction/creator/widget/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states',\n    'liquidsInteraction/creator/widget/states/Question',\n    'liquidsInteraction/creator/widget/states/Answer',\n    'liquidsInteraction/creator/widget/states/Correct'\n], function(factory, states){\n    return factory.createBundle(states, arguments, ['map']);\n});\n","define('liquidsInteraction/creator/widget/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget',\n    'liquidsInteraction/creator/widget/states/states'\n], function(Widget, states){\n\n    var LiquidsInteractionWidget = Widget.clone();\n\n    LiquidsInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return LiquidsInteractionWidget;\n});\n","\ndefine('tpl!liquidsInteraction/creator/tpl/markup', ['handlebars'], function(hb){ return hb.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"liquidsInteraction\\\">\\n    <div class=\\\"prompt\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"prompt\") || (depth0 != null ? lookupProperty(depth0,\"prompt\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"prompt\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":24},\"end\":{\"line\":2,\"column\":34}}}) : helper)))\n    + \"</div>\\n    <canvas class=\\\"liquids\\\" width=\\\"400\\\" height=\\\"400\\\"></canvas>\\n</div>\";\n},\"useData\":true}); });\n","define('liquidsInteraction/pciCreator',[\n    'lodash',\n    'liquidsInteraction/creator/widget/Widget',\n    'tpl!liquidsInteraction/creator/tpl/markup'\n], function(_, Widget, markupTpl){\n\n    var _typeIdentifier = 'liquidsInteraction';\n\n    var liquidsInteractionCreator = {\n        /**\n         * (required) Get the typeIdentifier of the custom interaction\n         * \n         * @returns {String}\n         */\n        getTypeIdentifier : function(){\n            return _typeIdentifier;\n        },\n        /**\n         * (required) Get the widget prototype\n         * Used in the renderer\n         * \n         * @returns {Object} Widget\n         */\n        getWidget : function(){\n            return Widget;\n        },\n        /**\n         * (optional) Get the default properties values of the pci.\n         * Used on new pci instance creation\n         * \n         * @returns {Object}\n         */\n        getDefaultProperties : function(pci){\n            return {};\n        },\n        /**\n         * (optional) Callback to execute on the \n         * Used on new pci instance creation\n         * \n         * @returns {Object}\n         */\n        afterCreate : function(pci){\n            //do some stuff\n        },\n        /**\n         * (required) Gives the qti pci xml template \n         * \n         * @returns {function} handlebar template\n         */\n        getMarkupTemplate : function(){\n            return markupTpl;\n        },\n        /**\n         * (optional) Allows passing additional data to xml template\n         * \n         * @returns {function} handlebar template\n         */\n        getMarkupData : function(pci, defaultData){\n            defaultData.prompt = pci.data('prompt');\n            return defaultData;\n        }\n    };\n\n    //since we assume we are in a tao context, there is no use to expose the a global object for lib registration\n    //all libs should be declared here\n    return liquidsInteractionCreator;\n});\n"],"mappings":"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"}